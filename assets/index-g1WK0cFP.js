(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ir(s){const i=Object.create(null);for(const r of s.split(","))i[r]=1;return r=>r in i}const gt={},Vs=[],Pe=()=>{},qo=()=>!1,dn=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),nr=s=>s.startsWith("onUpdate:"),te=Object.assign,rr=(s,i)=>{const r=s.indexOf(i);r>-1&&s.splice(r,1)},Bo=Object.prototype.hasOwnProperty,_t=(s,i)=>Bo.call(s,i),st=Array.isArray,Gs=s=>mn(s)==="[object Map]",ra=s=>mn(s)==="[object Set]",it=s=>typeof s=="function",At=s=>typeof s=="string",us=s=>typeof s=="symbol",Tt=s=>s!==null&&typeof s=="object",aa=s=>(Tt(s)||it(s))&&it(s.then)&&it(s.catch),oa=Object.prototype.toString,mn=s=>oa.call(s),Wo=s=>mn(s).slice(8,-1),la=s=>mn(s)==="[object Object]",ar=s=>At(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,Ri=ir(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),pn=s=>{const i=Object.create(null);return r=>i[r]||(i[r]=s(r))},Uo=/-(\w)/g,cs=pn(s=>s.replace(Uo,(i,r)=>r?r.toUpperCase():"")),Ho=/\B([A-Z])/g,Is=pn(s=>s.replace(Ho,"-$1").toLowerCase()),ha=pn(s=>s.charAt(0).toUpperCase()+s.slice(1)),Nn=pn(s=>s?`on${ha(s)}`:""),ls=(s,i)=>!Object.is(s,i),Mn=(s,...i)=>{for(let r=0;r<s.length;r++)s[r](...i)},ca=(s,i,r,o=!1)=>{Object.defineProperty(s,i,{configurable:!0,enumerable:!1,writable:o,value:r})},Ko=s=>{const i=parseFloat(s);return isNaN(i)?s:i};let Ir;const gn=()=>Ir||(Ir=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vn(s){if(st(s)){const i={};for(let r=0;r<s.length;r++){const o=s[r],l=At(o)?Yo(o):vn(o);if(l)for(const c in l)i[c]=l[c]}return i}else if(At(s)||Tt(s))return s}const Vo=/;(?![^(]*\))/g,Go=/:([^]+)/,zo=/\/\*[^]*?\*\//g;function Yo(s){const i={};return s.replace(zo,"").split(Vo).forEach(r=>{if(r){const o=r.split(Go);o.length>1&&(i[o[0].trim()]=o[1].trim())}}),i}function or(s){let i="";if(At(s))i=s;else if(st(s))for(let r=0;r<s.length;r++){const o=or(s[r]);o&&(i+=o+" ")}else if(Tt(s))for(const r in s)s[r]&&(i+=r+" ");return i.trim()}const jo="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$o=ir(jo);function ua(s){return!!s||s===""}const _a=s=>!!(s&&s.__v_isRef===!0),Gn=s=>At(s)?s:s==null?"":st(s)||Tt(s)&&(s.toString===oa||!it(s.toString))?_a(s)?Gn(s.value):JSON.stringify(s,fa,2):String(s),fa=(s,i)=>_a(i)?fa(s,i.value):Gs(i)?{[`Map(${i.size})`]:[...i.entries()].reduce((r,[o,l],c)=>(r[Pn(o,c)+" =>"]=l,r),{})}:ra(i)?{[`Set(${i.size})`]:[...i.values()].map(r=>Pn(r))}:us(i)?Pn(i):Tt(i)&&!st(i)&&!la(i)?String(i):i,Pn=(s,i="")=>{var r;return us(s)?`Symbol(${(r=s.description)!=null?r:i})`:s};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let oe;class Qo{constructor(i=!1){this.detached=i,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=oe,!i&&oe&&(this.index=(oe.scopes||(oe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let i,r;if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].pause();for(i=0,r=this.effects.length;i<r;i++)this.effects[i].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let i,r;if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].resume();for(i=0,r=this.effects.length;i<r;i++)this.effects[i].resume()}}run(i){if(this._active){const r=oe;try{return oe=this,i()}finally{oe=r}}}on(){oe=this}off(){oe=this.parent}stop(i){if(this._active){this._active=!1;let r,o;for(r=0,o=this.effects.length;r<o;r++)this.effects[r].stop();for(this.effects.length=0,r=0,o=this.cleanups.length;r<o;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,o=this.scopes.length;r<o;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!i){const l=this.parent.scopes.pop();l&&l!==this&&(this.parent.scopes[this.index]=l,l.index=this.index)}this.parent=void 0}}}function Jo(){return oe}let pt;const Fn=new WeakSet;class da{constructor(i){this.fn=i,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,oe&&oe.active&&oe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Fn.has(this)&&(Fn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||pa(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Lr(this),ga(this);const i=pt,r=ve;pt=this,ve=!0;try{return this.fn()}finally{va(this),pt=i,ve=r,this.flags&=-3}}stop(){if(this.flags&1){for(let i=this.deps;i;i=i.nextDep)cr(i);this.deps=this.depsTail=void 0,Lr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Fn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){zn(this)&&this.run()}get dirty(){return zn(this)}}let ma=0,Ci,Ii;function pa(s,i=!1){if(s.flags|=8,i){s.next=Ii,Ii=s;return}s.next=Ci,Ci=s}function lr(){ma++}function hr(){if(--ma>0)return;if(Ii){let i=Ii;for(Ii=void 0;i;){const r=i.next;i.next=void 0,i.flags&=-9,i=r}}let s;for(;Ci;){let i=Ci;for(Ci=void 0;i;){const r=i.next;if(i.next=void 0,i.flags&=-9,i.flags&1)try{i.trigger()}catch(o){s||(s=o)}i=r}}if(s)throw s}function ga(s){for(let i=s.deps;i;i=i.nextDep)i.version=-1,i.prevActiveLink=i.dep.activeLink,i.dep.activeLink=i}function va(s){let i,r=s.depsTail,o=r;for(;o;){const l=o.prevDep;o.version===-1?(o===r&&(r=l),cr(o),Zo(o)):i=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=l}s.deps=i,s.depsTail=r}function zn(s){for(let i=s.deps;i;i=i.nextDep)if(i.dep.version!==i.version||i.dep.computed&&(Sa(i.dep.computed)||i.dep.version!==i.version))return!0;return!!s._dirty}function Sa(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===Mi))return;s.globalVersion=Mi;const i=s.dep;if(s.flags|=2,i.version>0&&!s.isSSR&&s.deps&&!zn(s)){s.flags&=-3;return}const r=pt,o=ve;pt=s,ve=!0;try{ga(s);const l=s.fn(s._value);(i.version===0||ls(l,s._value))&&(s._value=l,i.version++)}catch(l){throw i.version++,l}finally{pt=r,ve=o,va(s),s.flags&=-3}}function cr(s,i=!1){const{dep:r,prevSub:o,nextSub:l}=s;if(o&&(o.nextSub=l,s.prevSub=void 0),l&&(l.prevSub=o,s.nextSub=void 0),r.subs===s&&(r.subs=o,!o&&r.computed)){r.computed.flags&=-5;for(let c=r.computed.deps;c;c=c.nextDep)cr(c,!0)}!i&&!--r.sc&&r.map&&r.map.delete(r.key)}function Zo(s){const{prevDep:i,nextDep:r}=s;i&&(i.nextDep=r,s.prevDep=void 0),r&&(r.prevDep=i,s.nextDep=void 0)}let ve=!0;const ya=[];function _s(){ya.push(ve),ve=!1}function fs(){const s=ya.pop();ve=s===void 0?!0:s}function Lr(s){const{cleanup:i}=s;if(s.cleanup=void 0,i){const r=pt;pt=void 0;try{i()}finally{pt=r}}}let Mi=0;class Xo{constructor(i,r){this.sub=i,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ur{constructor(i){this.computed=i,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(i){if(!pt||!ve||pt===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==pt)r=this.activeLink=new Xo(pt,this),pt.deps?(r.prevDep=pt.depsTail,pt.depsTail.nextDep=r,pt.depsTail=r):pt.deps=pt.depsTail=r,ba(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const o=r.nextDep;o.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=o),r.prevDep=pt.depsTail,r.nextDep=void 0,pt.depsTail.nextDep=r,pt.depsTail=r,pt.deps===r&&(pt.deps=o)}return r}trigger(i){this.version++,Mi++,this.notify(i)}notify(i){lr();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{hr()}}}function ba(s){if(s.dep.sc++,s.sub.flags&4){const i=s.dep.computed;if(i&&!s.dep.subs){i.flags|=20;for(let o=i.deps;o;o=o.nextDep)ba(o)}const r=s.dep.subs;r!==s&&(s.prevSub=r,r&&(r.nextSub=s)),s.dep.subs=s}}const Yn=new WeakMap,Rs=Symbol(""),jn=Symbol(""),Pi=Symbol("");function Vt(s,i,r){if(ve&&pt){let o=Yn.get(s);o||Yn.set(s,o=new Map);let l=o.get(r);l||(o.set(r,l=new ur),l.map=o,l.key=r),l.track()}}function Ze(s,i,r,o,l,c){const u=Yn.get(s);if(!u){Mi++;return}const d=p=>{p&&p.trigger()};if(lr(),i==="clear")u.forEach(d);else{const p=st(s),y=p&&ar(r);if(p&&r==="length"){const f=Number(o);u.forEach((E,b)=>{(b==="length"||b===Pi||!us(b)&&b>=f)&&d(E)})}else switch((r!==void 0||u.has(void 0))&&d(u.get(r)),y&&d(u.get(Pi)),i){case"add":p?y&&d(u.get("length")):(d(u.get(Rs)),Gs(s)&&d(u.get(jn)));break;case"delete":p||(d(u.get(Rs)),Gs(s)&&d(u.get(jn)));break;case"set":Gs(s)&&d(u.get(Rs));break}}hr()}function Hs(s){const i=ut(s);return i===s?i:(Vt(i,"iterate",Pi),Se(s)?i:i.map(Jt))}function _r(s){return Vt(s=ut(s),"iterate",Pi),s}const tl={__proto__:null,[Symbol.iterator](){return kn(this,Symbol.iterator,Jt)},concat(...s){return Hs(this).concat(...s.map(i=>st(i)?Hs(i):i))},entries(){return kn(this,"entries",s=>(s[1]=Jt(s[1]),s))},every(s,i){return je(this,"every",s,i,void 0,arguments)},filter(s,i){return je(this,"filter",s,i,r=>r.map(Jt),arguments)},find(s,i){return je(this,"find",s,i,Jt,arguments)},findIndex(s,i){return je(this,"findIndex",s,i,void 0,arguments)},findLast(s,i){return je(this,"findLast",s,i,Jt,arguments)},findLastIndex(s,i){return je(this,"findLastIndex",s,i,void 0,arguments)},forEach(s,i){return je(this,"forEach",s,i,void 0,arguments)},includes(...s){return An(this,"includes",s)},indexOf(...s){return An(this,"indexOf",s)},join(s){return Hs(this).join(s)},lastIndexOf(...s){return An(this,"lastIndexOf",s)},map(s,i){return je(this,"map",s,i,void 0,arguments)},pop(){return Ei(this,"pop")},push(...s){return Ei(this,"push",s)},reduce(s,...i){return Or(this,"reduce",s,i)},reduceRight(s,...i){return Or(this,"reduceRight",s,i)},shift(){return Ei(this,"shift")},some(s,i){return je(this,"some",s,i,void 0,arguments)},splice(...s){return Ei(this,"splice",s)},toReversed(){return Hs(this).toReversed()},toSorted(s){return Hs(this).toSorted(s)},toSpliced(...s){return Hs(this).toSpliced(...s)},unshift(...s){return Ei(this,"unshift",s)},values(){return kn(this,"values",Jt)}};function kn(s,i,r){const o=_r(s),l=o[i]();return o!==s&&!Se(s)&&(l._next=l.next,l.next=()=>{const c=l._next();return c.value&&(c.value=r(c.value)),c}),l}const el=Array.prototype;function je(s,i,r,o,l,c){const u=_r(s),d=u!==s&&!Se(s),p=u[i];if(p!==el[i]){const E=p.apply(s,c);return d?Jt(E):E}let y=r;u!==s&&(d?y=function(E,b){return r.call(this,Jt(E),b,s)}:r.length>2&&(y=function(E,b){return r.call(this,E,b,s)}));const f=p.call(u,y,o);return d&&l?l(f):f}function Or(s,i,r,o){const l=_r(s);let c=r;return l!==s&&(Se(s)?r.length>3&&(c=function(u,d,p){return r.call(this,u,d,p,s)}):c=function(u,d,p){return r.call(this,u,Jt(d),p,s)}),l[i](c,...o)}function An(s,i,r){const o=ut(s);Vt(o,"iterate",Pi);const l=o[i](...r);return(l===-1||l===!1)&&pr(r[0])?(r[0]=ut(r[0]),o[i](...r)):l}function Ei(s,i,r=[]){_s(),lr();const o=ut(s)[i].apply(s,r);return hr(),fs(),o}const sl=ir("__proto__,__v_isRef,__isVue"),wa=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(us));function il(s){us(s)||(s=String(s));const i=ut(this);return Vt(i,"has",s),i.hasOwnProperty(s)}class Ea{constructor(i=!1,r=!1){this._isReadonly=i,this._isShallow=r}get(i,r,o){if(r==="__v_skip")return i.__v_skip;const l=this._isReadonly,c=this._isShallow;if(r==="__v_isReactive")return!l;if(r==="__v_isReadonly")return l;if(r==="__v_isShallow")return c;if(r==="__v_raw")return o===(l?c?fl:Ca:c?Ra:xa).get(i)||Object.getPrototypeOf(i)===Object.getPrototypeOf(o)?i:void 0;const u=st(i);if(!l){let p;if(u&&(p=tl[r]))return p;if(r==="hasOwnProperty")return il}const d=Reflect.get(i,r,Gt(i)?i:o);return(us(r)?wa.has(r):sl(r))||(l||Vt(i,"get",r),c)?d:Gt(d)?u&&ar(r)?d:d.value:Tt(d)?l?Ia(d):dr(d):d}}class Ta extends Ea{constructor(i=!1){super(!1,i)}set(i,r,o,l){let c=i[r];if(!this._isShallow){const p=Cs(c);if(!Se(o)&&!Cs(o)&&(c=ut(c),o=ut(o)),!st(i)&&Gt(c)&&!Gt(o))return p?!1:(c.value=o,!0)}const u=st(i)&&ar(r)?Number(r)<i.length:_t(i,r),d=Reflect.set(i,r,o,Gt(i)?i:l);return i===ut(l)&&(u?ls(o,c)&&Ze(i,"set",r,o):Ze(i,"add",r,o)),d}deleteProperty(i,r){const o=_t(i,r);i[r];const l=Reflect.deleteProperty(i,r);return l&&o&&Ze(i,"delete",r,void 0),l}has(i,r){const o=Reflect.has(i,r);return(!us(r)||!wa.has(r))&&Vt(i,"has",r),o}ownKeys(i){return Vt(i,"iterate",st(i)?"length":Rs),Reflect.ownKeys(i)}}class nl extends Ea{constructor(i=!1){super(!0,i)}set(i,r){return!0}deleteProperty(i,r){return!0}}const rl=new Ta,al=new nl,ol=new Ta(!0);const $n=s=>s,Xi=s=>Reflect.getPrototypeOf(s);function ll(s,i,r){return function(...o){const l=this.__v_raw,c=ut(l),u=Gs(c),d=s==="entries"||s===Symbol.iterator&&u,p=s==="keys"&&u,y=l[s](...o),f=r?$n:i?Qn:Jt;return!i&&Vt(c,"iterate",p?jn:Rs),{next(){const{value:E,done:b}=y.next();return b?{value:E,done:b}:{value:d?[f(E[0]),f(E[1])]:f(E),done:b}},[Symbol.iterator](){return this}}}}function tn(s){return function(...i){return s==="delete"?!1:s==="clear"?void 0:this}}function hl(s,i){const r={get(l){const c=this.__v_raw,u=ut(c),d=ut(l);s||(ls(l,d)&&Vt(u,"get",l),Vt(u,"get",d));const{has:p}=Xi(u),y=i?$n:s?Qn:Jt;if(p.call(u,l))return y(c.get(l));if(p.call(u,d))return y(c.get(d));c!==u&&c.get(l)},get size(){const l=this.__v_raw;return!s&&Vt(ut(l),"iterate",Rs),Reflect.get(l,"size",l)},has(l){const c=this.__v_raw,u=ut(c),d=ut(l);return s||(ls(l,d)&&Vt(u,"has",l),Vt(u,"has",d)),l===d?c.has(l):c.has(l)||c.has(d)},forEach(l,c){const u=this,d=u.__v_raw,p=ut(d),y=i?$n:s?Qn:Jt;return!s&&Vt(p,"iterate",Rs),d.forEach((f,E)=>l.call(c,y(f),y(E),u))}};return te(r,s?{add:tn("add"),set:tn("set"),delete:tn("delete"),clear:tn("clear")}:{add(l){!i&&!Se(l)&&!Cs(l)&&(l=ut(l));const c=ut(this);return Xi(c).has.call(c,l)||(c.add(l),Ze(c,"add",l,l)),this},set(l,c){!i&&!Se(c)&&!Cs(c)&&(c=ut(c));const u=ut(this),{has:d,get:p}=Xi(u);let y=d.call(u,l);y||(l=ut(l),y=d.call(u,l));const f=p.call(u,l);return u.set(l,c),y?ls(c,f)&&Ze(u,"set",l,c):Ze(u,"add",l,c),this},delete(l){const c=ut(this),{has:u,get:d}=Xi(c);let p=u.call(c,l);p||(l=ut(l),p=u.call(c,l)),d&&d.call(c,l);const y=c.delete(l);return p&&Ze(c,"delete",l,void 0),y},clear(){const l=ut(this),c=l.size!==0,u=l.clear();return c&&Ze(l,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(l=>{r[l]=ll(l,s,i)}),r}function fr(s,i){const r=hl(s,i);return(o,l,c)=>l==="__v_isReactive"?!s:l==="__v_isReadonly"?s:l==="__v_raw"?o:Reflect.get(_t(r,l)&&l in o?r:o,l,c)}const cl={get:fr(!1,!1)},ul={get:fr(!1,!0)},_l={get:fr(!0,!1)};const xa=new WeakMap,Ra=new WeakMap,Ca=new WeakMap,fl=new WeakMap;function dl(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ml(s){return s.__v_skip||!Object.isExtensible(s)?0:dl(Wo(s))}function dr(s){return Cs(s)?s:mr(s,!1,rl,cl,xa)}function pl(s){return mr(s,!1,ol,ul,Ra)}function Ia(s){return mr(s,!0,al,_l,Ca)}function mr(s,i,r,o,l){if(!Tt(s)||s.__v_raw&&!(i&&s.__v_isReactive))return s;const c=l.get(s);if(c)return c;const u=ml(s);if(u===0)return s;const d=new Proxy(s,u===2?o:r);return l.set(s,d),d}function Li(s){return Cs(s)?Li(s.__v_raw):!!(s&&s.__v_isReactive)}function Cs(s){return!!(s&&s.__v_isReadonly)}function Se(s){return!!(s&&s.__v_isShallow)}function pr(s){return s?!!s.__v_raw:!1}function ut(s){const i=s&&s.__v_raw;return i?ut(i):s}function gl(s){return!_t(s,"__v_skip")&&Object.isExtensible(s)&&ca(s,"__v_skip",!0),s}const Jt=s=>Tt(s)?dr(s):s,Qn=s=>Tt(s)?Ia(s):s;function Gt(s){return s?s.__v_isRef===!0:!1}function Dr(s){return vl(s,!1)}function vl(s,i){return Gt(s)?s:new Sl(s,i)}class Sl{constructor(i,r){this.dep=new ur,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?i:ut(i),this._value=r?i:Jt(i),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(i){const r=this._rawValue,o=this.__v_isShallow||Se(i)||Cs(i);i=o?i:ut(i),ls(i,r)&&(this._rawValue=i,this._value=o?i:Jt(i),this.dep.trigger())}}function nn(s){return Gt(s)?s.value:s}const yl={get:(s,i,r)=>i==="__v_raw"?s:nn(Reflect.get(s,i,r)),set:(s,i,r,o)=>{const l=s[i];return Gt(l)&&!Gt(r)?(l.value=r,!0):Reflect.set(s,i,r,o)}};function La(s){return Li(s)?s:new Proxy(s,yl)}class bl{constructor(i,r,o){this.fn=i,this.setter=r,this._value=void 0,this.dep=new ur(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Mi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&pt!==this)return pa(this,!0),!0}get value(){const i=this.dep.track();return Sa(this),i&&(i.version=this.dep.version),this._value}set value(i){this.setter&&this.setter(i)}}function wl(s,i,r=!1){let o,l;return it(s)?o=s:(o=s.get,l=s.set),new bl(o,l,r)}const en={},ln=new WeakMap;let xs;function El(s,i=!1,r=xs){if(r){let o=ln.get(r);o||ln.set(r,o=[]),o.push(s)}}function Tl(s,i,r=gt){const{immediate:o,deep:l,once:c,scheduler:u,augmentJob:d,call:p}=r,y=H=>l?H:Se(H)||l===!1||l===0?os(H,1):os(H);let f,E,b,S,I=!1,O=!1;if(Gt(s)?(E=()=>s.value,I=Se(s)):Li(s)?(E=()=>y(s),I=!0):st(s)?(O=!0,I=s.some(H=>Li(H)||Se(H)),E=()=>s.map(H=>{if(Gt(H))return H.value;if(Li(H))return y(H);if(it(H))return p?p(H,2):H()})):it(s)?i?E=p?()=>p(s,2):s:E=()=>{if(b){_s();try{b()}finally{fs()}}const H=xs;xs=f;try{return p?p(s,3,[S]):s(S)}finally{xs=H}}:E=Pe,i&&l){const H=E,ct=l===!0?1/0:l;E=()=>os(H(),ct)}const V=Jo(),C=()=>{f.stop(),V&&V.active&&rr(V.effects,f)};if(c&&i){const H=i;i=(...ct)=>{H(...ct),C()}}let P=O?new Array(s.length).fill(en):en;const tt=H=>{if(!(!(f.flags&1)||!f.dirty&&!H))if(i){const ct=f.run();if(l||I||(O?ct.some((Bt,bt)=>ls(Bt,P[bt])):ls(ct,P))){b&&b();const Bt=xs;xs=f;try{const bt=[ct,P===en?void 0:O&&P[0]===en?[]:P,S];p?p(i,3,bt):i(...bt),P=ct}finally{xs=Bt}}}else f.run()};return d&&d(tt),f=new da(E),f.scheduler=u?()=>u(tt,!1):tt,S=H=>El(H,!1,f),b=f.onStop=()=>{const H=ln.get(f);if(H){if(p)p(H,4);else for(const ct of H)ct();ln.delete(f)}},i?o?tt(!0):P=f.run():u?u(tt.bind(null,!0),!0):f.run(),C.pause=f.pause.bind(f),C.resume=f.resume.bind(f),C.stop=C,C}function os(s,i=1/0,r){if(i<=0||!Tt(s)||s.__v_skip||(r=r||new Set,r.has(s)))return s;if(r.add(s),i--,Gt(s))os(s.value,i,r);else if(st(s))for(let o=0;o<s.length;o++)os(s[o],i,r);else if(ra(s)||Gs(s))s.forEach(o=>{os(o,i,r)});else if(la(s)){for(const o in s)os(s[o],i,r);for(const o of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,o)&&os(s[o],i,r)}return s}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Bi(s,i,r,o){try{return o?s(...o):s()}catch(l){Sn(l,i,r)}}function Fe(s,i,r,o){if(it(s)){const l=Bi(s,i,r,o);return l&&aa(l)&&l.catch(c=>{Sn(c,i,r)}),l}if(st(s)){const l=[];for(let c=0;c<s.length;c++)l.push(Fe(s[c],i,r,o));return l}}function Sn(s,i,r,o=!0){const l=i?i.vnode:null,{errorHandler:c,throwUnhandledErrorInProduction:u}=i&&i.appContext.config||gt;if(i){let d=i.parent;const p=i.proxy,y=`https://vuejs.org/error-reference/#runtime-${r}`;for(;d;){const f=d.ec;if(f){for(let E=0;E<f.length;E++)if(f[E](s,p,y)===!1)return}d=d.parent}if(c){_s(),Bi(c,null,10,[s,p,y]),fs();return}}xl(s,r,l,o,u)}function xl(s,i,r,o=!0,l=!1){if(l)throw s;console.error(s)}const Zt=[];let De=-1;const zs=[];let ns=null,Ks=0;const Oa=Promise.resolve();let hn=null;function Rl(s){const i=hn||Oa;return s?i.then(this?s.bind(this):s):i}function Cl(s){let i=De+1,r=Zt.length;for(;i<r;){const o=i+r>>>1,l=Zt[o],c=Fi(l);c<s||c===s&&l.flags&2?i=o+1:r=o}return i}function gr(s){if(!(s.flags&1)){const i=Fi(s),r=Zt[Zt.length-1];!r||!(s.flags&2)&&i>=Fi(r)?Zt.push(s):Zt.splice(Cl(i),0,s),s.flags|=1,Da()}}function Da(){hn||(hn=Oa.then(Ma))}function Il(s){st(s)?zs.push(...s):ns&&s.id===-1?ns.splice(Ks+1,0,s):s.flags&1||(zs.push(s),s.flags|=1),Da()}function Nr(s,i,r=De+1){for(;r<Zt.length;r++){const o=Zt[r];if(o&&o.flags&2){if(s&&o.id!==s.uid)continue;Zt.splice(r,1),r--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Na(s){if(zs.length){const i=[...new Set(zs)].sort((r,o)=>Fi(r)-Fi(o));if(zs.length=0,ns){ns.push(...i);return}for(ns=i,Ks=0;Ks<ns.length;Ks++){const r=ns[Ks];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}ns=null,Ks=0}}const Fi=s=>s.id==null?s.flags&2?-1:1/0:s.id;function Ma(s){try{for(De=0;De<Zt.length;De++){const i=Zt[De];i&&!(i.flags&8)&&(i.flags&4&&(i.flags&=-2),Bi(i,i.i,i.i?15:14),i.flags&4||(i.flags&=-2))}}finally{for(;De<Zt.length;De++){const i=Zt[De];i&&(i.flags&=-2)}De=-1,Zt.length=0,Na(),hn=null,(Zt.length||zs.length)&&Ma()}}let Me=null,Pa=null;function cn(s){const i=Me;return Me=s,Pa=s&&s.type.__scopeId||null,i}function Ll(s,i=Me,r){if(!i||s._n)return s;const o=(...l)=>{o._d&&Ur(-1);const c=cn(i);let u;try{u=s(...l)}finally{cn(c),o._d&&Ur(1)}return u};return o._n=!0,o._c=!0,o._d=!0,o}function Es(s,i,r,o){const l=s.dirs,c=i&&i.dirs;for(let u=0;u<l.length;u++){const d=l[u];c&&(d.oldValue=c[u].value);let p=d.dir[o];p&&(_s(),Fe(p,r,8,[s.el,d,s,i]),fs())}}const Ol=Symbol("_vte"),Dl=s=>s.__isTeleport;function vr(s,i){s.shapeFlag&6&&s.component?(s.transition=i,vr(s.component.subTree,i)):s.shapeFlag&128?(s.ssContent.transition=i.clone(s.ssContent),s.ssFallback.transition=i.clone(s.ssFallback)):s.transition=i}function Fa(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}function un(s,i,r,o,l=!1){if(st(s)){s.forEach((I,O)=>un(I,i&&(st(i)?i[O]:i),r,o,l));return}if(Oi(o)&&!l){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&un(s,i,r,o.component.subTree);return}const c=o.shapeFlag&4?br(o.component):o.el,u=l?null:c,{i:d,r:p}=s,y=i&&i.r,f=d.refs===gt?d.refs={}:d.refs,E=d.setupState,b=ut(E),S=E===gt?()=>!1:I=>_t(b,I);if(y!=null&&y!==p&&(At(y)?(f[y]=null,S(y)&&(E[y]=null)):Gt(y)&&(y.value=null)),it(p))Bi(p,d,12,[u,f]);else{const I=At(p),O=Gt(p);if(I||O){const V=()=>{if(s.f){const C=I?S(p)?E[p]:f[p]:p.value;l?st(C)&&rr(C,c):st(C)?C.includes(c)||C.push(c):I?(f[p]=[c],S(p)&&(E[p]=f[p])):(p.value=[c],s.k&&(f[s.k]=p.value))}else I?(f[p]=u,S(p)&&(E[p]=u)):O&&(p.value=u,s.k&&(f[s.k]=u))};u?(V.id=-1,ae(V,r)):V()}}}gn().requestIdleCallback;gn().cancelIdleCallback;const Oi=s=>!!s.type.__asyncLoader,ka=s=>s.type.__isKeepAlive;function Nl(s,i){Aa(s,"a",i)}function Ml(s,i){Aa(s,"da",i)}function Aa(s,i,r=Xt){const o=s.__wdc||(s.__wdc=()=>{let l=r;for(;l;){if(l.isDeactivated)return;l=l.parent}return s()});if(yn(i,o,r),r){let l=r.parent;for(;l&&l.parent;)ka(l.parent.vnode)&&Pl(o,i,r,l),l=l.parent}}function Pl(s,i,r,o){const l=yn(i,s,o,!0);qa(()=>{rr(o[i],l)},r)}function yn(s,i,r=Xt,o=!1){if(r){const l=r[s]||(r[s]=[]),c=i.__weh||(i.__weh=(...u)=>{_s();const d=Wi(r),p=Fe(i,r,s,u);return d(),fs(),p});return o?l.unshift(c):l.push(c),c}}const Xe=s=>(i,r=Xt)=>{(!qi||s==="sp")&&yn(s,(...o)=>i(...o),r)},Fl=Xe("bm"),kl=Xe("m"),Al=Xe("bu"),ql=Xe("u"),Bl=Xe("bum"),qa=Xe("um"),Wl=Xe("sp"),Ul=Xe("rtg"),Hl=Xe("rtc");function Kl(s,i=Xt){yn("ec",s,i)}const Vl=Symbol.for("v-ndc"),Jn=s=>s?oo(s)?br(s):Jn(s.parent):null,Di=te(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>Jn(s.parent),$root:s=>Jn(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>Wa(s),$forceUpdate:s=>s.f||(s.f=()=>{gr(s.update)}),$nextTick:s=>s.n||(s.n=Rl.bind(s.proxy)),$watch:s=>_h.bind(s)}),qn=(s,i)=>s!==gt&&!s.__isScriptSetup&&_t(s,i),Gl={get({_:s},i){if(i==="__v_skip")return!0;const{ctx:r,setupState:o,data:l,props:c,accessCache:u,type:d,appContext:p}=s;let y;if(i[0]!=="$"){const S=u[i];if(S!==void 0)switch(S){case 1:return o[i];case 2:return l[i];case 4:return r[i];case 3:return c[i]}else{if(qn(o,i))return u[i]=1,o[i];if(l!==gt&&_t(l,i))return u[i]=2,l[i];if((y=s.propsOptions[0])&&_t(y,i))return u[i]=3,c[i];if(r!==gt&&_t(r,i))return u[i]=4,r[i];Zn&&(u[i]=0)}}const f=Di[i];let E,b;if(f)return i==="$attrs"&&Vt(s.attrs,"get",""),f(s);if((E=d.__cssModules)&&(E=E[i]))return E;if(r!==gt&&_t(r,i))return u[i]=4,r[i];if(b=p.config.globalProperties,_t(b,i))return b[i]},set({_:s},i,r){const{data:o,setupState:l,ctx:c}=s;return qn(l,i)?(l[i]=r,!0):o!==gt&&_t(o,i)?(o[i]=r,!0):_t(s.props,i)||i[0]==="$"&&i.slice(1)in s?!1:(c[i]=r,!0)},has({_:{data:s,setupState:i,accessCache:r,ctx:o,appContext:l,propsOptions:c}},u){let d;return!!r[u]||s!==gt&&_t(s,u)||qn(i,u)||(d=c[0])&&_t(d,u)||_t(o,u)||_t(Di,u)||_t(l.config.globalProperties,u)},defineProperty(s,i,r){return r.get!=null?s._.accessCache[i]=0:_t(r,"value")&&this.set(s,i,r.value,null),Reflect.defineProperty(s,i,r)}};function Mr(s){return st(s)?s.reduce((i,r)=>(i[r]=null,i),{}):s}let Zn=!0;function zl(s){const i=Wa(s),r=s.proxy,o=s.ctx;Zn=!1,i.beforeCreate&&Pr(i.beforeCreate,s,"bc");const{data:l,computed:c,methods:u,watch:d,provide:p,inject:y,created:f,beforeMount:E,mounted:b,beforeUpdate:S,updated:I,activated:O,deactivated:V,beforeDestroy:C,beforeUnmount:P,destroyed:tt,unmounted:H,render:ct,renderTracked:Bt,renderTriggered:bt,errorCaptured:ee,serverPrefetch:ke,expose:ne,inheritAttrs:se,components:zt,directives:ye,filters:be}=i;if(y&&Yl(y,o,null),u)for(const j in u){const ot=u[j];it(ot)&&(o[j]=ot.bind(r))}if(l){const j=l.call(r,r);Tt(j)&&(s.data=dr(j))}if(Zn=!0,c)for(const j in c){const ot=c[j],Ot=it(ot)?ot.bind(r,r):it(ot.get)?ot.get.bind(r,r):Pe,Q=!it(ot)&&it(ot.set)?ot.set.bind(r):Pe,Dt=Fh({get:Ot,set:Q});Object.defineProperty(o,j,{enumerable:!0,configurable:!0,get:()=>Dt.value,set:L=>Dt.value=L})}if(d)for(const j in d)Ba(d[j],o,r,j);if(p){const j=it(p)?p.call(r):p;Reflect.ownKeys(j).forEach(ot=>{Xl(ot,j[ot])})}f&&Pr(f,s,"c");function xt(j,ot){st(ot)?ot.forEach(Ot=>j(Ot.bind(r))):ot&&j(ot.bind(r))}if(xt(Fl,E),xt(kl,b),xt(Al,S),xt(ql,I),xt(Nl,O),xt(Ml,V),xt(Kl,ee),xt(Hl,Bt),xt(Ul,bt),xt(Bl,P),xt(qa,H),xt(Wl,ke),st(ne))if(ne.length){const j=s.exposed||(s.exposed={});ne.forEach(ot=>{Object.defineProperty(j,ot,{get:()=>r[ot],set:Ot=>r[ot]=Ot})})}else s.exposed||(s.exposed={});ct&&s.render===Pe&&(s.render=ct),se!=null&&(s.inheritAttrs=se),zt&&(s.components=zt),ye&&(s.directives=ye),ke&&Fa(s)}function Yl(s,i,r=Pe){st(s)&&(s=Xn(s));for(const o in s){const l=s[o];let c;Tt(l)?"default"in l?c=rn(l.from||o,l.default,!0):c=rn(l.from||o):c=rn(l),Gt(c)?Object.defineProperty(i,o,{enumerable:!0,configurable:!0,get:()=>c.value,set:u=>c.value=u}):i[o]=c}}function Pr(s,i,r){Fe(st(s)?s.map(o=>o.bind(i.proxy)):s.bind(i.proxy),i,r)}function Ba(s,i,r,o){let l=o.includes(".")?to(r,o):()=>r[o];if(At(s)){const c=i[s];it(c)&&Wn(l,c)}else if(it(s))Wn(l,s.bind(r));else if(Tt(s))if(st(s))s.forEach(c=>Ba(c,i,r,o));else{const c=it(s.handler)?s.handler.bind(r):i[s.handler];it(c)&&Wn(l,c,s)}}function Wa(s){const i=s.type,{mixins:r,extends:o}=i,{mixins:l,optionsCache:c,config:{optionMergeStrategies:u}}=s.appContext,d=c.get(i);let p;return d?p=d:!l.length&&!r&&!o?p=i:(p={},l.length&&l.forEach(y=>_n(p,y,u,!0)),_n(p,i,u)),Tt(i)&&c.set(i,p),p}function _n(s,i,r,o=!1){const{mixins:l,extends:c}=i;c&&_n(s,c,r,!0),l&&l.forEach(u=>_n(s,u,r,!0));for(const u in i)if(!(o&&u==="expose")){const d=jl[u]||r&&r[u];s[u]=d?d(s[u],i[u]):i[u]}return s}const jl={data:Fr,props:kr,emits:kr,methods:xi,computed:xi,beforeCreate:Qt,created:Qt,beforeMount:Qt,mounted:Qt,beforeUpdate:Qt,updated:Qt,beforeDestroy:Qt,beforeUnmount:Qt,destroyed:Qt,unmounted:Qt,activated:Qt,deactivated:Qt,errorCaptured:Qt,serverPrefetch:Qt,components:xi,directives:xi,watch:Ql,provide:Fr,inject:$l};function Fr(s,i){return i?s?function(){return te(it(s)?s.call(this,this):s,it(i)?i.call(this,this):i)}:i:s}function $l(s,i){return xi(Xn(s),Xn(i))}function Xn(s){if(st(s)){const i={};for(let r=0;r<s.length;r++)i[s[r]]=s[r];return i}return s}function Qt(s,i){return s?[...new Set([].concat(s,i))]:i}function xi(s,i){return s?te(Object.create(null),s,i):i}function kr(s,i){return s?st(s)&&st(i)?[...new Set([...s,...i])]:te(Object.create(null),Mr(s),Mr(i??{})):i}function Ql(s,i){if(!s)return i;if(!i)return s;const r=te(Object.create(null),s);for(const o in i)r[o]=Qt(s[o],i[o]);return r}function Ua(){return{app:null,config:{isNativeTag:qo,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Jl=0;function Zl(s,i){return function(o,l=null){it(o)||(o=te({},o)),l!=null&&!Tt(l)&&(l=null);const c=Ua(),u=new WeakSet,d=[];let p=!1;const y=c.app={_uid:Jl++,_component:o,_props:l,_container:null,_context:c,_instance:null,version:kh,get config(){return c.config},set config(f){},use(f,...E){return u.has(f)||(f&&it(f.install)?(u.add(f),f.install(y,...E)):it(f)&&(u.add(f),f(y,...E))),y},mixin(f){return c.mixins.includes(f)||c.mixins.push(f),y},component(f,E){return E?(c.components[f]=E,y):c.components[f]},directive(f,E){return E?(c.directives[f]=E,y):c.directives[f]},mount(f,E,b){if(!p){const S=y._ceVNode||hs(o,l);return S.appContext=c,b===!0?b="svg":b===!1&&(b=void 0),s(S,f,b),p=!0,y._container=f,f.__vue_app__=y,br(S.component)}},onUnmount(f){d.push(f)},unmount(){p&&(Fe(d,y._instance,16),s(null,y._container),delete y._container.__vue_app__)},provide(f,E){return c.provides[f]=E,y},runWithContext(f){const E=Ys;Ys=y;try{return f()}finally{Ys=E}}};return y}}let Ys=null;function Xl(s,i){if(Xt){let r=Xt.provides;const o=Xt.parent&&Xt.parent.provides;o===r&&(r=Xt.provides=Object.create(o)),r[s]=i}}function rn(s,i,r=!1){const o=Xt||Me;if(o||Ys){const l=Ys?Ys._context.provides:o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(l&&s in l)return l[s];if(arguments.length>1)return r&&it(i)?i.call(o&&o.proxy):i}}const Ha={},Ka=()=>Object.create(Ha),Va=s=>Object.getPrototypeOf(s)===Ha;function th(s,i,r,o=!1){const l={},c=Ka();s.propsDefaults=Object.create(null),Ga(s,i,l,c);for(const u in s.propsOptions[0])u in l||(l[u]=void 0);r?s.props=o?l:pl(l):s.type.props?s.props=l:s.props=c,s.attrs=c}function eh(s,i,r,o){const{props:l,attrs:c,vnode:{patchFlag:u}}=s,d=ut(l),[p]=s.propsOptions;let y=!1;if((o||u>0)&&!(u&16)){if(u&8){const f=s.vnode.dynamicProps;for(let E=0;E<f.length;E++){let b=f[E];if(bn(s.emitsOptions,b))continue;const S=i[b];if(p)if(_t(c,b))S!==c[b]&&(c[b]=S,y=!0);else{const I=cs(b);l[I]=tr(p,d,I,S,s,!1)}else S!==c[b]&&(c[b]=S,y=!0)}}}else{Ga(s,i,l,c)&&(y=!0);let f;for(const E in d)(!i||!_t(i,E)&&((f=Is(E))===E||!_t(i,f)))&&(p?r&&(r[E]!==void 0||r[f]!==void 0)&&(l[E]=tr(p,d,E,void 0,s,!0)):delete l[E]);if(c!==d)for(const E in c)(!i||!_t(i,E))&&(delete c[E],y=!0)}y&&Ze(s.attrs,"set","")}function Ga(s,i,r,o){const[l,c]=s.propsOptions;let u=!1,d;if(i)for(let p in i){if(Ri(p))continue;const y=i[p];let f;l&&_t(l,f=cs(p))?!c||!c.includes(f)?r[f]=y:(d||(d={}))[f]=y:bn(s.emitsOptions,p)||(!(p in o)||y!==o[p])&&(o[p]=y,u=!0)}if(c){const p=ut(r),y=d||gt;for(let f=0;f<c.length;f++){const E=c[f];r[E]=tr(l,p,E,y[E],s,!_t(y,E))}}return u}function tr(s,i,r,o,l,c){const u=s[r];if(u!=null){const d=_t(u,"default");if(d&&o===void 0){const p=u.default;if(u.type!==Function&&!u.skipFactory&&it(p)){const{propsDefaults:y}=l;if(r in y)o=y[r];else{const f=Wi(l);o=y[r]=p.call(null,i),f()}}else o=p;l.ce&&l.ce._setProp(r,o)}u[0]&&(c&&!d?o=!1:u[1]&&(o===""||o===Is(r))&&(o=!0))}return o}const sh=new WeakMap;function za(s,i,r=!1){const o=r?sh:i.propsCache,l=o.get(s);if(l)return l;const c=s.props,u={},d=[];let p=!1;if(!it(s)){const f=E=>{p=!0;const[b,S]=za(E,i,!0);te(u,b),S&&d.push(...S)};!r&&i.mixins.length&&i.mixins.forEach(f),s.extends&&f(s.extends),s.mixins&&s.mixins.forEach(f)}if(!c&&!p)return Tt(s)&&o.set(s,Vs),Vs;if(st(c))for(let f=0;f<c.length;f++){const E=cs(c[f]);Ar(E)&&(u[E]=gt)}else if(c)for(const f in c){const E=cs(f);if(Ar(E)){const b=c[f],S=u[E]=st(b)||it(b)?{type:b}:te({},b),I=S.type;let O=!1,V=!0;if(st(I))for(let C=0;C<I.length;++C){const P=I[C],tt=it(P)&&P.name;if(tt==="Boolean"){O=!0;break}else tt==="String"&&(V=!1)}else O=it(I)&&I.name==="Boolean";S[0]=O,S[1]=V,(O||_t(S,"default"))&&d.push(E)}}const y=[u,d];return Tt(s)&&o.set(s,y),y}function Ar(s){return s[0]!=="$"&&!Ri(s)}const Ya=s=>s[0]==="_"||s==="$stable",Sr=s=>st(s)?s.map(Ne):[Ne(s)],ih=(s,i,r)=>{if(i._n)return i;const o=Ll((...l)=>Sr(i(...l)),r);return o._c=!1,o},ja=(s,i,r)=>{const o=s._ctx;for(const l in s){if(Ya(l))continue;const c=s[l];if(it(c))i[l]=ih(l,c,o);else if(c!=null){const u=Sr(c);i[l]=()=>u}}},$a=(s,i)=>{const r=Sr(i);s.slots.default=()=>r},Qa=(s,i,r)=>{for(const o in i)(r||o!=="_")&&(s[o]=i[o])},nh=(s,i,r)=>{const o=s.slots=Ka();if(s.vnode.shapeFlag&32){const l=i._;l?(Qa(o,i,r),r&&ca(o,"_",l,!0)):ja(i,o)}else i&&$a(s,i)},rh=(s,i,r)=>{const{vnode:o,slots:l}=s;let c=!0,u=gt;if(o.shapeFlag&32){const d=i._;d?r&&d===1?c=!1:Qa(l,i,r):(c=!i.$stable,ja(i,l)),u=i}else i&&($a(s,i),u={default:1});if(c)for(const d in l)!Ya(d)&&u[d]==null&&delete l[d]},ae=Sh;function ah(s){return oh(s)}function oh(s,i){const r=gn();r.__VUE__=!0;const{insert:o,remove:l,patchProp:c,createElement:u,createText:d,createComment:p,setText:y,setElementText:f,parentNode:E,nextSibling:b,setScopeId:S=Pe,insertStaticContent:I}=s,O=(m,g,w,D=null,R=null,x=null,A=void 0,q=null,k=!!g.dynamicChildren)=>{if(m===g)return;m&&!Ti(m,g)&&(D=we(m),L(m,R,x,!0),m=null),g.patchFlag===-2&&(k=!1,g.dynamicChildren=null);const{type:N,ref:z,shapeFlag:U}=g;switch(N){case wn:V(m,g,w,D);break;case ki:C(m,g,w,D);break;case Un:m==null&&P(g,w,D,A);break;case Qe:zt(m,g,w,D,R,x,A,q,k);break;default:U&1?ct(m,g,w,D,R,x,A,q,k):U&6?ye(m,g,w,D,R,x,A,q,k):(U&64||U&128)&&N.process(m,g,w,D,R,x,A,q,k,he)}z!=null&&R&&un(z,m&&m.ref,x,g||m,!g)},V=(m,g,w,D)=>{if(m==null)o(g.el=d(g.children),w,D);else{const R=g.el=m.el;g.children!==m.children&&y(R,g.children)}},C=(m,g,w,D)=>{m==null?o(g.el=p(g.children||""),w,D):g.el=m.el},P=(m,g,w,D)=>{[m.el,m.anchor]=I(m.children,g,w,D,m.el,m.anchor)},tt=({el:m,anchor:g},w,D)=>{let R;for(;m&&m!==g;)R=b(m),o(m,w,D),m=R;o(g,w,D)},H=({el:m,anchor:g})=>{let w;for(;m&&m!==g;)w=b(m),l(m),m=w;l(g)},ct=(m,g,w,D,R,x,A,q,k)=>{g.type==="svg"?A="svg":g.type==="math"&&(A="mathml"),m==null?Bt(g,w,D,R,x,A,q,k):ke(m,g,R,x,A,q,k)},Bt=(m,g,w,D,R,x,A,q)=>{let k,N;const{props:z,shapeFlag:U,transition:G,dirs:B}=m;if(k=m.el=u(m.type,x,z&&z.is,z),U&8?f(k,m.children):U&16&&ee(m.children,k,null,D,R,Bn(m,x),A,q),B&&Es(m,null,D,"created"),bt(k,m,m.scopeId,A,D),z){for(const ft in z)ft!=="value"&&!Ri(ft)&&c(k,ft,null,z[ft],x,D);"value"in z&&c(k,"value",null,z.value,x),(N=z.onVnodeBeforeMount)&&Oe(N,D,m)}B&&Es(m,null,D,"beforeMount");const rt=lh(R,G);rt&&G.beforeEnter(k),o(k,g,w),((N=z&&z.onVnodeMounted)||rt||B)&&ae(()=>{N&&Oe(N,D,m),rt&&G.enter(k),B&&Es(m,null,D,"mounted")},R)},bt=(m,g,w,D,R)=>{if(w&&S(m,w),D)for(let x=0;x<D.length;x++)S(m,D[x]);if(R){let x=R.subTree;if(g===x||so(x.type)&&(x.ssContent===g||x.ssFallback===g)){const A=R.vnode;bt(m,A,A.scopeId,A.slotScopeIds,R.parent)}}},ee=(m,g,w,D,R,x,A,q,k=0)=>{for(let N=k;N<m.length;N++){const z=m[N]=q?as(m[N]):Ne(m[N]);O(null,z,g,w,D,R,x,A,q)}},ke=(m,g,w,D,R,x,A)=>{const q=g.el=m.el;let{patchFlag:k,dynamicChildren:N,dirs:z}=g;k|=m.patchFlag&16;const U=m.props||gt,G=g.props||gt;let B;if(w&&Ts(w,!1),(B=G.onVnodeBeforeUpdate)&&Oe(B,w,g,m),z&&Es(g,m,w,"beforeUpdate"),w&&Ts(w,!0),(U.innerHTML&&G.innerHTML==null||U.textContent&&G.textContent==null)&&f(q,""),N?ne(m.dynamicChildren,N,q,w,D,Bn(g,R),x):A||ot(m,g,q,null,w,D,Bn(g,R),x,!1),k>0){if(k&16)se(q,U,G,w,R);else if(k&2&&U.class!==G.class&&c(q,"class",null,G.class,R),k&4&&c(q,"style",U.style,G.style,R),k&8){const rt=g.dynamicProps;for(let ft=0;ft<rt.length;ft++){const lt=rt[ft],vt=U[lt],Wt=G[lt];(Wt!==vt||lt==="value")&&c(q,lt,vt,Wt,R,w)}}k&1&&m.children!==g.children&&f(q,g.children)}else!A&&N==null&&se(q,U,G,w,R);((B=G.onVnodeUpdated)||z)&&ae(()=>{B&&Oe(B,w,g,m),z&&Es(g,m,w,"updated")},D)},ne=(m,g,w,D,R,x,A)=>{for(let q=0;q<g.length;q++){const k=m[q],N=g[q],z=k.el&&(k.type===Qe||!Ti(k,N)||k.shapeFlag&70)?E(k.el):w;O(k,N,z,null,D,R,x,A,!0)}},se=(m,g,w,D,R)=>{if(g!==w){if(g!==gt)for(const x in g)!Ri(x)&&!(x in w)&&c(m,x,g[x],null,R,D);for(const x in w){if(Ri(x))continue;const A=w[x],q=g[x];A!==q&&x!=="value"&&c(m,x,q,A,R,D)}"value"in w&&c(m,"value",g.value,w.value,R)}},zt=(m,g,w,D,R,x,A,q,k)=>{const N=g.el=m?m.el:d(""),z=g.anchor=m?m.anchor:d("");let{patchFlag:U,dynamicChildren:G,slotScopeIds:B}=g;B&&(q=q?q.concat(B):B),m==null?(o(N,w,D),o(z,w,D),ee(g.children||[],w,z,R,x,A,q,k)):U>0&&U&64&&G&&m.dynamicChildren?(ne(m.dynamicChildren,G,w,R,x,A,q),(g.key!=null||R&&g===R.subTree)&&Ja(m,g,!0)):ot(m,g,w,z,R,x,A,q,k)},ye=(m,g,w,D,R,x,A,q,k)=>{g.slotScopeIds=q,m==null?g.shapeFlag&512?R.ctx.activate(g,w,D,A,k):be(g,w,D,R,x,A,k):at(m,g,k)},be=(m,g,w,D,R,x,A)=>{const q=m.component=Lh(m,D,R);if(ka(m)&&(q.ctx.renderer=he),Oh(q,!1,A),q.asyncDep){if(R&&R.registerDep(q,xt,A),!m.el){const k=q.subTree=hs(ki);C(null,k,g,w)}}else xt(q,m,g,w,R,x,A)},at=(m,g,w)=>{const D=g.component=m.component;if(gh(m,g,w))if(D.asyncDep&&!D.asyncResolved){j(D,g,w);return}else D.next=g,D.update();else g.el=m.el,D.vnode=g},xt=(m,g,w,D,R,x,A)=>{const q=()=>{if(m.isMounted){let{next:U,bu:G,u:B,parent:rt,vnode:ft}=m;{const kt=Za(m);if(kt){U&&(U.el=ft.el,j(m,U,A)),kt.asyncDep.then(()=>{m.isUnmounted||q()});return}}let lt=U,vt;Ts(m,!1),U?(U.el=ft.el,j(m,U,A)):U=ft,G&&Mn(G),(vt=U.props&&U.props.onVnodeBeforeUpdate)&&Oe(vt,rt,U,ft),Ts(m,!0);const Wt=Br(m),Ft=m.subTree;m.subTree=Wt,O(Ft,Wt,E(Ft.el),we(Ft),m,R,x),U.el=Wt.el,lt===null&&vh(m,Wt.el),B&&ae(B,R),(vt=U.props&&U.props.onVnodeUpdated)&&ae(()=>Oe(vt,rt,U,ft),R)}else{let U;const{el:G,props:B}=g,{bm:rt,m:ft,parent:lt,root:vt,type:Wt}=m,Ft=Oi(g);Ts(m,!1),rt&&Mn(rt),!Ft&&(U=B&&B.onVnodeBeforeMount)&&Oe(U,lt,g),Ts(m,!0);{vt.ce&&vt.ce._injectChildStyle(Wt);const kt=m.subTree=Br(m);O(null,kt,w,D,m,R,x),g.el=kt.el}if(ft&&ae(ft,R),!Ft&&(U=B&&B.onVnodeMounted)){const kt=g;ae(()=>Oe(U,lt,kt),R)}(g.shapeFlag&256||lt&&Oi(lt.vnode)&&lt.vnode.shapeFlag&256)&&m.a&&ae(m.a,R),m.isMounted=!0,g=w=D=null}};m.scope.on();const k=m.effect=new da(q);m.scope.off();const N=m.update=k.run.bind(k),z=m.job=k.runIfDirty.bind(k);z.i=m,z.id=m.uid,k.scheduler=()=>gr(z),Ts(m,!0),N()},j=(m,g,w)=>{g.component=m;const D=m.vnode.props;m.vnode=g,m.next=null,eh(m,g.props,D,w),rh(m,g.children,w),_s(),Nr(m),fs()},ot=(m,g,w,D,R,x,A,q,k=!1)=>{const N=m&&m.children,z=m?m.shapeFlag:0,U=g.children,{patchFlag:G,shapeFlag:B}=g;if(G>0){if(G&128){Q(N,U,w,D,R,x,A,q,k);return}else if(G&256){Ot(N,U,w,D,R,x,A,q,k);return}}B&8?(z&16&&ie(N,R,x),U!==N&&f(w,U)):z&16?B&16?Q(N,U,w,D,R,x,A,q,k):ie(N,R,x,!0):(z&8&&f(w,""),B&16&&ee(U,w,D,R,x,A,q,k))},Ot=(m,g,w,D,R,x,A,q,k)=>{m=m||Vs,g=g||Vs;const N=m.length,z=g.length,U=Math.min(N,z);let G;for(G=0;G<U;G++){const B=g[G]=k?as(g[G]):Ne(g[G]);O(m[G],B,w,null,R,x,A,q,k)}N>z?ie(m,R,x,!0,!1,U):ee(g,w,D,R,x,A,q,k,U)},Q=(m,g,w,D,R,x,A,q,k)=>{let N=0;const z=g.length;let U=m.length-1,G=z-1;for(;N<=U&&N<=G;){const B=m[N],rt=g[N]=k?as(g[N]):Ne(g[N]);if(Ti(B,rt))O(B,rt,w,null,R,x,A,q,k);else break;N++}for(;N<=U&&N<=G;){const B=m[U],rt=g[G]=k?as(g[G]):Ne(g[G]);if(Ti(B,rt))O(B,rt,w,null,R,x,A,q,k);else break;U--,G--}if(N>U){if(N<=G){const B=G+1,rt=B<z?g[B].el:D;for(;N<=G;)O(null,g[N]=k?as(g[N]):Ne(g[N]),w,rt,R,x,A,q,k),N++}}else if(N>G)for(;N<=U;)L(m[N],R,x,!0),N++;else{const B=N,rt=N,ft=new Map;for(N=rt;N<=G;N++){const Rt=g[N]=k?as(g[N]):Ne(g[N]);Rt.key!=null&&ft.set(Rt.key,N)}let lt,vt=0;const Wt=G-rt+1;let Ft=!1,kt=0;const wt=new Array(Wt);for(N=0;N<Wt;N++)wt[N]=0;for(N=B;N<=U;N++){const Rt=m[N];if(vt>=Wt){L(Rt,R,x,!0);continue}let Yt;if(Rt.key!=null)Yt=ft.get(Rt.key);else for(lt=rt;lt<=G;lt++)if(wt[lt-rt]===0&&Ti(Rt,g[lt])){Yt=lt;break}Yt===void 0?L(Rt,R,x,!0):(wt[Yt-rt]=N+1,Yt>=kt?kt=Yt:Ft=!0,O(Rt,g[Yt],w,null,R,x,A,q,k),vt++)}const gs=Ft?hh(wt):Vs;for(lt=gs.length-1,N=Wt-1;N>=0;N--){const Rt=rt+N,Yt=g[Rt],me=Rt+1<z?g[Rt+1].el:D;wt[N]===0?O(null,Yt,w,me,R,x,A,q,k):Ft&&(lt<0||N!==gs[lt]?Dt(Yt,w,me,2):lt--)}}},Dt=(m,g,w,D,R=null)=>{const{el:x,type:A,transition:q,children:k,shapeFlag:N}=m;if(N&6){Dt(m.component.subTree,g,w,D);return}if(N&128){m.suspense.move(g,w,D);return}if(N&64){A.move(m,g,w,he);return}if(A===Qe){o(x,g,w);for(let U=0;U<k.length;U++)Dt(k[U],g,w,D);o(m.anchor,g,w);return}if(A===Un){tt(m,g,w);return}if(D!==2&&N&1&&q)if(D===0)q.beforeEnter(x),o(x,g,w),ae(()=>q.enter(x),R);else{const{leave:U,delayLeave:G,afterLeave:B}=q,rt=()=>o(x,g,w),ft=()=>{U(x,()=>{rt(),B&&B()})};G?G(x,rt,ft):ft()}else o(x,g,w)},L=(m,g,w,D=!1,R=!1)=>{const{type:x,props:A,ref:q,children:k,dynamicChildren:N,shapeFlag:z,patchFlag:U,dirs:G,cacheIndex:B}=m;if(U===-2&&(R=!1),q!=null&&un(q,null,w,m,!0),B!=null&&(g.renderCache[B]=void 0),z&256){g.ctx.deactivate(m);return}const rt=z&1&&G,ft=!Oi(m);let lt;if(ft&&(lt=A&&A.onVnodeBeforeUnmount)&&Oe(lt,g,m),z&6)Qs(m.component,w,D);else{if(z&128){m.suspense.unmount(w,D);return}rt&&Es(m,null,g,"beforeUnmount"),z&64?m.type.remove(m,g,w,he,D):N&&!N.hasOnce&&(x!==Qe||U>0&&U&64)?ie(N,g,w,!1,!0):(x===Qe&&U&384||!R&&z&16)&&ie(k,g,w),D&&Ut(m)}(ft&&(lt=A&&A.onVnodeUnmounted)||rt)&&ae(()=>{lt&&Oe(lt,g,m),rt&&Es(m,null,g,"unmounted")},w)},Ut=m=>{const{type:g,el:w,anchor:D,transition:R}=m;if(g===Qe){ds(w,D);return}if(g===Un){H(m);return}const x=()=>{l(w),R&&!R.persisted&&R.afterLeave&&R.afterLeave()};if(m.shapeFlag&1&&R&&!R.persisted){const{leave:A,delayLeave:q}=R,k=()=>A(w,x);q?q(m.el,x,k):k()}else x()},ds=(m,g)=>{let w;for(;m!==g;)w=b(m),l(m),m=w;l(g)},Qs=(m,g,w)=>{const{bum:D,scope:R,job:x,subTree:A,um:q,m:k,a:N}=m;qr(k),qr(N),D&&Mn(D),R.stop(),x&&(x.flags|=8,L(A,m,g,w)),q&&ae(q,g),ae(()=>{m.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&m.asyncDep&&!m.asyncResolved&&m.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},ie=(m,g,w,D=!1,R=!1,x=0)=>{for(let A=x;A<m.length;A++)L(m[A],g,w,D,R)},we=m=>{if(m.shapeFlag&6)return we(m.component.subTree);if(m.shapeFlag&128)return m.suspense.next();const g=b(m.anchor||m.el),w=g&&g[Ol];return w?b(w):g};let Ae=!1;const ms=(m,g,w)=>{m==null?g._vnode&&L(g._vnode,null,null,!0):O(g._vnode||null,m,g,null,null,null,w),g._vnode=m,Ae||(Ae=!0,Nr(),Na(),Ae=!1)},he={p:O,um:L,m:Dt,r:Ut,mt:be,mc:ee,pc:ot,pbc:ne,n:we,o:s};return{render:ms,hydrate:void 0,createApp:Zl(ms)}}function Bn({type:s,props:i},r){return r==="svg"&&s==="foreignObject"||r==="mathml"&&s==="annotation-xml"&&i&&i.encoding&&i.encoding.includes("html")?void 0:r}function Ts({effect:s,job:i},r){r?(s.flags|=32,i.flags|=4):(s.flags&=-33,i.flags&=-5)}function lh(s,i){return(!s||s&&!s.pendingBranch)&&i&&!i.persisted}function Ja(s,i,r=!1){const o=s.children,l=i.children;if(st(o)&&st(l))for(let c=0;c<o.length;c++){const u=o[c];let d=l[c];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=l[c]=as(l[c]),d.el=u.el),!r&&d.patchFlag!==-2&&Ja(u,d)),d.type===wn&&(d.el=u.el)}}function hh(s){const i=s.slice(),r=[0];let o,l,c,u,d;const p=s.length;for(o=0;o<p;o++){const y=s[o];if(y!==0){if(l=r[r.length-1],s[l]<y){i[o]=l,r.push(o);continue}for(c=0,u=r.length-1;c<u;)d=c+u>>1,s[r[d]]<y?c=d+1:u=d;y<s[r[c]]&&(c>0&&(i[o]=r[c-1]),r[c]=o)}}for(c=r.length,u=r[c-1];c-- >0;)r[c]=u,u=i[u];return r}function Za(s){const i=s.subTree.component;if(i)return i.asyncDep&&!i.asyncResolved?i:Za(i)}function qr(s){if(s)for(let i=0;i<s.length;i++)s[i].flags|=8}const ch=Symbol.for("v-scx"),uh=()=>rn(ch);function Wn(s,i,r){return Xa(s,i,r)}function Xa(s,i,r=gt){const{immediate:o,deep:l,flush:c,once:u}=r,d=te({},r),p=i&&o||!i&&c!=="post";let y;if(qi){if(c==="sync"){const S=uh();y=S.__watcherHandles||(S.__watcherHandles=[])}else if(!p){const S=()=>{};return S.stop=Pe,S.resume=Pe,S.pause=Pe,S}}const f=Xt;d.call=(S,I,O)=>Fe(S,f,I,O);let E=!1;c==="post"?d.scheduler=S=>{ae(S,f&&f.suspense)}:c!=="sync"&&(E=!0,d.scheduler=(S,I)=>{I?S():gr(S)}),d.augmentJob=S=>{i&&(S.flags|=4),E&&(S.flags|=2,f&&(S.id=f.uid,S.i=f))};const b=Tl(s,i,d);return qi&&(y?y.push(b):p&&b()),b}function _h(s,i,r){const o=this.proxy,l=At(s)?s.includes(".")?to(o,s):()=>o[s]:s.bind(o,o);let c;it(i)?c=i:(c=i.handler,r=i);const u=Wi(this),d=Xa(l,c.bind(o),r);return u(),d}function to(s,i){const r=i.split(".");return()=>{let o=s;for(let l=0;l<r.length&&o;l++)o=o[r[l]];return o}}const fh=(s,i)=>i==="modelValue"||i==="model-value"?s.modelModifiers:s[`${i}Modifiers`]||s[`${cs(i)}Modifiers`]||s[`${Is(i)}Modifiers`];function dh(s,i,...r){if(s.isUnmounted)return;const o=s.vnode.props||gt;let l=r;const c=i.startsWith("update:"),u=c&&fh(o,i.slice(7));u&&(u.trim&&(l=r.map(f=>At(f)?f.trim():f)),u.number&&(l=r.map(Ko)));let d,p=o[d=Nn(i)]||o[d=Nn(cs(i))];!p&&c&&(p=o[d=Nn(Is(i))]),p&&Fe(p,s,6,l);const y=o[d+"Once"];if(y){if(!s.emitted)s.emitted={};else if(s.emitted[d])return;s.emitted[d]=!0,Fe(y,s,6,l)}}function eo(s,i,r=!1){const o=i.emitsCache,l=o.get(s);if(l!==void 0)return l;const c=s.emits;let u={},d=!1;if(!it(s)){const p=y=>{const f=eo(y,i,!0);f&&(d=!0,te(u,f))};!r&&i.mixins.length&&i.mixins.forEach(p),s.extends&&p(s.extends),s.mixins&&s.mixins.forEach(p)}return!c&&!d?(Tt(s)&&o.set(s,null),null):(st(c)?c.forEach(p=>u[p]=null):te(u,c),Tt(s)&&o.set(s,u),u)}function bn(s,i){return!s||!dn(i)?!1:(i=i.slice(2).replace(/Once$/,""),_t(s,i[0].toLowerCase()+i.slice(1))||_t(s,Is(i))||_t(s,i))}function Br(s){const{type:i,vnode:r,proxy:o,withProxy:l,propsOptions:[c],slots:u,attrs:d,emit:p,render:y,renderCache:f,props:E,data:b,setupState:S,ctx:I,inheritAttrs:O}=s,V=cn(s);let C,P;try{if(r.shapeFlag&4){const H=l||o,ct=H;C=Ne(y.call(ct,H,f,E,S,b,I)),P=d}else{const H=i;C=Ne(H.length>1?H(E,{attrs:d,slots:u,emit:p}):H(E,null)),P=i.props?d:mh(d)}}catch(H){Ni.length=0,Sn(H,s,1),C=hs(ki)}let tt=C;if(P&&O!==!1){const H=Object.keys(P),{shapeFlag:ct}=tt;H.length&&ct&7&&(c&&H.some(nr)&&(P=ph(P,c)),tt=js(tt,P,!1,!0))}return r.dirs&&(tt=js(tt,null,!1,!0),tt.dirs=tt.dirs?tt.dirs.concat(r.dirs):r.dirs),r.transition&&vr(tt,r.transition),C=tt,cn(V),C}const mh=s=>{let i;for(const r in s)(r==="class"||r==="style"||dn(r))&&((i||(i={}))[r]=s[r]);return i},ph=(s,i)=>{const r={};for(const o in s)(!nr(o)||!(o.slice(9)in i))&&(r[o]=s[o]);return r};function gh(s,i,r){const{props:o,children:l,component:c}=s,{props:u,children:d,patchFlag:p}=i,y=c.emitsOptions;if(i.dirs||i.transition)return!0;if(r&&p>=0){if(p&1024)return!0;if(p&16)return o?Wr(o,u,y):!!u;if(p&8){const f=i.dynamicProps;for(let E=0;E<f.length;E++){const b=f[E];if(u[b]!==o[b]&&!bn(y,b))return!0}}}else return(l||d)&&(!d||!d.$stable)?!0:o===u?!1:o?u?Wr(o,u,y):!0:!!u;return!1}function Wr(s,i,r){const o=Object.keys(i);if(o.length!==Object.keys(s).length)return!0;for(let l=0;l<o.length;l++){const c=o[l];if(i[c]!==s[c]&&!bn(r,c))return!0}return!1}function vh({vnode:s,parent:i},r){for(;i;){const o=i.subTree;if(o.suspense&&o.suspense.activeBranch===s&&(o.el=s.el),o===s)(s=i.vnode).el=r,i=i.parent;else break}}const so=s=>s.__isSuspense;function Sh(s,i){i&&i.pendingBranch?st(s)?i.effects.push(...s):i.effects.push(s):Il(s)}const Qe=Symbol.for("v-fgt"),wn=Symbol.for("v-txt"),ki=Symbol.for("v-cmt"),Un=Symbol.for("v-stc"),Ni=[];let le=null;function io(s=!1){Ni.push(le=s?null:[])}function yh(){Ni.pop(),le=Ni[Ni.length-1]||null}let Ai=1;function Ur(s,i=!1){Ai+=s,s<0&&le&&i&&(le.hasOnce=!0)}function no(s){return s.dynamicChildren=Ai>0?le||Vs:null,yh(),Ai>0&&le&&le.push(s),s}function bh(s,i,r,o,l,c){return no(rs(s,i,r,o,l,c,!0))}function wh(s,i,r,o,l){return no(hs(s,i,r,o,l,!0))}function ro(s){return s?s.__v_isVNode===!0:!1}function Ti(s,i){return s.type===i.type&&s.key===i.key}const ao=({key:s})=>s??null,an=({ref:s,ref_key:i,ref_for:r})=>(typeof s=="number"&&(s=""+s),s!=null?At(s)||Gt(s)||it(s)?{i:Me,r:s,k:i,f:!!r}:s:null);function rs(s,i=null,r=null,o=0,l=null,c=s===Qe?0:1,u=!1,d=!1){const p={__v_isVNode:!0,__v_skip:!0,type:s,props:i,key:i&&ao(i),ref:i&&an(i),scopeId:Pa,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:c,patchFlag:o,dynamicProps:l,dynamicChildren:null,appContext:null,ctx:Me};return d?(yr(p,r),c&128&&s.normalize(p)):r&&(p.shapeFlag|=At(r)?8:16),Ai>0&&!u&&le&&(p.patchFlag>0||c&6)&&p.patchFlag!==32&&le.push(p),p}const hs=Eh;function Eh(s,i=null,r=null,o=0,l=null,c=!1){if((!s||s===Vl)&&(s=ki),ro(s)){const d=js(s,i,!0);return r&&yr(d,r),Ai>0&&!c&&le&&(d.shapeFlag&6?le[le.indexOf(s)]=d:le.push(d)),d.patchFlag=-2,d}if(Ph(s)&&(s=s.__vccOpts),i){i=Th(i);let{class:d,style:p}=i;d&&!At(d)&&(i.class=or(d)),Tt(p)&&(pr(p)&&!st(p)&&(p=te({},p)),i.style=vn(p))}const u=At(s)?1:so(s)?128:Dl(s)?64:Tt(s)?4:it(s)?2:0;return rs(s,i,r,o,l,u,c,!0)}function Th(s){return s?pr(s)||Va(s)?te({},s):s:null}function js(s,i,r=!1,o=!1){const{props:l,ref:c,patchFlag:u,children:d,transition:p}=s,y=i?Rh(l||{},i):l,f={__v_isVNode:!0,__v_skip:!0,type:s.type,props:y,key:y&&ao(y),ref:i&&i.ref?r&&c?st(c)?c.concat(an(i)):[c,an(i)]:an(i):c,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:d,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:i&&s.type!==Qe?u===-1?16:u|16:u,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:p,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&js(s.ssContent),ssFallback:s.ssFallback&&js(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return p&&o&&vr(f,p.clone(f)),f}function xh(s=" ",i=0){return hs(wn,null,s,i)}function Ne(s){return s==null||typeof s=="boolean"?hs(ki):st(s)?hs(Qe,null,s.slice()):ro(s)?as(s):hs(wn,null,String(s))}function as(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:js(s)}function yr(s,i){let r=0;const{shapeFlag:o}=s;if(i==null)i=null;else if(st(i))r=16;else if(typeof i=="object")if(o&65){const l=i.default;l&&(l._c&&(l._d=!1),yr(s,l()),l._c&&(l._d=!0));return}else{r=32;const l=i._;!l&&!Va(i)?i._ctx=Me:l===3&&Me&&(Me.slots._===1?i._=1:(i._=2,s.patchFlag|=1024))}else it(i)?(i={default:i,_ctx:Me},r=32):(i=String(i),o&64?(r=16,i=[xh(i)]):r=8);s.children=i,s.shapeFlag|=r}function Rh(...s){const i={};for(let r=0;r<s.length;r++){const o=s[r];for(const l in o)if(l==="class")i.class!==o.class&&(i.class=or([i.class,o.class]));else if(l==="style")i.style=vn([i.style,o.style]);else if(dn(l)){const c=i[l],u=o[l];u&&c!==u&&!(st(c)&&c.includes(u))&&(i[l]=c?[].concat(c,u):u)}else l!==""&&(i[l]=o[l])}return i}function Oe(s,i,r,o=null){Fe(s,i,7,[r,o])}const Ch=Ua();let Ih=0;function Lh(s,i,r){const o=s.type,l=(i?i.appContext:s.appContext)||Ch,c={uid:Ih++,vnode:s,type:o,parent:i,appContext:l,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Qo(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:i?i.provides:Object.create(l.provides),ids:i?i.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:za(o,l),emitsOptions:eo(o,l),emit:null,emitted:null,propsDefaults:gt,inheritAttrs:o.inheritAttrs,ctx:gt,data:gt,props:gt,attrs:gt,slots:gt,refs:gt,setupState:gt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return c.ctx={_:c},c.root=i?i.root:c,c.emit=dh.bind(null,c),s.ce&&s.ce(c),c}let Xt=null,fn,er;{const s=gn(),i=(r,o)=>{let l;return(l=s[r])||(l=s[r]=[]),l.push(o),c=>{l.length>1?l.forEach(u=>u(c)):l[0](c)}};fn=i("__VUE_INSTANCE_SETTERS__",r=>Xt=r),er=i("__VUE_SSR_SETTERS__",r=>qi=r)}const Wi=s=>{const i=Xt;return fn(s),s.scope.on(),()=>{s.scope.off(),fn(i)}},Hr=()=>{Xt&&Xt.scope.off(),fn(null)};function oo(s){return s.vnode.shapeFlag&4}let qi=!1;function Oh(s,i=!1,r=!1){i&&er(i);const{props:o,children:l}=s.vnode,c=oo(s);th(s,o,c,i),nh(s,l,r);const u=c?Dh(s,i):void 0;return i&&er(!1),u}function Dh(s,i){const r=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,Gl);const{setup:o}=r;if(o){_s();const l=s.setupContext=o.length>1?Mh(s):null,c=Wi(s),u=Bi(o,s,0,[s.props,l]),d=aa(u);if(fs(),c(),(d||s.sp)&&!Oi(s)&&Fa(s),d){if(u.then(Hr,Hr),i)return u.then(p=>{Kr(s,p)}).catch(p=>{Sn(p,s,0)});s.asyncDep=u}else Kr(s,u)}else lo(s)}function Kr(s,i,r){it(i)?s.type.__ssrInlineRender?s.ssrRender=i:s.render=i:Tt(i)&&(s.setupState=La(i)),lo(s)}function lo(s,i,r){const o=s.type;s.render||(s.render=o.render||Pe);{const l=Wi(s);_s();try{zl(s)}finally{fs(),l()}}}const Nh={get(s,i){return Vt(s,"get",""),s[i]}};function Mh(s){const i=r=>{s.exposed=r||{}};return{attrs:new Proxy(s.attrs,Nh),slots:s.slots,emit:s.emit,expose:i}}function br(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(La(gl(s.exposed)),{get(i,r){if(r in i)return i[r];if(r in Di)return Di[r](s)},has(i,r){return r in i||r in Di}})):s.proxy}function Ph(s){return it(s)&&"__vccOpts"in s}const Fh=(s,i)=>wl(s,i,qi),kh="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sr;const Vr=typeof window<"u"&&window.trustedTypes;if(Vr)try{sr=Vr.createPolicy("vue",{createHTML:s=>s})}catch{}const ho=sr?s=>sr.createHTML(s):s=>s,Ah="http://www.w3.org/2000/svg",qh="http://www.w3.org/1998/Math/MathML",$e=typeof document<"u"?document:null,Gr=$e&&$e.createElement("template"),Bh={insert:(s,i,r)=>{i.insertBefore(s,r||null)},remove:s=>{const i=s.parentNode;i&&i.removeChild(s)},createElement:(s,i,r,o)=>{const l=i==="svg"?$e.createElementNS(Ah,s):i==="mathml"?$e.createElementNS(qh,s):r?$e.createElement(s,{is:r}):$e.createElement(s);return s==="select"&&o&&o.multiple!=null&&l.setAttribute("multiple",o.multiple),l},createText:s=>$e.createTextNode(s),createComment:s=>$e.createComment(s),setText:(s,i)=>{s.nodeValue=i},setElementText:(s,i)=>{s.textContent=i},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>$e.querySelector(s),setScopeId(s,i){s.setAttribute(i,"")},insertStaticContent(s,i,r,o,l,c){const u=r?r.previousSibling:i.lastChild;if(l&&(l===c||l.nextSibling))for(;i.insertBefore(l.cloneNode(!0),r),!(l===c||!(l=l.nextSibling)););else{Gr.innerHTML=ho(o==="svg"?`<svg>${s}</svg>`:o==="mathml"?`<math>${s}</math>`:s);const d=Gr.content;if(o==="svg"||o==="mathml"){const p=d.firstChild;for(;p.firstChild;)d.appendChild(p.firstChild);d.removeChild(p)}i.insertBefore(d,r)}return[u?u.nextSibling:i.firstChild,r?r.previousSibling:i.lastChild]}},Wh=Symbol("_vtc");function Uh(s,i,r){const o=s[Wh];o&&(i=(i?[i,...o]:[...o]).join(" ")),i==null?s.removeAttribute("class"):r?s.setAttribute("class",i):s.className=i}const zr=Symbol("_vod"),Hh=Symbol("_vsh"),Kh=Symbol(""),Vh=/(^|;)\s*display\s*:/;function Gh(s,i,r){const o=s.style,l=At(r);let c=!1;if(r&&!l){if(i)if(At(i))for(const u of i.split(";")){const d=u.slice(0,u.indexOf(":")).trim();r[d]==null&&on(o,d,"")}else for(const u in i)r[u]==null&&on(o,u,"");for(const u in r)u==="display"&&(c=!0),on(o,u,r[u])}else if(l){if(i!==r){const u=o[Kh];u&&(r+=";"+u),o.cssText=r,c=Vh.test(r)}}else i&&s.removeAttribute("style");zr in s&&(s[zr]=c?o.display:"",s[Hh]&&(o.display="none"))}const Yr=/\s*!important$/;function on(s,i,r){if(st(r))r.forEach(o=>on(s,i,o));else if(r==null&&(r=""),i.startsWith("--"))s.setProperty(i,r);else{const o=zh(s,i);Yr.test(r)?s.setProperty(Is(o),r.replace(Yr,""),"important"):s[o]=r}}const jr=["Webkit","Moz","ms"],Hn={};function zh(s,i){const r=Hn[i];if(r)return r;let o=cs(i);if(o!=="filter"&&o in s)return Hn[i]=o;o=ha(o);for(let l=0;l<jr.length;l++){const c=jr[l]+o;if(c in s)return Hn[i]=c}return i}const $r="http://www.w3.org/1999/xlink";function Qr(s,i,r,o,l,c=$o(i)){o&&i.startsWith("xlink:")?r==null?s.removeAttributeNS($r,i.slice(6,i.length)):s.setAttributeNS($r,i,r):r==null||c&&!ua(r)?s.removeAttribute(i):s.setAttribute(i,c?"":us(r)?String(r):r)}function Jr(s,i,r,o,l){if(i==="innerHTML"||i==="textContent"){r!=null&&(s[i]=i==="innerHTML"?ho(r):r);return}const c=s.tagName;if(i==="value"&&c!=="PROGRESS"&&!c.includes("-")){const d=c==="OPTION"?s.getAttribute("value")||"":s.value,p=r==null?s.type==="checkbox"?"on":"":String(r);(d!==p||!("_value"in s))&&(s.value=p),r==null&&s.removeAttribute(i),s._value=r;return}let u=!1;if(r===""||r==null){const d=typeof s[i];d==="boolean"?r=ua(r):r==null&&d==="string"?(r="",u=!0):d==="number"&&(r=0,u=!0)}try{s[i]=r}catch{}u&&s.removeAttribute(l||i)}function Yh(s,i,r,o){s.addEventListener(i,r,o)}function jh(s,i,r,o){s.removeEventListener(i,r,o)}const Zr=Symbol("_vei");function $h(s,i,r,o,l=null){const c=s[Zr]||(s[Zr]={}),u=c[i];if(o&&u)u.value=o;else{const[d,p]=Qh(i);if(o){const y=c[i]=Xh(o,l);Yh(s,d,y,p)}else u&&(jh(s,d,u,p),c[i]=void 0)}}const Xr=/(?:Once|Passive|Capture)$/;function Qh(s){let i;if(Xr.test(s)){i={};let o;for(;o=s.match(Xr);)s=s.slice(0,s.length-o[0].length),i[o[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):Is(s.slice(2)),i]}let Kn=0;const Jh=Promise.resolve(),Zh=()=>Kn||(Jh.then(()=>Kn=0),Kn=Date.now());function Xh(s,i){const r=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=r.attached)return;Fe(tc(o,r.value),i,5,[o])};return r.value=s,r.attached=Zh(),r}function tc(s,i){if(st(i)){const r=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{r.call(s),s._stopped=!0},i.map(o=>l=>!l._stopped&&o&&o(l))}else return i}const ta=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,ec=(s,i,r,o,l,c)=>{const u=l==="svg";i==="class"?Uh(s,o,u):i==="style"?Gh(s,r,o):dn(i)?nr(i)||$h(s,i,r,o,c):(i[0]==="."?(i=i.slice(1),!0):i[0]==="^"?(i=i.slice(1),!1):sc(s,i,o,u))?(Jr(s,i,o),!s.tagName.includes("-")&&(i==="value"||i==="checked"||i==="selected")&&Qr(s,i,o,u,c,i!=="value")):s._isVueCE&&(/[A-Z]/.test(i)||!At(o))?Jr(s,cs(i),o,c,i):(i==="true-value"?s._trueValue=o:i==="false-value"&&(s._falseValue=o),Qr(s,i,o,u))};function sc(s,i,r,o){if(o)return!!(i==="innerHTML"||i==="textContent"||i in s&&ta(i)&&it(r));if(i==="spellcheck"||i==="draggable"||i==="translate"||i==="form"||i==="list"&&s.tagName==="INPUT"||i==="type"&&s.tagName==="TEXTAREA")return!1;if(i==="width"||i==="height"){const l=s.tagName;if(l==="IMG"||l==="VIDEO"||l==="CANVAS"||l==="SOURCE")return!1}return ta(i)&&At(r)?!1:i in s}const ic=te({patchProp:ec},Bh);let ea;function nc(){return ea||(ea=ah(ic))}const rc=(...s)=>{const i=nc().createApp(...s),{mount:r}=i;return i.mount=o=>{const l=oc(o);if(!l)return;const c=i._component;!it(c)&&!c.render&&!c.template&&(c.template=l.innerHTML),l.nodeType===1&&(l.textContent="");const u=r(l,!1,ac(l));return l instanceof Element&&(l.removeAttribute("v-cloak"),l.setAttribute("data-v-app","")),u},i};function ac(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function oc(s){return At(s)?document.querySelector(s):s}/**
 * @preserve
 * LIGHTSTREAMER - www.lightstreamer.com
 * Lightstreamer Web Client
 * Version 9.2.1+20241029
 * Copyright (c) Lightstreamer Srl. All Rights Reserved.
 * Contains: LightstreamerClient, Subscription, ConsoleLogLevel,
 * ConsoleLoggerProvider, Logger, LoggerProvider, ClientListener,
 * ClientMessageListener, ItemUpdate, SubscriptionListener
 * ESM
 */var lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hc(s){if(s.__esModule)return s;var i=s.default;if(typeof i=="function"){var r=function o(){return this instanceof o?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};r.prototype=i.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(s).forEach(function(o){var l=Object.getOwnPropertyDescriptor(s,o);Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:function(){return s[o]}})}),r}const cc=s=>(i,r)=>(s.set(i,r),r),sa=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,co=536870912,ia=co*2,uc=(s,i)=>r=>{const o=i.get(r);let l=o===void 0?r.size:o<ia?o+1:0;if(!r.has(l))return s(r,l);if(r.size<co){for(;r.has(l);)l=Math.floor(Math.random()*ia);return s(r,l)}if(r.size>sa)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(l);)l=Math.floor(Math.random()*sa);return s(r,l)},uo=new WeakMap,_c=cc(uo),sn=uc(_c,uo),fc=s=>s.method!==void 0&&s.method==="call",dc=s=>s.error===null&&typeof s.id=="number",mc=s=>{const i=new Map([[0,()=>{}]]),r=new Map([[0,()=>{}]]),o=new Map,l=new Worker(s);return l.addEventListener("message",({data:y})=>{if(fc(y)){const{params:{timerId:f,timerType:E}}=y;if(E==="interval"){const b=i.get(f);if(typeof b=="number"){const S=o.get(b);if(S===void 0||S.timerId!==f||S.timerType!==E)throw new Error("The timer is in an undefined state.")}else if(typeof b<"u")b();else throw new Error("The timer is in an undefined state.")}else if(E==="timeout"){const b=r.get(f);if(typeof b=="number"){const S=o.get(b);if(S===void 0||S.timerId!==f||S.timerType!==E)throw new Error("The timer is in an undefined state.")}else if(typeof b<"u")b(),r.delete(f);else throw new Error("The timer is in an undefined state.")}}else if(dc(y)){const{id:f}=y,E=o.get(f);if(E===void 0)throw new Error("The timer is in an undefined state.");const{timerId:b,timerType:S}=E;o.delete(f),S==="interval"?i.delete(b):r.delete(b)}else{const{error:{message:f}}=y;throw new Error(f)}}),{clearInterval:y=>{const f=sn(o);o.set(f,{timerId:y,timerType:"interval"}),i.set(y,f),l.postMessage({id:f,method:"clear",params:{timerId:y,timerType:"interval"}})},clearTimeout:y=>{const f=sn(o);o.set(f,{timerId:y,timerType:"timeout"}),r.set(y,f),l.postMessage({id:f,method:"clear",params:{timerId:y,timerType:"timeout"}})},setInterval:(y,f=0)=>{const E=sn(i);return i.set(E,()=>{y(),typeof i.get(E)=="function"&&l.postMessage({id:null,method:"set",params:{delay:f,now:performance.now(),timerId:E,timerType:"interval"}})}),l.postMessage({id:null,method:"set",params:{delay:f,now:performance.now(),timerId:E,timerType:"interval"}}),E},setTimeout:(y,f=0)=>{const E=sn(r);return r.set(E,y),l.postMessage({id:null,method:"set",params:{delay:f,now:performance.now(),timerId:E,timerType:"timeout"}}),E}}},pc=(s,i)=>{let r=null;return()=>{if(r!==null)return r;const o=new Blob([i],{type:"application/javascript; charset=utf-8"}),l=URL.createObjectURL(o);return r=s(l),setTimeout(()=>URL.revokeObjectURL(l)),r}},gc=`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`,En=pc(mc,gc),vc=s=>En().clearInterval(s),Sc=s=>En().clearTimeout(s),yc=(...s)=>En().setInterval(...s),bc=(...s)=>En().setTimeout(...s);var wc=Object.freeze({__proto__:null,clearInterval:vc,clearTimeout:Sc,setInterval:yc,setTimeout:bc}),Ec=hc(wc),Vn={exports:{}};/* @preserve
 * JSONPatch.js
 *
 * A Dharmafly project written by Thomas Parslow
 * <tom@almostobsolete.net> and released with the kind permission of
 * NetDev.
 *
 * Copyright 2011-2013 Thomas Parslow. All rights reserved.
 * Permission is hereby granted,y free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * Implements the JSON Patch IETF RFC 6902 as specified at:
 *
 *   http://tools.ietf.org/html/rfc6902
 *
 * Also implements the JSON Pointer IETF RFC 6901 as specified at:
 *
 *   http://tools.ietf.org/html/rfc6901
 *
 */var na;function Tc(){return na||(na=1,function(s,i){(function(r,o){o(s.exports)})(lc,function(r){var o,l,c,u;u=Array.isArray||function(S){return Object.prototype.toString.call(S)=="[object Array]"},r.apply_patch=function(S,I){return new o(I).apply(S)};function d(S){Error.call(this,S),this.message=S}r.InvalidPatch=d,d.prototype=new Error;function p(S){Error.call(this,S),this.message=S}r.PatchApplyError=p,p.prototype=new Error,r.JSONPointer=l=function(I){var O,V,C=[];if(V=I.split("/"),V[0]!=="")throw new d("JSONPointer must start with a slash (or be an empty string)!");for(O=1;O<V.length;O++)C[O-1]=V[O].replace(/~1/g,"/").replace(/~0/g,"~");this.path=C,this.length=C.length},l.prototype._get_segment=function(S,I){var O=this.path[S];if(u(I))if(O==="-")O=I.length;else{if(!O.match(/^0$|^[1-9][0-9]*$/))throw new p("Expected a number to segment an array");O=parseInt(O,10)}return O};function y(S){var I,O;if(u(S))return S.slice();if(S===null)return S;if(typeof S=="object"){I={};for(O in S)Object.hasOwnProperty.call(S,O)&&(I[O]=S[O]);return I}else return S}l.prototype._action=function(S,I,O){var V=this;function C(P,tt){var H,ct;if(O||(P=y(P)),H=V._get_segment(tt,P),tt==V.path.length-1)P=I(P,H);else{if(u(P)){if(P.length<=H)throw new p("Path not found in document")}else if(typeof P=="object"){if(!Object.hasOwnProperty.call(P,H))throw new p("Path not found in document")}else throw new p("Path not found in document");ct=C(P[H],tt+1),O||(P[H]=ct)}return P}return C(S,0)},l.prototype.add=function(S,I,O){return this.length===0?I:this._action(S,function(V,C){if(u(V)){if(C>V.length)throw new p("Add operation must not attempt to create a sparse array!");V.splice(C,0,I)}else V[C]=I;return V},O)},l.prototype.remove=function(S,I){if(this.length!==0)return this._action(S,function(O,V){if(!Object.hasOwnProperty.call(O,V))throw new p("Remove operation must point to an existing value!");return u(O)?O.splice(V,1):delete O[V],O},I)},l.prototype.replace=function(S,I,O){return this.length===0?I:this._action(S,function(V,C){if(!Object.hasOwnProperty.call(V,C))throw new p("Replace operation must point to an existing value!");return u(V)?V.splice(C,1,I):V[C]=I,V},O)},l.prototype.get=function(S){var I;return this.length===0?S:(this._action(S,function(O,V){if(!Object.hasOwnProperty.call(O,V))throw new p("Path not found in document");return I=O[V],O},!0),I)},l.prototype.subsetOf=function(S){if(this.length<=S.length)return!1;for(var I=0;I<S.length;I++)if(S.path[I]!==this.path[I])return!1;return!0},c={add:["value"],replace:["value"],test:["value"],remove:[],move:["from"],copy:["from"]};function f(S,I){var O;if(S===I)return!0;if(typeof S!=typeof I)return!1;if(typeof S=="object"){var V=u(S),C=u(I);if(V!==C)return!1;if(V){if(S.length!=I.length)return!1;for(var P=0;P<S.length;P++)if(!f(S[P],I[P]))return!1;return!0}else{for(O in S)if(Object.hasOwnProperty(S,O)&&!(Object.hasOwnProperty(I,O)&&f(S[O],I[O])))return!1;for(O in I)if(Object.hasOwnProperty(I,O)&&!Object.hasOwnProperty(S,O))return!1;return!0}}else return!1}function E(S){var I,O;if(!S.op)throw new d("Operation missing!");if(!c.hasOwnProperty(S.op))throw new d("Invalid operation!");if(!("path"in S))throw new d("Path missing!");for(O=c[S.op],I=0;I<O.length;I++)if(!(O[I]in S))throw new d(S.op+" must have key "+O[I])}function b(S,I){E(S);var O=S.op,V=new l(S.path),C=S.value,P=S.from?new l(S.from):null;switch(O){case"add":return function(tt){return V.add(tt,C,I)};case"remove":return function(tt){return V.remove(tt,I)};case"replace":return function(tt){return V.replace(tt,C,I)};case"move":if(V.subsetOf(P))throw new d("destination must not be a child of source");return function(tt){var H=P.get(tt),ct=P.remove(tt,I);return V.add(ct,H,I)};case"copy":return function(tt){var H=P.get(tt);return V.add(tt,H,I)};case"test":return function(tt){if(!f(V.get(tt),C))throw new p("Test operation failed. Value did not match.");return tt}}}r.JSONPatch=o=function(I,O){this._compile(I,O)},o.prototype._compile=function(S,I){var O,V=this;if(this.compiledOps=[],typeof S=="string"&&(S=JSON.parse(S)),!u(S))throw new d("Patch must be an array of operations");for(O=0;O<S.length;O++){var C=b(S[O],I);V.compiledOps.push(C)}},r.JSONPatch.prototype.apply=function(S){var I;for(I=0;I<this.compiledOps.length;I++)S=this.compiledOps[I](S);return S}})}(Vn)),Vn.exports}var _o=function(){};_o.prototype={fatal:function(s,i){},isFatalEnabled:function(){},error:function(s,i){},isErrorEnabled:function(){},warn:function(s,i){},isWarnEnabled:function(){},info:function(s,i){},isInfoEnabled:function(){},debug:function(s,i){},isDebugEnabled:function(){},trace:function(s,i){},isTraceEnabled:function(){}};var fo=function(){};fo.prototype={getLogger:function(s){}};var mo=function(){};mo.prototype={getItemName:function(){},getItemPos:function(){},getValue:function(s){},getValueAsJSONPatchIfAvailable:function(s){return null},isValueChanged:function(s){},isSnapshot:function(){},forEachChangedField:function(s){},forEachField:function(s){}};var po=function(){};po.prototype={onItemUpdate:function(s){},onItemLostUpdates:function(s,i,r){},onCommandSecondLevelItemLostUpdates:function(s,i){},onEndOfSnapshot:function(s,i){},onClearSnapshot:function(s,i){},onSubscription:function(){},onUnsubscription:function(){},onSubscriptionError:function(s,i){},onCommandSecondLevelSubscriptionError:function(s,i,r){},onListenStart:function(){},onListenEnd:function(){},onRealMaxFrequency:function(s){}};var Je={};(function(s){var i=function(){return j.__string_rec(this,"")},r=r||{},o;function l(t,e){var n=Object.create(t);for(var a in e)n[a]=e[a];return e.toString!==Object.prototype.toString&&(n.toString=e.toString),n}var c=function(t,e){this.r=new RegExp(t,e.split("u").join(""))};c.__name__=!0,c.prototype={match:function(t){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(t),this.r.s=t,this.r.m!=null},__class__:c};var u=function(){};u.__name__=!0,u.dateStr=function(t){var e=t.getMonth()+1,n=t.getDate(),a=t.getHours(),h=t.getMinutes(),_=t.getSeconds();return t.getFullYear()+"-"+(e<10?"0"+e:""+e)+"-"+(n<10?"0"+n:""+n)+" "+(a<10?"0"+a:""+a)+":"+(h<10?"0"+h:""+h)+":"+(_<10?"0"+_:""+_)},u.cca=function(t,e){var n=t.charCodeAt(e);if(n==n)return n},u.substr=function(t,e,n){if(n==null)n=t.length;else if(n<0)if(e==0)n=t.length+n;else return"";return t.substr(e,n)},u.remove=function(t,e){var n=t.indexOf(e);return n==-1?!1:(t.splice(n,1),!0)},u.now=function(){return Date.now()};var d=function(t,e){this.min=t,this.max=e};d.__name__=!0,d.prototype={hasNext:function(){return this.min<this.max},next:function(){return this.min++},__class__:d};var p=function(){};p.__name__=!0,p.has=function(t,e){for(var n=Ws(t);n.hasNext();)if(n.next()==e)return!0;return!1},p.exists=function(t,e){for(var n=Ws(t);n.hasNext();)if(e(n.next()))return!0;return!1},p.count=function(t,e){var n=0;if(e==null)for(var a=Ws(t);a.hasNext();)a.next(),++n;else for(var h=Ws(t);h.hasNext();)e(h.next())&&++n;return n},p.empty=function(t){return!Ws(t).hasNext()},p.find=function(t,e){for(var n=Ws(t);n.hasNext();){var a=n.next();if(e(a))return a}return null},Math.__name__=!0;var y=function(){};y.__name__=!0,y.field=function(t,e){try{return t[e]}catch{return null}},y.fields=function(t){var e=[];if(t!=null){var n=Object.prototype.hasOwnProperty;for(var a in t)a!="__id__"&&a!="hx__closures__"&&n.call(t,a)&&e.push(a)}return e},y.copy=function(t){if(t==null)return null;for(var e={},n=0,a=y.fields(t);n<a.length;){var h=a[n];++n,e[h]=y.field(t,h)}return e};var f=function(){};f.__name__=!0,f.string=function(t){return j.__string_rec(t,"")},f.parseInt=function(t){var e=parseInt(t);return isNaN(e)?null:e},f.random=function(t){return t<=0?0:Math.floor(Math.random()*t)};var E=function(){this.b=""};E.__name__=!0,E.prototype={__class__:E};var b=function(){};b.__name__=!0,b.startsWith=function(t,e){return t.length>=e.length?t.lastIndexOf(e,0)==0:!1},b.endsWith=function(t,e){var n=e.length,a=t.length;return a>=n?t.indexOf(e,a-n)==a-n:!1},b.isSpace=function(t,e){var n=u.cca(t,e);return n>8&&n<14?!0:n==32},b.ltrim=function(t){for(var e=t.length,n=0;n<e&&b.isSpace(t,n);)++n;return n>0?u.substr(t,n,e-n):t},b.rtrim=function(t){for(var e=t.length,n=0;n<e&&b.isSpace(t,e-n-1);)++n;return n>0?u.substr(t,0,e-n):t},b.trim=function(t){return b.ltrim(b.rtrim(t))},b.replace=function(t,e,n){return t.split(e).join(n)};var S=function(){};S.__name__=!0,S.enumEq=function(t,e){if(t==e)return!0;try{var n=t.__enum__;if(n==null||n!=e.__enum__||t._hx_index!=e._hx_index)return!1;for(var a=r[n],h=a.__constructs__[t._hx_index].__params__,_=0;_<h.length;){var v=h[_];if(++_,!S.enumEq(t[v],e[v]))return!1}}catch{return!1}return!0};var I=Je.LSConnectionDetails=function(t){this.serverAddress=No,this.client=t,this.lock=t.lock};I.__name__=!0,I.prototype={getServerAddress:function(){return this.serverAddress},setServerAddress:function(t){var e=V.fromString(t);if(e!=this.serverAddress){K.isInfoEnabled()&&K.info("serverAddress changed: "+e);var n=this.serverAddress;this.serverAddress=e,this.client.eventDispatcher.onPropertyChange("serverAddress"),n!=e&&this.client.machine.evtServerAddressChanged()}},getAdapterSet:function(){return this.adapterSet},setAdapterSet:function(t){t!=this.adapterSet&&(K.isInfoEnabled()&&K.info("adapterSet changed: "+t),this.adapterSet=t,this.client.eventDispatcher.onPropertyChange("adapterSet"))},getUser:function(){return this.user},setUser:function(t){t!=this.user&&(K.isInfoEnabled()&&K.info("user changed: "+t),this.user=t,this.client.eventDispatcher.onPropertyChange("user"))},setPassword:function(t){t!=this.password&&(K.isInfoEnabled()&&K.info("password changed"),this.password=t,this.client.eventDispatcher.onPropertyChange("password"))},getSessionId:function(){return this.sessionId},setSessionId:function(t){t!=this.sessionId&&(this.sessionId=t,this.client.eventDispatcher.onPropertyChange("sessionId"))},getServerInstanceAddress:function(){return this.serverInstanceAddress},setServerInstanceAddress:function(t){t!=this.serverInstanceAddress&&(this.serverInstanceAddress=t,this.client.eventDispatcher.onPropertyChange("serverInstanceAddress"))},getServerSocketName:function(){return this.serverSocketName},setServerSocketName:function(t){t!=this.serverSocketName&&(this.serverSocketName=t,this.client.eventDispatcher.onPropertyChange("serverSocketName"))},getClientIp:function(){return this.clientIp},setClientIp:function(t){t!=this.clientIp&&(this.clientIp=t,this.client.eventDispatcher.onPropertyChange("clientIp"))},toString:function(){var t=J._new();return J.set(t,"serverAddress",this.serverAddress),J.set(t,"adapterSet",this.adapterSet),J.set(t,"user",this.user),J.set(t,"sessionId",this.sessionId),J.set(t,"serverInstanceAddress",this.serverInstanceAddress),J.set(t,"serverSocketName",this.serverSocketName),J.set(t,"clientIp",this.clientIp),J.set(t,"libVersion",Bt.LIB_NAME+" "+Bt.LIB_VERSION),It.stringify(t.h)},__class__:I};var O=function(){};O.__name__=!0,O.get_supported=function(){return typeof window<"u"&&typeof window.location<"u"?typeof window.location.protocol=="string":!1};var V={};V._new=function(t){return t},V.fromString=function(t){if(t==null)return null;if(b.startsWith(t,"http://")||b.startsWith(t,"https://"))return t;throw new P("address is malformed")};var C=function(t,e,n){Error.call(this,t),this.message=t,this.__previousException=e,this.__nativeException=n??this,this.__skipStack=0;var a=Error.prepareStackTrace;if(Error.prepareStackTrace=function(_){return _.stack},n instanceof Error)this.stack=n.stack;else{var h=null;if(Error.captureStackTrace)Error.captureStackTrace(this,C),h=this;else if(h=new Error,typeof h.stack>"u"){try{throw h}catch{}this.__skipStack++}this.stack=h.stack}Error.prepareStackTrace=a};C.__name__=!0,C.caught=function(t){return t instanceof C?t:t instanceof Error?new C(t.message,null,t):new As(t,null,t)},C.thrown=function(t){if(t instanceof C)return t.get_native();if(t instanceof Error)return t;var e=new As(t);return e.__skipStack++,e},C.__super__=Error,C.prototype=l(Error.prototype,{toString:function(){return this.get_message()},details:function(){if(this.get_previous()==null){var t="Exception: "+this.toString(),e=this.get_stack();return t+(e==null?"null":fe.toString(e))}else{for(var n="",a=this,h=null;a!=null;){if(h==null){var _="Exception: "+a.get_message(),t=a.get_stack();n=_+(t==null?"null":fe.toString(t))+n}else{var v=fe.subtract(a.get_stack(),h.get_stack());n="Exception: "+a.get_message()+(v==null?"null":fe.toString(v))+`

Next `+n}h=a,a=a.get_previous()}return n}},__shiftStack:function(){this.__skipStack++},get_message:function(){return this.message},get_previous:function(){return this.__previousException},get_native:function(){return this.__nativeException},get_stack:function(){var t=this.__exceptionStack;if(t==null){var e=bs.toHaxe(bs.normalize(this.stack),this.__skipStack);return this.setProperty("__exceptionStack",e),e}else return t},setProperty:function(t,e){try{Object.defineProperty(this,t,{value:e})}catch{this[t]=e}},__class__:C});var P=function(t,e,n){C.call(this,t,e,n),this.__skipStack++};P.__name__=!0,P.__super__=C,P.prototype=l(C.prototype,{__class__:P});var tt=Je.LSConnectionOptions=function(t){this.cookieHandlingRequired=!1,this.slowingEnabled=!1,this.serverInstanceAddressIgnored=!1,this.httpExtraHeadersOnSessionCreationOnly=!1,this.stalledTimeout=2e3,this.sessionRecoveryTimeout=15e3,this.reverseHeartbeatInterval=0,this.retryDelay=4e3,this.reconnectTimeout=3e3,this.pollingInterval=0,this.realMaxBandwidth=null,this.requestedMaxBandwidth=Ns.BWUnlimited,this.keepaliveInterval=0,this.idleTimeout=19e3,this.httpExtraHeaders=null,this.forcedTransport=null,this.firstRetryMaxDelay=100,this.contentLength=5e7,this.client=t,this.lock=t.lock};tt.__name__=!0,tt.prototype={getContentLength:function(){return this.contentLength},setContentLength:function(t){var e=Cn.fromIntGt0(t);e!=this.contentLength&&(K.isInfoEnabled()&&K.info("contentLength changed: "+e),this.contentLength=e,this.client.eventDispatcher.onPropertyChange("contentLength"))},getFirstRetryMaxDelay:function(){return this.firstRetryMaxDelay},setFirstRetryMaxDelay:function(t){var e=dt.fromIntGt0(t);e!=this.firstRetryMaxDelay&&(K.isInfoEnabled()&&K.info("firstRetryMaxDelay changed: "+e),this.firstRetryMaxDelay=e,this.client.eventDispatcher.onPropertyChange("firstRetryMaxDelay"))},getForcedTransport:function(){return this.forcedTransport},setForcedTransport:function(t){var e=es.fromString(t);e!=this.forcedTransport&&(K.isInfoEnabled()&&K.info("forcedTransport changed: "+e),this.forcedTransport=e,this.client.eventDispatcher.onPropertyChange("forcedTransport"),this.client.machine.evtExtSetForcedTransport())},getHttpExtraHeaders:function(){return this.httpExtraHeaders==null?null:He.fromMapToDynamicAccess(this.httpExtraHeaders)},setHttpExtraHeaders:function(t){var e=t!=null?He.toHaxe(t):null;this.mapEq(e,this.httpExtraHeaders)||(K.isInfoEnabled()&&K.info("httpExtraHeaders changed: "+(e==null?"null":It.stringify(e.h))),this.httpExtraHeaders=e,this.client.eventDispatcher.onPropertyChange("httpExtraHeaders"))},mapEq:function(t,e){if(t==e)return!0;if(t==null||e==null||p.count(t)!=p.count(e))return!1;for(var n=t.h,a=Object.keys(n),h=a.length,_=0;_<h;){var v=a[_++];if(n[v]!=e.h[v])return!1}return!0},getIdleTimeout:function(){return this.idleTimeout},setIdleTimeout:function(t){var e=dt.fromIntGtEq0(t);e!=this.idleTimeout&&(K.isInfoEnabled()&&K.info("idleTimeout changed: "+e),this.idleTimeout=e,this.client.eventDispatcher.onPropertyChange("idleTimeout"))},getKeepaliveInterval:function(){return this.keepaliveInterval},setKeepaliveInterval:function(t){var e=dt.fromIntGtEq0(t);e!=this.keepaliveInterval&&(K.isInfoEnabled()&&K.info("keepaliveInterval changed: "+e),this.keepaliveInterval=e,this.client.eventDispatcher.onPropertyChange("keepaliveInterval"))},getRequestedMaxBandwidth:function(){return Ms.toString(this.requestedMaxBandwidth)},setRequestedMaxBandwidth:function(t){t!=null&&(t=t==null?"null":""+t);var e=Ms.fromString(t);S.enumEq(e,this.requestedMaxBandwidth)||(K.isInfoEnabled()&&K.info("requestedMaxBandwidth changed: "+Ms.toString(e)),this.requestedMaxBandwidth=e,this.client.eventDispatcher.onPropertyChange("requestedMaxBandwidth"),this.client.machine.evtExtSetRequestedMaxBandwidth())},getRealMaxBandwidth:function(){return vi.toString(this.realMaxBandwidth)},setRealMaxBandwidth:function(t){vi.eq(t,this.realMaxBandwidth)||(this.realMaxBandwidth=t,this.client.eventDispatcher.onPropertyChange("realMaxBandwidth"))},getPollingInterval:function(){return this.pollingInterval},setPollingInterval:function(t){var e=dt.fromIntGtEq0(t);e!=this.pollingInterval&&(K.isInfoEnabled()&&K.info("pollingInterval changed: "+e),this.pollingInterval=e,this.client.eventDispatcher.onPropertyChange("pollingInterval"))},getReconnectTimeout:function(){return this.reconnectTimeout},setReconnectTimeout:function(t){var e=dt.fromIntGt0(t);e!=this.reconnectTimeout&&(K.isInfoEnabled()&&K.info("reconnectTimeout changed: "+e),this.reconnectTimeout=e,this.client.eventDispatcher.onPropertyChange("reconnectTimeout"))},getRetryDelay:function(){return this.retryDelay},setRetryDelay:function(t){var e=dt.fromIntGt0(t);e!=this.retryDelay&&(K.isInfoEnabled()&&K.info("retryDelay changed: "+e),this.retryDelay=e,this.client.eventDispatcher.onPropertyChange("retryDelay"))},getReverseHeartbeatInterval:function(){return this.reverseHeartbeatInterval},setReverseHeartbeatInterval:function(t){var e=dt.fromIntGtEq0(t);e!=this.reverseHeartbeatInterval&&(K.isInfoEnabled()&&K.info("reverseHeartbeatInterval changed: "+e),this.reverseHeartbeatInterval=e,this.client.eventDispatcher.onPropertyChange("reverseHeartbeatInterval"),this.client.machine.evtExtSetReverseHeartbeatInterval())},getSessionRecoveryTimeout:function(){return this.sessionRecoveryTimeout},setSessionRecoveryTimeout:function(t){var e=dt.fromIntGtEq0(t);e!=this.sessionRecoveryTimeout&&(K.isInfoEnabled()&&K.info("sessionRecoveryTimeout changed: "+e),this.sessionRecoveryTimeout=e,this.client.eventDispatcher.onPropertyChange("sessionRecoveryTimeout"))},getStalledTimeout:function(){return this.stalledTimeout},setStalledTimeout:function(t){var e=dt.fromIntGt0(t);e!=this.stalledTimeout&&(K.isInfoEnabled()&&K.info("stalledTimeout changed: "+e),this.stalledTimeout=e,this.client.eventDispatcher.onPropertyChange("stalledTimeout"))},isHttpExtraHeadersOnSessionCreationOnly:function(){return this.httpExtraHeadersOnSessionCreationOnly},setHttpExtraHeadersOnSessionCreationOnly:function(t){t!=this.httpExtraHeadersOnSessionCreationOnly&&(K.isInfoEnabled()&&K.info("httpExtraHeadersOnSessionCreationOnly changed: "+(t==null?"null":""+t)),this.httpExtraHeadersOnSessionCreationOnly=t,this.client.eventDispatcher.onPropertyChange("httpExtraHeadersOnSessionCreationOnly"))},isServerInstanceAddressIgnored:function(){return this.serverInstanceAddressIgnored},setServerInstanceAddressIgnored:function(t){t!=this.serverInstanceAddressIgnored&&(K.isInfoEnabled()&&K.info("serverInstanceAddressIgnored changed: "+(t==null?"null":""+t)),this.serverInstanceAddressIgnored=t,this.client.eventDispatcher.onPropertyChange("serverInstanceAddressIgnored"))},setCookieHandlingRequired:function(t){t!=this.cookieHandlingRequired&&(K.isInfoEnabled()&&K.info("cookieHandlingRequired changed: "+(t==null?"null":""+t)),this.cookieHandlingRequired=t,this.client.eventDispatcher.onPropertyChange("cookieHandlingRequired"))},isCookieHandlingRequired:function(){return this.cookieHandlingRequired},isSlowingEnabled:function(){return this.slowingEnabled},setSlowingEnabled:function(t){t!=this.slowingEnabled&&(K.isInfoEnabled()&&K.info("slowingEnabled changed: "+(t==null?"null":""+t)),this.slowingEnabled=t,this.client.eventDispatcher.onPropertyChange("slowingEnabled"))},toString:function(){var t=J._new();return J.set(t,"forcedTransport",this.forcedTransport),J.set(t,"requestedMaxBandwidth",this.requestedMaxBandwidth),J.set(t,"realMaxBandwidth",this.realMaxBandwidth),J.set(t,"retryDelay",this.retryDelay),J.set(t,"firstRetryMaxDelay",this.firstRetryMaxDelay),J.set(t,"sessionRecoveryTimeout",this.sessionRecoveryTimeout),J.set(t,"reverseHeartbeatInterval",this.reverseHeartbeatInterval),J.set(t,"stalledTimeout",this.stalledTimeout),J.set(t,"reconnectTimeout",this.reconnectTimeout),J.set(t,"keepaliveInterval",this.keepaliveInterval),J.set(t,"pollingInterval",this.pollingInterval),J.set(t,"idleTimeout",this.idleTimeout),J.set(t,"contentLength",this.contentLength),J.set(t,"slowingEnabled",this.slowingEnabled),J.set(t,"serverInstanceAddressIgnored",this.serverInstanceAddressIgnored),J.set(t,"HTTPExtraHeadersOnSessionCreationOnly",this.httpExtraHeadersOnSessionCreationOnly),J.set(t,"HTTPExtraHeaders",this.httpExtraHeaders),J.set(t,"cookieHandlingRequired",this.cookieHandlingRequired),It.stringify(t.h)},__class__:tt};var H=function(){this.listeners=[]};H.__name__=!0,H.prototype={addListener:function(t){return this.listeners.indexOf(t)==-1?(this.listeners.push(t),!0):!1},removeListener:function(t){return u.remove(this.listeners,t)},getListeners:function(){return this.listeners},dispatchToAll:function(t){for(var e=0,n=this.listeners;e<n.length;)this.dispatchToOne(n[e++],t)},dispatchToOne:function(t,e){Le(function(){try{e(t)}catch(a){var n=C.caught(a);K.isErrorEnabled()&&K.error(`Uncaught exception
`+n.details())}})},__class__:H};var ct=function(){H.call(this)};ct.__name__=!0,ct.__super__=H,ct.prototype=l(H.prototype,{removeListenerAndFireOnListenEnd:function(t,e){this.removeListener(t)&&this.dispatchToOne(t,function(n){n.onListenEnd!=null&&n.onListenEnd(e)})},addListenerAndFireOnListenStart:function(t,e){this.addListener(t)&&this.dispatchToOne(t,function(n){n.onListenStart!=null&&n.onListenStart(e)})},onServerError:function(t,e){this.dispatchToAll(function(n){n.onServerError!=null&&n.onServerError(t,e)})},onStatusChange:function(t){this.dispatchToAll(function(e){e.onStatusChange!=null&&e.onStatusChange(t)})},onPropertyChange:function(t){this.dispatchToAll(function(e){e.onPropertyChange!=null&&e.onPropertyChange(t)})},onServerKeepalive:function(){this.dispatchToAll(function(t){t.onServerKeepalive!=null&&t.onServerKeepalive()})},__class__:ct});var Bt=Je.LSLightstreamerClient=function(t,e){this.lock=new be,this.eventDispatcher=new ct,this.connectionDetails=new I(this),this.connectionOptions=new tt(this),this.machine=new ot(this,new fi(this)),t!=null&&this.connectionDetails.setServerAddress(t),e!=null&&this.connectionDetails.setAdapterSet(e)};Bt.__name__=!0,Bt.setLoggerProvider=function(t){at.setLoggerProvider(t)},Bt.prototype={addListener:function(t){this.eventDispatcher.addListenerAndFireOnListenStart(t,this)},removeListener:function(t){this.eventDispatcher.removeListenerAndFireOnListenEnd(t,this)},getListeners:function(){return this.eventDispatcher.getListeners().slice()},connect:function(){this.machine.connect()},disconnect:function(){this.machine.disconnect()},getStatus:function(){return this.machine.getStatus()},sendMessage:function(t,e,n,a,h){h==null&&(h=!1),n==null&&(n=-1),this.machine.sendMessage(t,e,n??-1,a,h!=null&&h)},subscribe:function(t){this.machine.subscribeExt(t)},unsubscribe:function(t){this.machine.unsubscribe(t)},getSubscriptions:function(){return this.machine.getSubscriptions().slice()},getSubscriptionWrappers:function(){for(var t=[],e=0,n=this.machine.getSubscriptions();e<n.length;){var a=n[e];++e,a.wrapper!=null&&t.push(a.wrapper)}return t.slice()},__class__:Bt};var bt=r["com.lightstreamer.client._Subscription.SubscriptionState"]={__ename__:!0,__constructs__:null,Inactive:{_hx_name:"Inactive",_hx_index:0,__enum__:"com.lightstreamer.client._Subscription.SubscriptionState",toString:i},Active:{_hx_name:"Active",_hx_index:1,__enum__:"com.lightstreamer.client._Subscription.SubscriptionState",toString:i},Subscribed:{_hx_name:"Subscribed",_hx_index:2,__enum__:"com.lightstreamer.client._Subscription.SubscriptionState",toString:i}};bt.__constructs__=[bt.Inactive,bt.Active,bt.Subscribed];var ee=function(){H.call(this)};ee.__name__=!0,ee.__super__=H,ee.prototype=l(H.prototype,{onClearSnapshot:function(t,e){this.dispatchToAll(function(n){n.onClearSnapshot!=null&&n.onClearSnapshot(t,e)})},onCommandSecondLevelItemLostUpdates:function(t,e){this.dispatchToAll(function(n){n.onCommandSecondLevelItemLostUpdates!=null&&n.onCommandSecondLevelItemLostUpdates(t,e)})},onCommandSecondLevelSubscriptionError:function(t,e,n){this.dispatchToAll(function(a){a.onCommandSecondLevelSubscriptionError!=null&&a.onCommandSecondLevelSubscriptionError(t,e,n)})},onEndOfSnapshot:function(t,e){this.dispatchToAll(function(n){n.onEndOfSnapshot!=null&&n.onEndOfSnapshot(t,e)})},onItemLostUpdates:function(t,e,n){this.dispatchToAll(function(a){a.onItemLostUpdates!=null&&a.onItemLostUpdates(t,e,n)})},onItemUpdate:function(t){this.dispatchToAll(function(e){e.onItemUpdate!=null&&e.onItemUpdate(t)})},removeListenerAndFireOnListenEnd:function(t,e){this.removeListener(t)&&this.dispatchToOne(t,function(n){n.onListenEnd!=null&&n.onListenEnd(e)})},addListenerAndFireOnListenStart:function(t,e){this.addListener(t)&&this.dispatchToOne(t,function(n){n.onListenStart!=null&&n.onListenStart(e)})},onSubscription:function(){this.dispatchToAll(function(t){t.onSubscription!=null&&t.onSubscription()})},onSubscriptionError:function(t,e){this.dispatchToAll(function(n){n.onSubscriptionError!=null&&n.onSubscriptionError(t,e)})},onUnsubscription:function(){this.dispatchToAll(function(t){t.onUnsubscription!=null&&t.onUnsubscription()})},onRealMaxFrequency:function(t){this.dispatchToAll(function(e){e.onRealMaxFrequency!=null&&e.onRealMaxFrequency(t)})},__class__:ee});var ke=Je.LSSubscription=function(t,e,n,a){this.lock=new be,this.m_internal=!1,this.state=bt.Inactive,this.eventDispatcher=new ee,this.wrapper=a,this.mode=ks.fromString(t),this.initSnapshot(),this.initItemsAndFields(typeof e=="string"?[e].slice():e,n)};ke.__name__=!0,ke.prototype={initSnapshot:function(){this.snapshot=this.mode=="RAW"?null:xe.SnpYes},initItemsAndFields:function(t,e){if(t!=null){if(e==null)throw new P("Please specify a valid field list");if(this.items=Ve.fromArray(ue.copy(t,t)),this.fields=Ge.fromArray(ue.copy(e,e)),this.mode=="COMMAND"&&this.fields.indexOf("key")==-1)throw new P("Field 'key' is missing");if(this.mode=="COMMAND"&&this.fields.indexOf("command")==-1)throw new P("Field 'command' is missing")}else if(e!=null)throw new P("Please specify a valid item or item list")},addListener:function(t){this.eventDispatcher.addListenerAndFireOnListenStart(t,this)},removeListener:function(t){this.eventDispatcher.removeListenerAndFireOnListenEnd(t,this)},getListeners:function(){return this.eventDispatcher.getListeners().slice()},isActive:function(){return this.state!=bt.Inactive},isSubscribed:function(){return this.state==bt.Subscribed},getDataAdapter:function(){return this.dataAdapter},setDataAdapter:function(t){this.checkActive(),this.dataAdapter=is.fromString(t)},getMode:function(){return this.mode},getItems:function(){return this.items==null?null:this.items.slice()},fetchItems:function(){return this.items},setItems:function(t){this.checkActive(),this.items=Ve.fromArray(t==null?null:ue.copy(t,t)),this.group=null},getItemGroup:function(){return this.group},setItemGroup:function(t){this.checkActive(),this.group=is.fromString(t),this.items=null},getFields:function(){return this.fields==null?null:this.fields.slice()},fetchFields:function(){return this.fields},setFields:function(t){this.checkActive();var e=Ge.fromArray(t==null?null:ue.copy(t,t));if(this.mode=="COMMAND"&&e!=null){if(e.indexOf("command")==-1)throw new P("Field 'command' is missing");if(e.indexOf("key")==-1)throw new P("Field 'key' is missing")}this.fields=e,this.schema=null},getFieldSchema:function(){return this.schema},setFieldSchema:function(t){this.checkActive(),this.schema=is.fromString(t),this.fields=null},getRequestedBufferSize:function(){return Ps.toString(this.bufferSize)},setRequestedBufferSize:function(t){t!=null&&(t=t==null?"null":""+t),this.checkActive(),this.bufferSize=Ps.fromString(t)},getRequestedSnapshot:function(){return Fs.toString(this.snapshot)},setRequestedSnapshot:function(t){t!=null&&(t=t==null?"null":""+t),this.checkActive();var e=Fs.fromString(t);switch(this.mode){case"COMMAND":case"MERGE":if(e!=null&&(e!=null&&e._hx_index==2))throw new P("Snapshot length is not permitted if MERGE or COMMAND was specified as mode");break;case"RAW":if(e!=null)throw new P("Snapshot is not permitted if RAW was specified as mode");break}this.snapshot=e},getRequestedMaxFrequency:function(){return Re.toString(this.requestedMaxFrequency)},setRequestedMaxFrequency:function(t){var e=this;t!=null&&(t=t==null?"null":""+t);var n;this.lock.synchronized(function(){var a=Re.fromString(t);switch(e.mode){case"COMMAND":case"DISTINCT":case"MERGE":break;default:throw new P("The operation in only available on MERGE, DISTINCT and COMMAND Subscripitons")}if(e.isActive()&&(a==null||a==Ke.FreqUnfiltered||e.requestedMaxFrequency==Ke.FreqUnfiltered))throw new P("Cannot change the frequency from/to 'unfiltered' or to null while the Subscription is active");return e.subId!=null&&yt.isInfoEnabled()&&yt.info("Subscription "+e.subId+" requested max frequency changed: "+t),e.requestedMaxFrequency=a,n=e.manager,n}),n!=null&&n.evtExtConfigure()},getSelector:function(){return this.selector},setSelector:function(t){this.checkActive(),this.selector=is.fromString(t)},getCommandPosition:function(){if(this.checkCommand(),this.cmdIdx==null)throw new Y("The position of the command field is currently unknown");return this.cmdIdx},getKeyPosition:function(){if(this.checkCommand(),this.keyIdx==null)throw new Y("The position of the key field is currently unknown");return this.keyIdx},getCommandSecondLevelDataAdapter:function(){return this.dataAdapter2},setCommandSecondLevelDataAdapter:function(t){this.checkActive(),this.checkCommand(),this.dataAdapter2=is.fromString(t)},getCommandSecondLevelFields:function(){return this.fields2==null?null:this.fields2.slice()},setCommandSecondLevelFields:function(t){this.checkActive(),this.checkCommand(),this.fields2=Ge.fromArray(t==null?null:ue.copy(t,t)),this.schema2=null},getCommandSecondLevelFieldSchema:function(){return this.schema2},setCommandSecondLevelFieldSchema:function(t){this.checkActive(),this.checkCommand(),this.schema2=is.fromString(t),this.fields2=null},getValue:function(t,e){var n=typeof t=="number"&&(t|0)===t,a=typeof t=="string",h=typeof e=="number"&&(e|0)===e,_=typeof e=="string";if(n&&h)return this.getValuePosPos(t,e);if(n&&_)return this.getValuePosName(t,e);if(a&&h)return this.getValueNamePos(t,e);if(a&&_)return this.getValueNameName(t,e);throw new P("Invalid argument type")},getCommandValue:function(t,e,n){var a=typeof t=="number"&&(t|0)===t,h=typeof t=="string",_=typeof n=="number"&&(n|0)===n,v=typeof n=="string";if(a&&_)return this.getCommandValuePosPos(t,e,n);if(a&&v)return this.getCommandValuePosName(t,e,n);if(h&&_)return this.getCommandValueNamePos(t,e,n);if(h&&v)return this.getCommandValueNameName(t,e,n);throw new P("Invalid argument type")},getValuePosPos:function(t,e){var n=this;if(t<1||e<1)throw new P("The specified position is out of bounds");var a;return this.lock.synchronized(function(){return a=n.manager,a}),a!=null?a.getValue(t,e):null},getValuePosName:function(t,e){var n=this;return this.getValuePosPos(t,this.lock.synchronized(function(){return n.getFieldPos(e)}))},getValueNamePos:function(t,e){var n=this;return this.getValuePosPos(this.lock.synchronized(function(){return n.getItemPos(t)}),e)},getValueNameName:function(t,e){var n=this;return this.getValuePosPos(this.lock.synchronized(function(){return n.getItemPos(t)}),this.lock.synchronized(function(){return n.getFieldPos(e)}))},getCommandValuePosPos:function(t,e,n){var a=this;if(this.checkCommand(),t<1||n<1)throw new P("The specified position is out of bounds");var h;return this.lock.synchronized(function(){return h=a.manager,h}),h!=null?h.getCommandValue(t,e,n):null},getCommandValuePosName:function(t,e,n){var a=this;return this.getCommandValuePosPos(t,e,this.lock.synchronized(function(){return a.getFieldPos(n)}))},getCommandValueNamePos:function(t,e,n){var a=this;return this.getCommandValuePosPos(this.lock.synchronized(function(){return a.getItemPos(t)}),e,n)},getCommandValueNameName:function(t,e,n){var a=this;return this.getCommandValuePosPos(this.lock.synchronized(function(){return a.getItemPos(t)}),e,this.lock.synchronized(function(){return a.getFieldPos(n)}))},getItemPos:function(t){var e,n;if(this.items!=null?(e=Ve.getPos(this.items,t),n=e==-1):n=!0,n)throw new P("Unknown item name");return e},getFieldPos:function(t){var e,n;if(this.fields!=null?(e=Ge.getPos(this.fields,t),n=e==-1):n=!0,n)throw new P("Unknown field name");return e},checkActive:function(){if(this.isActive())throw new Y("Cannot modify an active Subscription. Please unsubscribe before applying any change")},checkCommand:function(){if(this.mode!="COMMAND")throw new Y("This method can only be used on COMMAND subscriptions")},fetch_items:function(){return this.items},fetch_fields:function(){return this.fields},fetch_fields2:function(){return this.fields2},fetch_mode:function(){return this.mode},fetch_requestedBufferSize:function(){return this.bufferSize},fetch_requestedSnapshot:function(){return this.snapshot},fetch_requestedMaxFrequency:function(){return this.requestedMaxFrequency},fetch_nItems:function(){return this.nItems},fetch_subManager:function(){return this.manager},setActive:function(){this.state=bt.Active},setInactive:function(){this.state=bt.Inactive,this.subId=null,this.cmdIdx=null,this.keyIdx=null,this.nItems=null,this.nFields=null},setSubscribed:function(t,e,n){this.state=bt.Subscribed,this.subId=t,this.nItems=e,this.nFields=n},setSubscribedCMD:function(t,e,n,a,h){this.state=bt.Subscribed,this.subId=t,this.cmdIdx=a,this.keyIdx=h,this.nItems=e,this.nFields=n},fetch_nFields:function(){return this.nFields},isInternal:function(){return this.m_internal},setInternal:function(){this.m_internal=!0},getItemName:function(t){return this.items!=null?this.items[t-1]:null},relate:function(t){this.manager=t},unrelate:function(t){this.manager==t&&(this.manager=null)},hasSnapshot:function(){return!(this.snapshot==null||this.snapshot==xe.SnpNo)},getItemNameOrPos:function(t){return this.items!=null?this.items[t-1]:""+t},fireOnSubscription:function(t){yt.isInfoEnabled()&&yt.info("Subscription "+t+" added"),this.eventDispatcher.onSubscription()},fireOnUnsubscription:function(t){yt.isInfoEnabled()&&yt.info("Subscription "+t+" deleted"),this.eventDispatcher.onUnsubscription()},fireOnSubscriptionError:function(t,e,n){yt.isWarnEnabled()&&yt.warn("Subscription "+t+" failed: "+e+" - "+n),this.eventDispatcher.onSubscriptionError(e,n)},fireOnEndOfSnapshot:function(t,e){yt.isDebugEnabled()&&yt.debug("Subscription "+e+":"+this.getItemNameOrPos(t)+": snapshot ended"),this.eventDispatcher.onEndOfSnapshot(this.getItemName(t),t)},fireOnClearSnapshot:function(t,e){yt.isDebugEnabled()&&yt.debug("Subscription "+e+":"+this.getItemNameOrPos(t)+": snapshot cleared"),this.eventDispatcher.onClearSnapshot(this.getItemName(t),t)},fireOnLostUpdates:function(t,e,n){yt.isDebugEnabled()&&yt.debug("Subscription "+n+":"+this.getItemNameOrPos(t)+": lost "+e+" updates"),this.eventDispatcher.onItemLostUpdates(this.getItemName(t),t,e)},fireOnItemUpdate:function(t,e){yt.isDebugEnabled()&&yt.debug("Subscription "+e+":"+this.getItemNameOrPos(t.getItemPos())+" update: "+f.string(t)),this.eventDispatcher.onItemUpdate(t)},fireOnRealMaxFrequency:function(t,e){yt.isDebugEnabled()&&yt.debug("Subscription "+e+" real max frequency changed: "+f.string(t)),this.eventDispatcher.onRealMaxFrequency(To(t))},fireOnSubscriptionError2Level:function(t,e,n,a,h){yt.isWarnEnabled()&&yt.warn("Subscription "+a+":"+this.getItemNameOrPos(h)+":"+t+" failed: "+e+" - "+n),this.eventDispatcher.onCommandSecondLevelSubscriptionError(e,n,t)},fireOnLostUpdates2Level:function(t,e,n,a){yt.isDebugEnabled()&&yt.debug("Subscription "+n+":"+this.getItemNameOrPos(a)+":"+t+": lost "+e+" updates"),this.eventDispatcher.onCommandSecondLevelItemLostUpdates(e,t)},toString:function(){var t=J._new();return J.set(t,"mode",this.mode),J.set(t,"items",this.items!=null?f.string(this.items):this.group),J.set(t,"fields",this.fields!=null?f.string(this.fields):this.schema),J.set(t,"dataAdapter",this.dataAdapter),J.set(t,"requestedBufferSize",this.bufferSize),J.set(t,"requestedSnapshot",this.snapshot),J.set(t,"requestedMaxFrequency",this.requestedMaxFrequency),J.set(t,"selector",this.selector),J.set(t,"secondLevelFields",this.fields2!=null?f.string(this.fields2):this.schema2),J.set(t,"secondLevelDataAdapter",this.dataAdapter2),It.stringify(t.h)},__class__:ke};var ne=function(){};ne.__name__=!0,ne.__isInterface__=!0,ne.prototype={__class__:ne};var se=function(t){this.frozen=!1,this.onEvent=t};se.__name__=!0,se.__interfaces__=[ne],se.newLoggingInstance=function(){var t=new se(function(e){Zi.isWarnEnabled()&&Zi.warn(""+f.string(e)+" event detected")});return t.startListening(),t},se.prototype={handleFrozen:function(){this.frozen=!0,this.onEvent(ui.Frozen)},handleResumed:function(){this.frozen=!1,this.onEvent(ui.Resumed)},startListening:function(){O.get_supported()&&(window.addEventListener("freeze",Lt(this,this.handleFrozen),{capture:!0}),window.addEventListener("resume",Lt(this,this.handleResumed),{capture:!0}))},stopListening:function(){O.get_supported()&&(window.removeEventListener("freeze",Lt(this,this.handleFrozen),{capture:!0}),window.removeEventListener("resume",Lt(this,this.handleResumed),{capture:!0}))},__class__:se};var zt=function(){};zt.__name__=!0,zt.__interfaces__=[_o],zt.prototype={__class__:zt};var ye=function(){};ye.__name__=!0,ye.__super__=zt,ye.prototype=l(zt.prototype,{fatal:function(t,e){},error:function(t,e){},warn:function(t,e){},info:function(t,e){},debug:function(t,e){},trace:function(t,e){},isFatalEnabled:function(){return!1},isErrorEnabled:function(){return!1},isWarnEnabled:function(){return!1},isInfoEnabled:function(){return!1},isDebugEnabled:function(){return!1},isTraceEnabled:function(){return!1},__class__:ye});var be=function(){};be.__name__=!0,be.prototype={acquire:function(){},release:function(){},synchronized:function(t){var e=null,n=null;try{n=t()}catch(a){e=C.caught(a)}if(e!=null)throw C.thrown(e);return n},__class__:be};var at=function(){};at.__name__=!0,at.getLogger=function(t){return at.lock.synchronized(function(){var e=at.logInstances.h[t];if(e==null){var n=new xt(at.currentLoggerProvider==null?at.emptyLogger:at.currentLoggerProvider.getLogger(t));at.logInstances.h[t]=n,e=n}return e})},at.setLoggerProvider=function(t){at.lock.synchronized(function(){at.currentLoggerProvider=t;for(var e=at.logInstances.h,n=Object.keys(e),a=n.length,h=0;h<a;){var _=n[h++];e[_].wrappedLogger=at.currentLoggerProvider==null?at.emptyLogger:at.currentLoggerProvider.getLogger(_)}})},at.newLogger=function(t){return at.currentLoggerProvider==null?at.emptyLogger:at.currentLoggerProvider.getLogger(t)};var xt=function(t){this.wrappedLogger=t};xt.__name__=!0,xt.__super__=zt,xt.prototype=l(zt.prototype,{fatal:function(t,e){this.wrappedLogger.fatal(t,e)},error:function(t,e){this.wrappedLogger.error(t,e)},warn:function(t,e){this.wrappedLogger.warn(t,e)},info:function(t,e){this.wrappedLogger.info(t,e)},debug:function(t,e){this.wrappedLogger.debug(t,e)},trace:function(t,e){this.wrappedLogger.trace(t,e)},isFatalEnabled:function(){return this.wrappedLogger.isFatalEnabled()},isErrorEnabled:function(){return this.wrappedLogger.isErrorEnabled()},isWarnEnabled:function(){return this.wrappedLogger.isWarnEnabled()},isInfoEnabled:function(){return this.wrappedLogger.isInfoEnabled()},isDebugEnabled:function(){return this.wrappedLogger.isDebugEnabled()},isTraceEnabled:function(){return this.wrappedLogger.isTraceEnabled()},__class__:xt});var j=function(){};j.__name__=!0,j.getClass=function(t){if(t==null)return null;if(t instanceof Array)return Array;var e=t.__class__;if(e!=null)return e;var n=j.__nativeClassName(t);return n!=null?j.__resolveNativeClass(n):null},j.__string_rec=function(t,e){if(t==null)return"null";if(e.length>=5)return"<...>";var n=typeof t;switch(n=="function"&&(t.__name__||t.__ename__)&&(n="object"),n){case"function":return"<function>";case"object":if(t.__enum__){var a=r[t.__enum__],h=a.__constructs__[t._hx_index],_=h._hx_name;return h.__params__?(e=e+"	",_+"("+function(de){for(var Ye,ge=[],re=0,Us=h.__params__;re<Us.length;){var bi=Us[re];re=re+1,ge.push(j.__string_rec(t[bi],e))}return Ye=ge,Ye}().join(",")+")"):_}if(t instanceof Array){var nt="[";e+="	";for(var v=0,T=t.length;v<T;){var W=v++;nt+=(W>0?",":"")+j.__string_rec(t[W],e)}return nt+="]",nt}var Z;try{Z=t.toString}catch{return"???"}if(Z!=null&&Z!=Object.toString&&typeof Z=="function"){var X=t.toString();if(X!="[object Object]")return X}var nt=`{
`;e+="	";var Kt=t.hasOwnProperty!=null,St=null;for(St in t)Kt&&!t.hasOwnProperty(St)||St=="prototype"||St=="__class__"||St=="__super__"||St=="__interfaces__"||St=="__properties__"||(nt.length!=2&&(nt+=`, 
`),nt+=e+St+" : "+j.__string_rec(t[St],e));return e=e.substring(1),nt+=`
`+e+"}",nt;case"string":return t;default:return String(t)}},j.__interfLoop=function(t,e){for(;;){if(t==null)return!1;if(t==e)return!0;var n=t.__interfaces__;if(n!=null)for(var a=0,h=n.length;a<h;){var _=n[a++];if(_==e||j.__interfLoop(_,e))return!0}t=t.__super__}},j.__instanceof=function(t,e){if(e==null)return!1;switch(e){case Array:return t instanceof Array;case Lo:return typeof t=="boolean";case Co:return t!=null;case Io:return typeof t=="number";case Ro:return typeof t=="number"?(t|0)===t:!1;case String:return typeof t=="string";default:if(t!=null){if(typeof e=="function"){if(j.__downcastCheck(t,e))return!0}else if(typeof e=="object"&&j.__isNativeObj(e)&&t instanceof e)return!0}else return!1;return e==Oo&&t.__name__!=null||e==Do&&t.__ename__!=null?!0:t.__enum__!=null?r[t.__enum__]==e:!1}},j.__downcastCheck=function(t,e){return t instanceof e?!0:e.__isInterface__?j.__interfLoop(j.getClass(t),e):!1},j.__cast=function(t,e){if(t==null||j.__instanceof(t,e))return t;throw C.thrown("Cannot cast "+f.string(t)+" to "+f.string(e))},j.__nativeClassName=function(t){var e=j.__toStr.call(t).slice(8,-1);return e=="Object"||e=="Function"||e=="Math"||e=="JSON"?null:e},j.__isNativeObj=function(t){return j.__nativeClassName(t)!=null},j.__resolveNativeClass=function(t){return s[t]};var ot=function(t,e){this.slw_m=.5,this.slw_hugeDelayMs=2e4,this.slw_maxAvgDelayMs=7e3,this.slw_avgDelayMs=0,this.slw_refTime=0,this.rec_clientProg=0,this.rec_serverProg=0,this.subscriptionManagers=new Ds,this.messageManagers=new We,this.sequenceMap=new It,this.disabledTransports=new Ct,this.suspendedTransports=new Ct,this.ctrl_connectTs=0,this.recoverTs=0,this.connectTs=0,this.m_nextSubId=0,this.m_nextReqId=0,this.m_status="DISCONNECTED",this.delayCounter=new gs,this.state=new w,this.client=t,this.lock=t.lock,this.details=t.connectionDetails,this.options=t.connectionOptions,this.wsFactory=Lt(e,e.createWsClient),this.httpFactory=Lt(e,e.createHttpClient),this.ctrlFactory=Lt(e,e.createCtrlClient),this.timerFactory=Lt(e,e.createTimer),this.randomGenerator=Lt(e,e.randomMillis),this.reachabilityFactory=Lt(e,e.createReachabilityManager),this.frz_pageLifecycleFactory=Lt(e,e.createPageLifecycleFactory),this.clientEventDispatcher=t.eventDispatcher,this.switchRequest=new we(this),this.constrainRequest=new Ae(this),this.delayCounter.reset(this.options.retryDelay)};ot.__name__=!0,ot.prototype={disposeSession:function(){this.disposeWS(),this.disposeHTTP(),this.disposeCtrl(),this.details.setServerInstanceAddress(null),this.details.setSessionId(null),this.details.setServerSocketName(null),this.details.setClientIp(null),this.options.setRealMaxBandwidth(null),this.lastKnownClientIp=null,this.resetSequenceMap(),this.rec_serverProg=0,this.rec_clientProg=0,this.bw_lastReqId=null,this.bw_requestedMaxBandwidth=null,this.swt_lastReqId=null},disposeClient:function(){this.sessionId=null,this.enableAllTransports(),this.resetCurrentRetryDelay(),this.resetSequenceMap(),this.cause=null},evtExtConnect:function(){this.traceEvent("connect");var t=!0;if(this.state.s_m==100)if(ot.frz_globalPageLifecycle.frozen){Zi.isWarnEnabled()&&Zi.warn("connection requested while page is frozen"),this.cause="page.frozen",this.resetCurrentRetryDelay(),this.doInstallPageLifecycle(),this.state.s_m=117,this.state.traceState(),t=this.evtExtConnect_NextRegion();var e=this.frz_pageLifecycle;e!=null&&e.startListening(),this.evtRetry(L.page_frozen)}else{this.cause="api",this.resetCurrentRetryDelay(),this.doInstallPageLifecycle(),this.state.s_m=101,this.state.traceState(),t=this.evtExtConnect_NextRegion();var e=this.frz_pageLifecycle;e!=null&&e.startListening(),this.evtSelectCreate()}t&&this.evtExtConnect_NextRegion()},evtExtConnect_NextRegion:function(){return this.evtExtConnect_NetworkReachabilityRegion()},evtExtConnect_NetworkReachabilityRegion:function(){var t=this;if(this.state.s_nr==1400){var e=new qt(this.getServerAddress()).get_hostname();this.nr_reachabilityManager=this.reachabilityFactory(e),this.state.s_nr=1410,this.state.traceState(),this.nr_reachabilityManager.startListening(function(n){switch(n._hx_index){case 0:t.evtNetworkReachable(e);break;case 1:t.evtNetworkNotReachable(e);break}})}return!1},doInstallPageLifecycle:function(){var t=this;this.frz_pageLifecycle=this.frz_pageLifecycleFactory(function(e){switch(e._hx_index){case 0:t.evtPageFrozen();break;case 1:t.evtPageResumed();break}})},doUnistallPageLifecycle:function(){var t=this.frz_pageLifecycle;t!=null&&t.stopListening(),this.frz_pageLifecycle=null},evtPageFrozen:function(){switch(this.traceEvent("page.frozen"),this.state.s_m){case 110:case 111:case 112:case 113:case 114:case 115:case 116:this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="page.frozen",this.state.s_m=117,this.state.traceState(),this.cancel_evtRetryTimeout();break;case 120:case 121:case 122:this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="page.frozen",this.state.s_m=117,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtRetry(L.page_frozen);break;case 130:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="page.frozen",this.state.s_m=117,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtRetry(L.page_frozen);break;case 140:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="page.frozen",this.state.s_m=117,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtRetry(L.page_frozen);break;case 150:var t=this.state.s_tr;if(t!=null)switch(t){case 210:this.sendDestroyWS("page.frozen"),this.closeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="page.frozen",this.state.clear_w(),this.state.goto_m_from_session(117),this.exit_w(),this.evtEndSession(),this.evtRetry(L.page_frozen);break;case 220:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="page.frozen",this.state.goto_m_from_session(117),this.cancel_evtTransportTimeout(),this.evtEndSession(),this.evtRetry(L.page_frozen);break;case 230:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="page.frozen",this.state.goto_m_from_session(117),this.cancel_evtTransportTimeout(),this.evtEndSession(),this.evtRetry(L.page_frozen);break;case 240:var n=this.state.s_ws;if((n!=null?n.m:null)==500)this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="page.frozen",this.state.goto_m_from_ws(117),this.exit_ws_to_m(),this.evtRetry(L.page_frozen);else{var n,a,e=this.state.s_ws;if((e!=null?e.m:null)!=501){var e=this.state.s_ws;a=(e!=null?e.m:null)==502}else a=!0;if(a)n=!0;else{var a=this.state.s_ws;n=(a!=null?a.m:null)==503}n&&(this.sendDestroyWS("page.frozen"),this.closeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="page.frozen",this.state.goto_m_from_ws(117),this.exit_ws_to_m(),this.evtRetry(L.page_frozen))}break;case 250:var n,a=this.state.s_wp;if((a!=null?a.m:null)!=600){var a=this.state.s_wp;n=(a!=null?a.m:null)==601}else n=!0;if(n)this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="page.frozen",this.state.goto_m_from_wp(117),this.exit_ws_to_m(),this.evtRetry(L.page_frozen);else{var n=this.state.s_wp;(n!=null?n.m:null)==602&&(this.sendDestroyWS("page.frozen"),this.closeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="page.frozen",this.state.goto_m_from_wp(117),this.exit_wp_to_m(),this.evtRetry(L.page_frozen))}break;case 260:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="page.frozen",this.state.goto_m_from_rec(117),this.exit_rec_to_m(),this.evtRetry(L.page_frozen);break;case 270:this.state.s_h==710?(this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="page.frozen",this.state.goto_m_from_hs(117),this.exit_hs_to_m(),this.evtRetry(L.page_frozen)):this.state.s_h==720&&(this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="page.frozen",this.state.goto_m_from_hp(117),this.exit_hp_to_m(),this.evtRetry(L.page_frozen));break}break}},evtPageResumed:function(){this.traceEvent("page.resumed"),this.state.s_m==117&&(this.state.s_m=116,this.state.traceState(),this.evtSelectCreate())},evtNetworkNotReachable:function(t){Ji.isInfoEnabled()&&Ji.info(""+t+" is NOT reachable"),this.traceEvent("nr:network.not.reachable"),this.state.s_nr==1410?(this.state.s_nr=1411,this.state.traceState()):this.state.s_nr==1412&&(this.state.s_nr=1411,this.state.traceState())},evtNetworkReachable:function(t){Ji.isInfoEnabled()&&Ji.info(""+t+" is reachable"),this.traceEvent("nr:network.reachable"),this.state.s_nr==1410?(this.state.s_nr=1412,this.state.traceState()):this.state.s_nr==1411&&(this.state.s_nr=1412,this.state.traceState(),this.evtOnlineAgain())},evtOnlineAgain:function(){this.traceEvent("online.again"),this.state.s_m==112?(this.state.s_m=116,this.state.traceState(),this.cancel_evtRetryTimeout(),this.evtSelectCreate()):this.state.s_rec==1003&&(this.sendRecovery(),this.state.s_rec=1001,this.state.traceState(),this.cancel_evtRetryTimeout(),this.schedule_evtTransportTimeout(this.options.retryDelay))},evtServerAddressChanged:function(){var t=this;switch(this.traceEvent("nr:serverAddress.changed"),this.state.s_nr){case 1410:case 1411:case 1412:var e=this.nr_reachabilityManager,n=new qt(this.getServerAddress()).get_hostname();this.nr_reachabilityManager=this.reachabilityFactory(n),this.state.s_nr=1410,this.state.traceState(),e!=null&&e.stopListening(),this.nr_reachabilityManager.startListening(function(a){switch(a._hx_index){case 0:t.evtNetworkReachable(n);break;case 1:t.evtNetworkNotReachable(n);break}});break}},evtExtDisconnect:function(t){switch(this.traceEvent("disconnect: cause="+f.string(t)),this.state.s_m){case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:this.notifyStatus("DISCONNECTED"),this.notifyServerErrorIfCauseIsError(t),this.state.s_m=100,this.state.traceState(),this.cancel_evtRetryTimeout(),this.evtTerminate(t);break;case 120:case 121:case 122:this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerErrorIfCauseIsError(t),this.state.s_m=100,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtTerminate(t);break;case 130:this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerErrorIfCauseIsError(t),this.state.s_m=100,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtTerminate(t);break;case 140:this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerErrorIfCauseIsError(t),this.state.s_m=100,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtTerminate(t);break;case 150:var e=this.state.s_tr;if(e!=null)switch(e){case 210:this.sendDestroyWS(),this.closeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerErrorIfCauseIsError(t),this.state.clear_w(),this.state.goto_m_from_session(100),this.exit_w(),this.evtEndSession(),this.evtTerminate(t);break;case 220:this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerErrorIfCauseIsError(t),this.state.goto_m_from_session(100),this.cancel_evtTransportTimeout(),this.evtEndSession(),this.evtTerminate(t);break;case 230:this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerErrorIfCauseIsError(t),this.state.goto_m_from_session(100),this.cancel_evtTransportTimeout(),this.evtEndSession(),this.evtTerminate(t);break;case 240:var a=this.state.s_ws;if((a!=null?a.m:null)==500)this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerErrorIfCauseIsError(t),this.state.goto_m_from_ws(100),this.exit_ws_to_m(),this.evtTerminate(t);else{var a,h,n=this.state.s_ws;if((n!=null?n.m:null)!=501){var n=this.state.s_ws;h=(n!=null?n.m:null)==502}else h=!0;if(h)a=!0;else{var h=this.state.s_ws;a=(h!=null?h.m:null)==503}a&&(this.sendDestroyWS(),this.closeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerErrorIfCauseIsError(t),this.state.goto_m_from_ws(100),this.exit_ws_to_m(),this.evtTerminate(t))}break;case 250:var a,h=this.state.s_wp;if((h!=null?h.m:null)!=600){var h=this.state.s_wp;a=(h!=null?h.m:null)==601}else a=!0;if(a)this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerErrorIfCauseIsError(t),this.state.goto_m_from_wp(100),this.exit_ws_to_m(),this.evtTerminate(t);else{var a=this.state.s_wp;(a!=null?a.m:null)==602&&(this.sendDestroyWS(),this.closeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerErrorIfCauseIsError(t),this.state.goto_m_from_wp(100),this.exit_wp_to_m(),this.evtTerminate(t))}break;case 260:this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerErrorIfCauseIsError(t),this.state.goto_m_from_rec(100),this.exit_rec_to_m(),this.evtTerminate(t);break;case 270:this.state.s_h==710?(this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerErrorIfCauseIsError(t),this.state.goto_m_from_hs(100),this.exit_hs_to_m(),this.evtTerminate(t)):this.state.s_h==720&&(this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerErrorIfCauseIsError(t),this.state.goto_m_from_hp(100),this.exit_hp_to_m(),this.evtTerminate(t));break}break}},evtSelectCreate:function(){if(this.traceEvent("select.create"),this.state.s_m==101||this.state.s_m==116)switch(this.getBestForCreating()._hx_index){case 0:this.notifyStatus("CONNECTING"),this.openWS_Create(),this.state.s_m=120,this.state.traceState(),this.evtCreate(),this.schedule_evtTransportTimeout(this.delayCounter.get_currentRetryDelay());break;case 1:this.notifyStatus("CONNECTING"),this.sendCreateHTTP(),this.state.s_m=130,this.state.traceState(),this.evtCreate(),this.schedule_evtTransportTimeout(this.delayCounter.get_currentRetryDelay());break;case 2:this.notifyStatus("DISCONNECTED"),this.state.s_m=100,this.state.traceState(),this.evtTerminate(Ut.TC_otherError("Unable to select a transport"));break}},evtWSOpen:function(){if(this.traceEvent("ws.open"),this.state.s_m==120)this.sendCreateWS(),this.state.s_m=121,this.state.traceState();else{var t=this.state.s_ws;if((t!=null?t.m:null)==500)this.sendBindWS_Streaming(),this.state.s_ws.m=501,this.state.traceState();else{var t=this.state.s_wp;(t!=null?t.m:null)==600&&(M.sure(this.ws).send("wsok"),this.state.s_wp.m=601,this.state.traceState())}}},evtMessage:function(t){var e=!0;if(b.startsWith(t,"U,")){var n=ft(t);this.evtU(n.subId,n.itemIdx,n.values,t)}else if(b.startsWith(t,"REQOK"))t=="REQOK"?this.evtREQOK_withoutReqId():this.evtREQOK(B(t.split(",")[1]));else if(b.startsWith(t,"PROBE"))this.evtPROBE();else if(b.startsWith(t,"LOOP"))this.evtLOOP(B(t.split(",")[1]));else if(b.startsWith(t,"CONOK")){var a=t.split(",");this.evtCONOK(a[1],B(a[2]),B(a[3]),a[4])}else if(b.startsWith(t,"WSOK"))this.evtWSOK();else if(b.startsWith(t,"SERVNAME"))this.evtSERVNAME(t.split(",")[1]);else if(b.startsWith(t,"CLIENTIP"))this.evtCLIENTIP(t.split(",")[1]);else if(b.startsWith(t,"CONS")){var h=t.split(",")[1];switch(h){case"unlimited":this.evtCONS(ss.BWUnlimited);break;case"unmanaged":this.evtCONS(ss.BWUnmanaged);break;default:this.evtCONS(ss.BWLimited(rt(h)))}}else if(b.startsWith(t,"MSGDONE")){var a=t.split(","),_=a[1];_=="*"&&(_="UNORDERED_MESSAGES");var v=B(a[2]),T=a[3];this.evtMSGDONE(_,v,T==""?"":vt(T))}else if(b.startsWith(t,"MSGFAIL")){var a=t.split(","),_=a[1];_=="*"&&(_="UNORDERED_MESSAGES"),this.evtMSGFAIL(_,B(a[2]),B(a[3]),vt(a[4]))}else if(b.startsWith(t,"REQERR")){var a=t.split(",");this.evtREQERR(B(a[1]),B(a[2]),vt(a[3]))}else if(b.startsWith(t,"PROG"))this.evtPROG(B(t.split(",")[1]));else if(b.startsWith(t,"SUBOK")){var a=t.split(",");this.evtSUBOK(B(a[1]),B(a[2]),B(a[3]))}else if(b.startsWith(t,"SUBCMD")){var a=t.split(",");this.evtSUBCMD(B(a[1]),B(a[2]),B(a[3]),B(a[4]),B(a[5]))}else if(b.startsWith(t,"UNSUB"))this.evtUNSUB(B(t.split(",")[1]));else if(b.startsWith(t,"CONF")){var a=t.split(","),W=B(a[1]);a[2]=="unlimited"?this.evtCONF(W,Ce.RFreqUnlimited):this.evtCONF(W,Ce.RFreqLimited(rt(a[2])))}else if(b.startsWith(t,"EOS")){var a=t.split(",");this.evtEOS(B(a[1]),B(a[2]))}else if(b.startsWith(t,"CS")){var a=t.split(",");this.evtCS(B(a[1]),B(a[2]))}else if(b.startsWith(t,"OV")){var a=t.split(",");this.evtOV(B(a[1]),B(a[2]),B(a[3]))}else if(b.startsWith(t,"NOOP"))this.evtNOOP();else if(b.startsWith(t,"CONERR")){var a=t.split(",");this.evtCONERR(B(a[1]),vt(a[2]))}else if(b.startsWith(t,"END")){var a=t.split(",");this.evtEND(B(a[1]),vt(a[2]))}else if(b.startsWith(t,"ERROR")){var a=t.split(",");this.evtERROR(B(a[1]),vt(a[2]))}else b.startsWith(t,"SYNC")?this.evtSYNC(B(t.split(",")[1])):e=!1;return e},evtCtrlMessage:function(t){if(b.startsWith(t,"REQOK"))t=="REQOK"?this.evtREQOK_withoutReqId():this.evtREQOK(B(t.split(",")[1]));else if(b.startsWith(t,"REQERR")){var e=t.split(",");this.evtREQERR(B(e[1]),B(e[2]),vt(e[3]))}else if(b.startsWith(t,"ERROR")){var e=t.split(",");this.evtERROR(B(e[1]),vt(e[2]))}},evtTransportTimeout:function(){switch(this.traceEvent("transport.timeout"),this.state.s_m){case 120:case 121:this.suspendWS_Streaming(),this.disposeWS(),this.cause="ws.unavailable",this.state.s_m=115,this.state.traceState(),this.cancel_evtTransportTimeout(),this.entry_m115(L.ws_unavailable);break;case 122:this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.timeout",this.state.s_m=112,this.state.traceState(),this.cancel_evtTransportTimeout(),this.entry_m112(L.ws_timeout);break;case 130:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.timeout",this.state.s_m=112,this.state.traceState(),this.cancel_evtTransportTimeout(),this.entry_m112(L.http_timeout);break;case 140:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ttl.timeout";var t=this.waitingInterval(this.delayCounter.get_currentRetryDelay(),this.connectTs);this.state.s_m=111,this.state.traceState(),this.cancel_evtTransportTimeout(),this.entry_m111(L.http_error,t);break;case 150:var e=this.state.s_tr;if(e!=null)switch(e){case 220:if(this.options.sessionRecoveryTimeout==0)this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.timeout",this.state.goto_m_from_session(112),this.cancel_evtTransportTimeout(),this.evtEndSession(),this.entry_m112(L.http_timeout);else{this.disposeHTTP(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="http.timeout";var t=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec(),this.cancel_evtTransportTimeout(),this.entry_rec(t,L.http_timeout)}break;case 230:if(this.options.sessionRecoveryTimeout==0)this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ttl.timeout",this.state.goto_m_from_session(112),this.cancel_evtTransportTimeout(),this.evtEndSession(),this.entry_m112(L.http_timeout);else{this.disposeHTTP(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="ttl.timeout";var t=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec(),this.cancel_evtTransportTimeout(),this.entry_rec(t,L.http_error)}break;case 240:var n=this.state.s_ws,e=n!=null?n.m:null;if(e!=null)switch(e){case 500:this.disableWS(),this.disposeWS(),this.cause="ws.unavailable",this.state.clear_ws(),this.state.s_tr=200,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtSwitchTransport();break;case 501:if(this.options.sessionRecoveryTimeout==0)this.disableWS(),this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.unavailable",this.state.goto_m_from_ws(112),this.exit_ws_to_m(),this.entry_m112(L.ws_unavailable);else{this.disableWS(),this.disposeWS(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="ws.unavailable";var t=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec_from_ws(),this.exit_ws(),this.entry_rec(t,L.ws_unavailable)}break;case 502:if(this.options.sessionRecoveryTimeout==0)this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.timeout",this.state.goto_m_from_ws(112),this.exit_ws_to_m(),this.entry_m112(L.ws_timeout);else{this.disposeWS(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="ws.timeout";var t=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec_from_ws(),this.exit_ws(),this.entry_rec(t,L.ws_timeout)}break}break;case 250:var n=this.state.s_wp,e=n!=null?n.m:null;if(e!=null)switch(e){case 600:case 601:this.disableWS(),this.disposeWS(),this.cause="ws.unavailable",this.state.clear_wp(),this.state.s_tr=200,this.state.traceState(),this.exit_wp(),this.evtSwitchTransport();break}break;case 260:this.state.s_rec==1001&&(this.disposeHTTP(),this.state.s_rec=1002,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtCheckRecoveryTimeout(ds.RRC_transport_timeout));break;case 270:var e=this.state.s_h;if(e!=null&&e==710){var n=this.state.s_hs,e=n!=null?n.m:null;if(e!=null)switch(e){case 800:this.disableHTTP_Streaming(),this.cause="http.streaming.unavailable",this.state.s_hs.m=801,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtForcePolling(),this.schedule_evtTransportTimeout(this.options.retryDelay);break;case 801:if(this.options.sessionRecoveryTimeout==0)this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.timeout",this.state.goto_m_from_hs(112),this.exit_hs_to_m(),this.entry_m112(L.http_timeout);else{this.disposeHTTP(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="http.timeout";var t=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec_from_hs(),this.exit_hs_to_rec(),this.entry_rec(t,L.http_timeout)}break}}break}break}},evtTransportError:function(){switch(this.traceEvent("transport.error"),this.state.s_m){case 120:case 121:this.suspendWS_Streaming(),this.disposeWS(),this.cause="ws.unavailable",this.state.s_m=115,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtRetry(L.ws_unavailable),this.evtRetryTimeout();break;case 122:this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.error";var t=this.waitingInterval(this.delayCounter.get_currentRetryDelay(),this.connectTs);this.state.s_m=112,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtRetry(L.ws_error,t),this.schedule_evtRetryTimeout(t);break;case 130:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.error";var t=this.waitingInterval(this.delayCounter.get_currentRetryDelay(),this.connectTs);this.state.s_m=112,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtRetry(L.http_error,t),this.schedule_evtRetryTimeout(t);break;case 140:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ttl.error";var t=this.waitingInterval(this.delayCounter.get_currentRetryDelay(),this.connectTs);this.state.s_m=111,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtRetry(L.http_error,t),this.schedule_evtRetryTimeout(t);break;case 150:var e=this.state.s_tr;if(e!=null)switch(e){case 210:if(this.options.sessionRecoveryTimeout==0)this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.error",this.state.clear_w(),this.state.goto_m_from_session(113),this.exit_w(),this.evtEndSession(),this.entry_m113(L.ws_error);else{this.disposeWS(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="ws.error";var t=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.clear_w(),this.state.s_tr=260,this.state.s_rec=1e3,this.state.traceState(),this.exit_w(),this.entry_rec(t,L.ws_error)}break;case 220:if(this.options.sessionRecoveryTimeout==0){this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.error";var t=this.waitingInterval(this.delayCounter.get_currentRetryDelay(),this.connectTs);this.state.goto_m_from_session(112),this.cancel_evtTransportTimeout(),this.evtEndSession(),this.evtRetry(L.http_error,t),this.schedule_evtRetryTimeout(t)}else{this.disposeHTTP(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="http.error";var t=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec(),this.cancel_evtTransportTimeout(),this.entry_rec(t,L.http_error)}break;case 230:if(this.options.sessionRecoveryTimeout==0){this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ttl.error";var t=this.waitingInterval(this.delayCounter.get_currentRetryDelay(),this.connectTs);this.state.goto_m_from_session(112),this.cancel_evtTransportTimeout(),this.evtEndSession(),this.evtRetry(L.http_error,t),this.schedule_evtRetryTimeout(t)}else{this.disposeHTTP(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="ttl.error";var t=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec(),this.cancel_evtTransportTimeout(),this.entry_rec(t,L.http_error)}break;case 240:switch(M.sure(this.state.s_ws).m){case 500:this.disableWS(),this.disposeWS(),this.cause="ws.unavailable",this.state.clear_ws(),this.state.s_tr=200,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtSwitchTransport();break;case 501:if(this.options.sessionRecoveryTimeout==0)this.disableWS(),this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.unavailable",this.state.goto_m_from_ws(112),this.exit_ws_to_m(),this.entry_m112(L.ws_unavailable);else{this.disableWS(),this.disposeWS(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="ws.unavailable";var t=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec_from_ws(),this.exit_ws(),this.entry_rec(t,L.ws_unavailable)}break;case 502:if(this.options.sessionRecoveryTimeout==0)this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.error",this.state.goto_m_from_ws(112),this.exit_ws_to_m(),this.entry_m112(L.ws_error);else{this.disposeWS(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="ws.error";var t=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec_from_ws(),this.cancel_evtTransportTimeout(),this.entry_rec(t,L.ws_error)}break;case 503:if(this.options.sessionRecoveryTimeout==0)this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.error",this.state.goto_m_from_ws(113),this.exit_ws_to_m(),this.entry_m113(L.ws_error);else{this.disposeWS(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="ws.error";var t=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec_from_ws(),this.exit_ws(),this.entry_rec(t,L.ws_error)}break}break;case 250:switch(M.sure(this.state.s_wp).m){case 600:case 601:this.disableWS(),this.disposeWS(),this.cause="ws.unavailable",this.state.clear_wp(),this.state.s_tr=200,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtSwitchTransport();break;case 602:if(this.options.sessionRecoveryTimeout==0)this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.error",this.state.goto_m_from_wp(113),this.exit_wp_to_m(),this.entry_m113(L.ws_error);else{this.disposeWS(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="ws.error";var t=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec_from_wp(),this.exit_wp(),this.entry_rec(t,L.ws_error)}break}break;case 260:this.state.s_rec==1001&&(this.disposeHTTP(),this.state.s_rec=1002,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtCheckRecoveryTimeout(ds.RRC_transport_error));break;case 270:switch(M.sure(this.state.s_h)){case 710:switch(M.sure(this.state.s_hs).m){case 800:case 801:if(this.options.sessionRecoveryTimeout==0)this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.error",this.state.goto_m_from_hs(112),this.exit_hs_to_m(),this.entry_m112(L.http_error);else{this.disposeHTTP(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="http.error";var t=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec_from_hs(),this.exit_hs_to_rec(),this.entry_rec(t,L.http_error)}break;case 802:if(this.options.sessionRecoveryTimeout==0)this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.error",this.state.goto_m_from_hs(113),this.exit_hs_to_m(),this.entry_m113(L.http_error);else{this.disposeHTTP(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="http.error";var t=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec_from_hs(),this.exit_hs_to_rec(),this.entry_rec(t,L.http_error)}break}break;case 720:switch(M.sure(this.state.s_hp).m){case 900:case 901:case 902:case 903:case 904:if(this.options.sessionRecoveryTimeout==0)this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.error",this.state.goto_m_from_hp(112),this.exit_hp_to_m(),this.entry_m112(L.http_error);else{this.disposeHTTP(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="http.error";var t=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec_from_hp(),this.exit_hp_to_rec(),this.entry_rec(t,L.http_error)}break}break}break}break}},evtIdleTimeout:function(){this.traceEvent("idle.timeout");var t,e=this.state.s_wp,n=e!=null?e.p:null;if(n==null)t=!1;else switch(n){case 610:case 611:case 613:t=!0;break;default:t=!1}if(t)if(this.options.sessionRecoveryTimeout==0)this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.idle.timeout",this.state.goto_m_from_wp(113),this.exit_wp_to_m(),this.entry_m113(L.idle_timeout);else{this.disposeWS(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="ws.idle.timeout";var a=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec_from_wp(),this.exit_wp(),this.entry_rec(a,L.idle_timeout)}else{var t,e=this.state.s_hp,n=e!=null?e.m:null;if(n==null)t=!1;else switch(n){case 900:case 901:case 903:t=!0;break;default:t=!1}if(t)if(this.options.sessionRecoveryTimeout==0)this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.idle.timeout",this.state.goto_m_from_hp(112),this.exit_hp_to_m(),this.entry_m112(L.idle_timeout);else{this.disposeHTTP(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="http.idle.timeout";var a=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec_from_hp(),this.exit_hp_to_rec(),this.entry_rec(a,L.idle_timeout)}}},evtPollingTimeout:function(){this.traceEvent("polling.timeout");var t=this.state.s_wp;if((t!=null?t.p:null)==612)this.sendBindWS_Polling(),this.state.s_wp.p=613,this.state.traceState(),this.cancel_evtPollingTimeout(),this.schedule_evtIdleTimeout(dt.plus(M.sure(this.idleTimeout),this.options.retryDelay));else{var t=this.state.s_hp;(t!=null?t.m:null)==902&&(this.sendBindHTTP_Polling(),this.state.s_hp.m=903,this.state.traceState(),this.cancel_evtPollingTimeout(),this.schedule_evtIdleTimeout(dt.plus(M.sure(this.idleTimeout),this.options.retryDelay)))}},evtKeepaliveTimeout:function(){this.traceEvent("keepalive.timeout");var t=this.state.s_w;if((t!=null?t.k:null)==310)this.state.s_w.k=311,this.state.traceState(),this.cancel_evtKeepaliveTimeout(),this.schedule_evtStalledTimeout(this.options.stalledTimeout);else{var t=this.state.s_ws;if((t!=null?t.k:null)==520)this.state.s_ws.k=521,this.state.traceState(),this.cancel_evtKeepaliveTimeout(),this.schedule_evtStalledTimeout(this.options.stalledTimeout);else{var t=this.state.s_hs;(t!=null?t.k:null)==820&&(this.state.s_hs.k=821,this.state.traceState(),this.cancel_evtKeepaliveTimeout(),this.schedule_evtStalledTimeout(this.options.stalledTimeout))}}},evtStalledTimeout:function(){this.traceEvent("stalled.timeout");var t=this.state.s_w;if((t!=null?t.k:null)==311)this.state.s_w.k=312,this.state.traceState(),this.cancel_evtStalledTimeout(),this.schedule_evtReconnectTimeout(this.options.reconnectTimeout);else{var t=this.state.s_ws;if((t!=null?t.k:null)==521)this.state.s_ws.k=522,this.state.traceState(),this.cancel_evtStalledTimeout(),this.schedule_evtReconnectTimeout(this.options.reconnectTimeout);else{var t=this.state.s_hs;(t!=null?t.k:null)==821&&(this.state.s_hs.k=822,this.state.traceState(),this.cancel_evtStalledTimeout(),this.schedule_evtReconnectTimeout(this.options.reconnectTimeout))}}},evtReconnectTimeout:function(){this.traceEvent("reconnect.timeout");var t=this.state.s_w;if((t!=null?t.k:null)==312)if(this.options.sessionRecoveryTimeout==0)this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.stalled",this.state.goto_m_from_w(113),this.exit_w_to_m(),this.entry_m113(L.stalled_timeout);else{this.disposeWS(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="ws.stalled";var e=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec_from_w(),this.exit_w(),this.entry_rec(e,L.stalled_timeout)}else{var t=this.state.s_ws;if((t!=null?t.k:null)==522)if(this.options.sessionRecoveryTimeout==0)this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.stalled",this.state.goto_m_from_ws(113),this.exit_ws_to_m(),this.entry_m113(L.stalled_timeout);else{this.disposeWS(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="ws.stalled";var e=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec_from_ws(),this.exit_ws(),this.entry_rec(e,L.stalled_timeout)}else{var t=this.state.s_hs;if((t!=null?t.k:null)==822)if(this.options.sessionRecoveryTimeout==0)this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.stalled",this.state.goto_m_from_hs(113),this.exit_hs_to_m(),this.entry_m113(L.stalled_timeout);else{this.disposeHTTP(),this.notifyStatus("DISCONNECTED:TRYING-RECOVERY"),this.cause="http.stalled";var e=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.goto_rec_from_hs(),this.exit_hs_to_rec(),this.entry_rec(e,L.stalled_timeout)}}}},evtRestartKeepalive:function(){this.traceEvent("restart.keepalive");var t=this.state.s_w;if((t!=null?t.k:null)!=null)this.state.s_w.k=310,this.state.traceState(),this.exit_keepalive_unit(),this.schedule_evtKeepaliveTimeout(M.sure(this.keepaliveInterval));else{var t=this.state.s_ws;if((t!=null?t.k:null)!=null)this.state.s_ws.k=520,this.state.traceState(),this.exit_keepalive_unit(),this.schedule_evtKeepaliveTimeout(M.sure(this.keepaliveInterval));else{var t=this.state.s_hs;(t!=null?t.k:null)!=null&&(this.state.s_hs.k=820,this.state.traceState(),this.exit_keepalive_unit(),this.schedule_evtKeepaliveTimeout(M.sure(this.keepaliveInterval)))}}},evtWSOK:function(){switch(this.traceEvent("WSOK"),F.isDebugEnabled()&&F.debug("WSOK"),this.state.s_m){case 121:this.state.s_m=122,this.state.traceState();break;case 150:var t=this.state.s_tr;if(t!=null)switch(t){case 240:var e=this.state.s_ws,t=e!=null?e.m:null;t!=null&&t==501&&(this.state.s_ws.m=502,this.state.traceState());break;case 250:var e=this.state.s_wp,t=e!=null?e.m:null;t!=null&&t==601&&(this.sendBindWS_FirstPolling(),this.state.s_wp.m=602,this.state.s_wp.p=610,this.state.s_wp.c=620,this.state.s_wp.s=630,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtSendPendingControls(),this.evtSendPendingMessages(),this.schedule_evtIdleTimeout(dt.plus(M.sure(this.idleTimeout),this.options.retryDelay)));break}break}},evtCONERR:function(t,e){this.traceEvent("CONERR"),F.isDebugEnabled()&&F.debug("CONERR "+t+" "+e);var n=L.standardError(t,e),a=Ut.TC_standardError(t,e);if(this.state.s_m==122)switch(t){case 5:this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.conerr."+t,this.state.s_m=110,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtRetry(n),this.evtRetryTimeout();break;case 4:case 6:case 20:case 40:case 41:case 48:this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.conerr."+t;var h=this.waitingInterval(this.delayCounter.get_currentRetryDelay(),this.connectTs);this.state.s_m=112,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtRetry(n,h),this.schedule_evtRetryTimeout(h);break;default:this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_CONERR(t,e),this.state.s_m=100,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtTerminate(a)}else if(this.state.s_m==130)switch(t){case 5:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.conerr."+t,this.state.s_m=110,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtRetry(n),this.evtRetryTimeout();break;case 4:case 6:case 20:case 40:case 41:case 48:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.conerr."+t;var h=this.waitingInterval(this.delayCounter.get_currentRetryDelay(),this.connectTs);this.state.s_m=112,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtRetry(n,h),this.schedule_evtRetryTimeout(h);break;default:this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_CONERR(t,e),this.state.s_m=100,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtTerminate(a)}else if(this.state.s_m==140)switch(t){case 5:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ttl.conerr."+t,this.state.s_m=110,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtRetry(n),this.evtRetryTimeout();break;case 4:case 6:case 20:case 40:case 41:case 48:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ttl.conerr."+t;var h=this.waitingInterval(this.delayCounter.get_currentRetryDelay(),this.connectTs);this.state.s_m=112,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtRetry(n,h),this.schedule_evtRetryTimeout(h);break;default:this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_CONERR(t,e),this.state.s_m=100,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtTerminate(a)}else{var _=this.state.s_ws;if((_!=null?_.m:null)==502)switch(t){case 4:case 6:case 20:case 40:case 41:case 48:this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.conerr."+t,this.state.goto_m_from_ws(112),this.exit_ws_to_m(),this.entry_m112(L.standardError(t,e));break;default:this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_CONERR(t,e),this.state.goto_m_from_ws(100),this.exit_ws_to_m(),this.evtTerminate(a)}else{var _,v=this.state.s_wp;if((v!=null?v.p:null)!=610){var v=this.state.s_wp;_=(v!=null?v.p:null)==613}else _=!0;if(_)switch(t){case 4:case 6:case 20:case 40:case 41:case 48:this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.conerr."+t,this.state.goto_m_from_wp(112),this.exit_wp_to_m(),this.entry_m112(L.standardError(t,e));break;default:this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_CONERR(t,e),this.state.goto_m_from_wp(100),this.exit_wp_to_m(),this.evtTerminate(a)}else{var _,v=this.state.s_hs;if((v!=null?v.m:null)!=800){var v=this.state.s_hs;_=(v!=null?v.m:null)==801}else _=!0;if(_)switch(t){case 4:case 6:case 20:case 40:case 41:case 48:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.conerr."+t,this.state.goto_m_from_hs(112),this.exit_hs_to_m(),this.entry_m112(L.standardError(t,e));break;default:this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_CONERR(t,e),this.state.goto_m_from_hs(100),this.exit_hs_to_m(),this.evtTerminate(a)}else{var _,v=this.state.s_hp;if((v!=null?v.m:null)!=900){var v=this.state.s_hp;_=(v!=null?v.m:null)==903}else _=!0;if(_)switch(t){case 4:case 6:case 20:case 40:case 41:case 48:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.conerr."+t,this.state.goto_m_from_hp(112),this.exit_hp_to_m(),this.entry_m112(L.standardError(t,e));break;default:this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_CONERR(t,e),this.state.goto_m_from_hp(100),this.exit_hp_to_m(),this.evtTerminate(a)}else if(this.state.s_rec==1001)switch(t){case 4:case 6:case 20:case 40:case 41:case 48:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="recovery.conerr."+t,this.state.goto_m_from_rec(113),this.exit_rec_to_m(),this.entry_m113(n);break;default:this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_CONERR(t,e),this.state.goto_m_from_rec(100),this.exit_rec_to_m(),this.evtTerminate(a)}}}}}},evtEND:function(t,e){this.traceEvent("END"),F.isDebugEnabled()&&F.debug("END "+t+" "+e);var n=L.standardError(t,e),a=Ut.TC_standardError(t,e),h=this.state.s_w;if((h!=null?h.p:null)==300)switch(t){case 41:case 48:this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.end."+t;var _=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.clear_w(),this.state.goto_m_from_session(113),this.exit_w(),this.evtEndSession(),this.evtRetry(L.standardError(t,e),_),this.schedule_evtRetryTimeout(_);break;default:this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_END(t,e),this.state.clear_w(),this.state.goto_m_from_session(100),this.exit_w(),this.evtEndSession(),this.evtTerminate(a)}else{var h=this.state.s_ws;if((h!=null?h.m:null)==502)switch(t){case 41:case 48:this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.end."+t,this.state.goto_m_from_ws(112),this.exit_ws_to_m(),this.entry_m112(L.standardError(t,e));break;default:this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_END(t,e),this.state.goto_m_from_ws(100),this.exit_ws_to_m(),this.evtTerminate(a)}else{var h=this.state.s_ws;if((h!=null?h.p:null)==510)switch(t){case 41:case 48:this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.end."+t,this.state.goto_m_from_ws(113),this.exit_ws_to_m(),this.entry_m113(n);break;default:this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_END(t,e),this.state.goto_m_from_ws(100),this.exit_ws_to_m(),this.evtTerminate(a)}else{var h,v=this.state.s_wp;if((v!=null?v.p:null)!=610){var v=this.state.s_wp;h=(v!=null?v.p:null)==613}else h=!0;if(h)switch(t){case 41:case 48:this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.end."+t,this.state.goto_m_from_wp(112),this.exit_wp_to_m(),this.entry_m112(L.standardError(t,e));break;default:this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_END(t,e),this.state.goto_m_from_wp(100),this.exit_wp_to_m(),this.evtTerminate(a)}else{var h=this.state.s_wp;if((h!=null?h.p:null)==611)switch(t){case 41:case 48:this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.end."+t,this.state.goto_m_from_wp(113),this.exit_wp_to_m(),this.entry_m113(n);break;default:this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_END(t,e),this.state.goto_m_from_wp(100),this.exit_wp_to_m(),this.evtTerminate(a)}else{var h,v=this.state.s_hs;if((v!=null?v.m:null)!=800){var v=this.state.s_hs;h=(v!=null?v.m:null)==801}else h=!0;if(h)switch(t){case 41:case 48:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.end."+t,this.state.goto_m_from_hs(112),this.exit_hs_to_m(),this.entry_m112(L.standardError(t,e));break;default:this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_END(t,e),this.state.goto_m_from_hs(100),this.exit_hs_to_m(),this.evtTerminate(a)}else{var h=this.state.s_hs;if((h!=null?h.p:null)==810)switch(t){case 41:case 48:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.end."+t,this.state.goto_m_from_hs(113),this.exit_hs_to_m(),this.entry_m113(n);break;default:this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_END(t,e),this.state.goto_m_from_hs(100),this.exit_hs_to_m(),this.evtTerminate(a)}else{var h,v=this.state.s_hp;if((v!=null?v.m:null)!=900){var v=this.state.s_hp;h=(v!=null?v.m:null)==903}else h=!0;if(h)switch(t){case 41:case 48:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.end."+t,this.state.goto_m_from_hp(112),this.exit_hp_to_m(),this.entry_m112(L.standardError(t,e));break;default:this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_END(t,e),this.state.goto_m_from_hp(100),this.exit_hp_to_m(),this.evtTerminate(a)}else{var h=this.state.s_hp;if((h!=null?h.m:null)==901)switch(t){case 41:case 48:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.end."+t,this.state.goto_m_from_hp(113),this.exit_hp_to_m(),this.entry_m113(n);break;default:this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_END(t,e),this.state.goto_m_from_hp(100),this.exit_hp_to_m(),this.evtTerminate(a)}else if(this.state.s_rec==1001)switch(t){case 41:case 48:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="recovery.end."+t,this.state.goto_m_from_rec(113),this.exit_rec_to_m(),this.entry_m113(n);break;default:this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_END(t,e),this.state.goto_m_from_rec(100),this.exit_rec_to_m(),this.evtTerminate(a)}}}}}}}}}},evtERROR:function(t,e){this.traceEvent("ERROR"),F.isDebugEnabled()&&F.debug("ERROR "+t+" "+e);var n=Ut.TC_standardError(t,e),a=this.state.s_w;if((a!=null?a.p:null)==300)this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_ERROR(t,e),this.state.clear_w(),this.state.goto_m_from_session(100),this.exit_w(),this.evtEndSession(),this.evtTerminate(n);else{var a=this.state.s_ws;if((a!=null?a.p:null)==510)this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_ERROR(t,e),this.state.goto_m_from_ws(100),this.exit_ws_to_m(),this.evtTerminate(n);else{var a=this.state.s_wp;(a!=null?a.c:null)==620?(this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_ERROR(t,e),this.state.goto_m_from_wp(100),this.exit_wp_to_m(),this.evtTerminate(n)):this.state.s_ctrl==1102&&(this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_ERROR(t,e),this.state.goto_m_from_ctrl(100),this.exit_ctrl_to_m(),this.evtTerminate(n))}}},evtREQOK_withoutReqId:function(){this.traceEvent("REQOK"),F.isDebugEnabled()&&F.debug("REQOK"),this.state.s_ctrl==1102&&(this.state.s_ctrl=1102,this.state.traceState())},evtREQOK:function(t){this.traceEvent("REQOK"),F.isDebugEnabled()&&F.debug("REQOK "+t);var e=!0;this.state.s_swt==1302&&t==this.swt_lastReqId?(this.state.s_swt=1303,this.state.traceState(),e=this.evtREQOK_TransportRegion(t)):this.state.s_bw==1202&&t==this.bw_lastReqId?(this.state.s_bw=1200,this.state.traceState(),e=this.evtREQOK_TransportRegion(t),this.evtCheckBW()):e=this.evtREQOK_Forward(t),e&&this.evtREQOK_TransportRegion(t)},evtREQOK_Forward:function(t){return!0},evtREQOK_TransportRegion:function(t){var e=this.state.s_w;if((e!=null?e.p:null)==300)this.state.s_w.p=300,this.state.traceState(),this.doREQOK(t),this.evtRestartKeepalive();else{var e=this.state.s_ws;if((e!=null?e.p:null)==510)this.state.s_ws.p=510,this.state.traceState(),this.doREQOK(t),this.evtRestartKeepalive();else{var e=this.state.s_wp;(e!=null?e.c:null)==620?(this.state.s_wp.c=620,this.state.traceState(),this.doREQOK(t)):this.state.s_ctrl==1102&&(this.state.s_ctrl=1102,this.state.traceState(),this.doREQOK(t))}}return!1},evtREQERR:function(t,e,n){this.traceEvent("REQERR"),F.isDebugEnabled()&&F.debug("REQERR "+t+" "+e+" "+n);var a=!0;this.state.s_swt==1302&&t==this.swt_lastReqId?(this.state.s_swt=1301,this.state.traceState(),a=this.evtREQERR_TransportRegion(t,e,n)):this.state.s_bw==1202&&t==this.bw_lastReqId?(this.state.s_bw=1200,this.state.traceState(),a=this.evtREQERR_TransportRegion(t,e,n),this.evtCheckBW()):a=this.evtREQERR_Forward(t,e,n),a&&this.evtREQERR_TransportRegion(t,e,n)},evtREQERR_Forward:function(t,e,n){return!0},evtREQERR_TransportRegion:function(t,e,n){var a=L.standardError(e,n),h=Ut.TC_standardError(e,n),_=this.state.s_w;if((_!=null?_.p:null)==300)switch(e){case 20:this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.reqerr."+e;var v=this.randomGenerator(this.options.firstRetryMaxDelay);this.state.clear_w(),this.state.goto_m_from_session(113),this.exit_w(),this.evtEndSession(),this.evtRetry(L.standardError(e,n),v),this.schedule_evtRetryTimeout(v);break;case 11:case 65:case 67:this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_REQERR(e,n),this.state.clear_w(),this.state.goto_m_from_session(100),this.exit_w(),this.evtEndSession(),this.evtTerminate(h);break;default:this.state.s_w.p=300,this.state.traceState(),this.doREQERR(t,e,n),this.evtRestartKeepalive()}else{var _=this.state.s_ws;if((_!=null?_.p:null)==510)switch(e){case 20:this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.reqerr."+e+")",this.state.goto_m_from_ws(113),this.exit_ws_to_m(),this.entry_m113(a);break;case 11:case 65:case 67:this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_REQERR(e,n),this.state.goto_m_from_ws(100),this.exit_ws_to_m(),this.evtTerminate(h);break;default:this.state.s_ws.p=510,this.state.traceState(),this.doREQERR(t,e,n),this.evtRestartKeepalive()}else{var _=this.state.s_wp;if((_!=null?_.c:null)==620)switch(e){case 20:this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="ws.reqerr."+e,this.state.goto_m_from_wp(113),this.exit_wp_to_m(),this.entry_m113(a);break;case 11:case 65:case 67:this.disposeWS(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_REQERR(e,n),this.state.goto_m_from_wp(100),this.exit_wp_to_m(),this.evtTerminate(h);break;default:this.state.s_wp.c=620,this.state.traceState(),this.doREQERR(t,e,n)}else if(this.state.s_ctrl==1102)switch(e){case 20:this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="http.reqerr."+e,this.state.goto_m_from_ctrl(113),this.exit_ctrl_to_m(),this.entry_m113(a);break;case 11:case 65:case 67:this.disposeHTTP(),this.notifyStatus("DISCONNECTED"),this.notifyServerError_REQERR(e,n),this.state.goto_m_from_ctrl(100),this.exit_ctrl_to_m(),this.evtTerminate(h);break;default:this.state.s_ctrl=1102,this.state.traceState(),this.doREQERR(t,e,n)}}}return!1},evtPROG:function(t){this.traceEvent("PROG");var e=L.prog_mismatch(this.rec_serverProg,t);F.isDebugEnabled()&&F.debug("PROG "+t);var n=this.state.s_w;if((n!=null?n.p:null)==300)t!=this.rec_serverProg?(this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="prog.mismatch."+t+"."+this.rec_serverProg,this.state.clear_w(),this.state.goto_m_from_session(113),this.exit_w(),this.evtEndSession(),this.entry_m113(e)):(this.state.s_w.p=300,this.state.traceState(),this.evtRestartKeepalive());else if(this.state.s_tr==220)t!=this.rec_serverProg?(this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="prog.mismatch."+t+"."+this.rec_serverProg,this.state.goto_m_from_session(113),this.cancel_evtTransportTimeout(),this.evtEndSession(),this.entry_m113(e)):(this.state.s_tr=220,this.state.traceState());else if(this.state.s_tr==230)t!=this.rec_serverProg?(this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="prog.mismatch."+t+"."+this.rec_serverProg,this.state.goto_m_from_session(113),this.cancel_evtTransportTimeout(),this.evtEndSession(),this.entry_m113(e)):(this.state.s_tr=230,this.state.traceState());else{var n=this.state.s_ws;if((n!=null?n.p:null)==510)t!=this.rec_serverProg?(this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="prog.mismatch."+t+"."+this.rec_serverProg,this.state.goto_m_from_ws(113),this.exit_ws_to_m(),this.entry_m113(e)):(this.state.s_ws.p=510,this.state.traceState(),this.evtRestartKeepalive());else{var n=this.state.s_wp;if((n!=null?n.p:null)==611)t!=this.rec_serverProg?(this.disposeWS(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="prog.mismatch."+t+"."+this.rec_serverProg,this.state.goto_m_from_wp(113),this.exit_wp_to_m(),this.entry_m113(e)):(this.state.s_wp.p=611,this.state.traceState());else{var n=this.state.s_hs;if((n!=null?n.p:null)==810)t!=this.rec_serverProg?(this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="prog.mismatch."+t+"."+this.rec_serverProg,this.state.goto_m_from_hs(113),this.exit_hs_to_m(),this.entry_m113(e)):(this.state.s_hs.p=810,this.state.traceState(),this.evtRestartKeepalive());else{var n=this.state.s_hp;(n!=null?n.m:null)==901?t!=this.rec_serverProg?(this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="prog.mismatch."+t+"."+this.rec_serverProg,this.state.goto_m_from_hp(113),this.exit_hp_to_m(),this.entry_m113(e)):(this.state.s_hp.m=901,this.state.traceState()):this.state.s_rec==1001&&(t>this.rec_clientProg?(this.disposeHTTP(),this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="prog.mismatch."+t+"."+this.rec_serverProg,this.state.goto_m_from_rec(113),this.exit_rec_to_m(),this.entry_m113(e)):(this.state.s_rec=1001,this.state.traceState(),this.doPROG(t)))}}}}},evtLOOP:function(t){this.traceEvent("LOOP"),F.isDebugEnabled()&&F.debug("LOOP "+t);var e=this.state.s_w;if((e!=null?e.p:null)==300)this.closeWS(),this.cause="ws.loop",this.state.clear_w(),this.state.s_tr=200,this.state.traceState(),this.exit_w(),this.evtSwitchTransport();else if(this.state.s_tr==220)this.closeHTTP(),this.cause="http.loop",this.state.s_tr=200,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtSwitchTransport();else if(this.state.s_tr==230)this.closeHTTP(),this.cause="ttl.loop",this.state.s_tr=200,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtSwitchTransport();else{var e=this.state.s_ws;if((e!=null?e.p:null)==510)this.closeWS(),this.cause="ws.loop",this.state.clear_ws(),this.state.s_tr=200,this.state.traceState(),this.exit_ws(),this.evtSwitchTransport();else{var e=this.state.s_wp;if((e!=null?e.p:null)==611)this.isSwitching()?(this.closeWS(),this.cause="ws.loop",this.state.clear_wp(),this.state.s_tr=200,this.state.traceState(),this.exit_wp(),this.evtSwitchTransport()):(this.doLOOP(t),this.state.s_wp.p=612,this.state.traceState(),this.cancel_evtIdleTimeout(),this.schedule_evtPollingTimeout(this.options.pollingInterval));else{var e=this.state.s_hs;if((e!=null?e.p:null)==810)this.closeHTTP(),this.cause="http.loop",this.state.s_hs.p=811,this.state.traceState(),this.evtSwitchTransport();else{var e=this.state.s_hp;(e!=null?e.m:null)==901?this.isSwitching()?(this.closeHTTP(),this.state.s_hp.m=904,this.state.traceState(),this.cancel_evtIdleTimeout(),this.evtSwitchTransport()):(this.doLOOP(t),this.closeHTTP(),this.state.s_hp.m=902,this.state.traceState(),this.cancel_evtIdleTimeout(),this.schedule_evtPollingTimeout(this.options.pollingInterval)):this.state.s_rec==1001&&(this.closeHTTP(),this.cause="recovery.loop",this.state.goto_200_from_rec(),this.exit_rec(),this.evtSwitchTransport())}}}}},evtCONOK:function(t,e,n,a){if(this.traceEvent("CONOK"),F.isDebugEnabled()&&F.debug("CONOK "+t+" "+e+" "+n+" "+a),this.state.s_m==122)this.doCONOK_CreateWS(t,e,n,a),this.resetCurrentRetryDelay(),this.notifyStatus("CONNECTED:WS-STREAMING"),this.state.s_m=150,this.state.s_tr=210,this.state.s_w=new ms(300,310,340),this.state.s_rhb=320,this.state.s_slw=330,this.state.s_swt=1300,this.state.s_bw=1200,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtSendPendingControls(),this.evtSendPendingMessages(),this.evtStartSession(),this.schedule_evtKeepaliveTimeout(M.sure(this.keepaliveInterval)),this.evtSelectRhb(),this.evtCheckTransport(),this.evtCheckBW();else if(this.state.s_m==130)this.doCONOK_CreateHTTP(t,e,n,a),this.resetCurrentRetryDelay(),this.notifyStatus("CONNECTED:STREAM-SENSING"),this.state.s_m=150,this.state.s_tr=220,this.state.s_swt=1300,this.state.s_bw=1200,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtStartSession(),this.schedule_evtTransportTimeout(this.options.retryDelay),this.evtCheckTransport(),this.evtCheckBW();else if(this.state.s_m==140)this.doCONOK_CreateHTTP(t,e,n,a),this.resetCurrentRetryDelay(),this.notifyStatus("CONNECTED:STREAM-SENSING"),this.state.s_m=150,this.state.s_tr=230,this.state.s_swt=1300,this.state.s_bw=1200,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtStartSession(),this.schedule_evtTransportTimeout(this.options.retryDelay),this.evtCheckTransport(),this.evtCheckBW();else{var h=this.state.s_ws;if((h!=null?h.m:null)==502)this.doCONOK_BindWS_Streaming(t,e,n,a),this.notifyStatus("CONNECTED:WS-STREAMING"),this.state.s_ws.m=503,this.state.s_ws.p=510,this.state.s_ws.k=520,this.state.s_ws.s=550,this.state.s_rhb=320,this.state.s_slw=330,this.state.traceState(),this.cancel_evtTransportTimeout(),this.evtSendPendingControls(),this.evtSendPendingMessages(),this.schedule_evtKeepaliveTimeout(M.sure(this.keepaliveInterval)),this.evtSelectRhb();else{var h=this.state.s_wp;if((h!=null?h.p:null)==610)this.doCONOK_BindWS_Polling(t,e,n,a),this.notifyStatus("CONNECTED:WS-POLLING"),this.state.s_wp.p=611,this.state.traceState();else{var h=this.state.s_wp;if((h!=null?h.p:null)==613)this.doCONOK_BindWS_Polling(t,e,n,a),this.state.s_wp.p=611,this.state.traceState();else{var h=this.state.s_hs;if((h!=null?h.m:null)==800)this.doCONOK_BindHTTP_Streaming(t,e,n,a),this.notifyStatus("CONNECTED:HTTP-STREAMING"),this.state.s_hs.m=802,this.state.s_hs.p=810,this.state.s_hs.k=820,this.state.s_rhb=320,this.state.s_slw=330,this.state.traceState(),this.cancel_evtTransportTimeout(),this.schedule_evtKeepaliveTimeout(M.sure(this.keepaliveInterval)),this.evtSelectRhb();else{var h=this.state.s_hs;if((h!=null?h.m:null)==801)this.doCONOK_BindHTTP_Streaming(t,e,n,a),this.notifyStatus("CONNECTED:HTTP-STREAMING"),this.state.s_hs.m=802,this.state.s_hs.p=810,this.state.s_hs.k=820,this.state.s_rhb=320,this.state.s_slw=330,this.state.traceState(),this.cancel_evtTransportTimeout(),this.schedule_evtKeepaliveTimeout(M.sure(this.keepaliveInterval)),this.evtSelectRhb();else{var h=this.state.s_hp;if((h!=null?h.m:null)==900)this.doCONOK_BindHTTP_Polling(t,e,n,a),this.notifyStatus("CONNECTED:HTTP-POLLING"),this.state.s_hp.m=901,this.state.traceState();else{var h=this.state.s_hp;(h!=null?h.m:null)==903&&(this.doCONOK_BindHTTP_Polling(t,e,n,a),this.state.s_hp.m=901,this.state.traceState())}}}}}}}},evtSERVNAME:function(t){this.traceEvent("SERVNAME"),F.isDebugEnabled()&&F.debug("SERVNAME "+t),this.state.inPushing()&&(this.doSERVNAME(t),this.state.inStreaming()&&this.evtRestartKeepalive())},evtCLIENTIP:function(t){this.traceEvent("CLIENTIP"),F.isDebugEnabled()&&F.debug("CLIENTIP "+t),this.state.inPushing()&&(this.doCLIENTIP(t),this.state.inStreaming()&&this.evtRestartKeepalive())},evtCONS:function(t){this.traceEvent("CONS"),F.isDebugEnabled()&&F.debug("CONS "+f.string(t)),this.state.inPushing()&&(this.doCONS(t),this.state.inStreaming()&&this.evtRestartKeepalive())},evtPROBE:function(){this.traceEvent("PROBE"),F.isDebugEnabled()&&F.debug("PROBE"),this.clientEventDispatcher.onServerKeepalive(),this.state.inPushing()&&this.state.inStreaming()&&this.evtRestartKeepalive()},evtNOOP:function(){this.traceEvent("NOOP"),this.state.inPushing()&&this.state.inStreaming()&&this.evtRestartKeepalive()},evtSYNC:function(t){this.traceEvent("SYNC"),F.isDebugEnabled()&&F.debug("SYNC "+t);var e=!0,n,a,h=this.state.s_w;if((h!=null?h.p:null)!=300){var h=this.state.s_ws;a=(h!=null?h.p:null)==510}else a=!0;if(a)n=!0;else{var a=this.state.s_hs;n=(a!=null?a.p:null)==810}if(n)e=this.evtSYNC_PushingRegion(t),this.evtRestartKeepalive();else{var n,a;if(this.state.s_tr==220||this.state.s_tr==230)a=!0;else{var h=this.state.s_wp;a=(h!=null?h.p:null)==611}if(a)n=!0;else{var a=this.state.s_hp;n=(a!=null?a.m:null)==901}(n||this.state.s_rec==1001)&&(e=this.evtSYNC_PushingRegion(t))}e&&this.evtSYNC_PushingRegion(t)},evtSYNC_PushingRegion:function(t){var e=t*1e3;if(this.state.s_slw!=null){var n=this.state.s_slw;if(n!=null)switch(n){case 330:this.doSYNC(e),this.state.s_slw=331,this.state.traceState();break;case 331:var a=this.doSYNC_G(e);this.state.s_slw=332,this.state.traceState(),this.evtCheckAvg(a);break;case 333:var a=this.doSYNC_NG(e);this.state.s_slw=332,this.state.traceState(),this.evtCheckAvg(a);break}}return!1},evtMSGDONE:function(t,e,n){this.traceEvent("MSGDONE"),F.isDebugEnabled()&&F.debug("MSGDONE "+t+" "+e+" "+n),this.state.inPushing()&&(this.isFreshData()?(this.doMSGDONE(t,e,n),this.state.inStreaming()&&this.evtRestartKeepalive()):(this.onStaleData(),this.state.inStreaming()&&this.evtRestartKeepalive()))},evtMSGFAIL:function(t,e,n,a){this.traceEvent("MSGFAIL"),F.isDebugEnabled()&&F.debug("MSGFAIL "+t+" "+e+" "+n+" "+a),this.state.inPushing()&&(this.isFreshData()?(this.doMSGFAIL(t,e,n,a),this.state.inStreaming()&&this.evtRestartKeepalive()):(this.onStaleData(),this.state.inStreaming()&&this.evtRestartKeepalive()))},evtU:function(t,e,n,a){this.traceEvent("U"),F.isDebugEnabled()&&F.debug(""+a),this.state.inPushing()&&(this.isFreshData()?(this.doU(t,e,n),this.state.inStreaming()&&this.evtRestartKeepalive()):(this.onStaleData(),this.state.inStreaming()&&this.evtRestartKeepalive()))},evtSUBOK:function(t,e,n){this.traceEvent("SUBOK"),F.isDebugEnabled()&&F.debug("SUBOK "+t+" "+e+" "+n),this.state.inPushing()&&(this.isFreshData()?(this.doSUBOK(t,e,n),this.state.inStreaming()&&this.evtRestartKeepalive()):(this.onStaleData(),this.state.inStreaming()&&this.evtRestartKeepalive()))},evtSUBCMD:function(t,e,n,a,h){this.traceEvent("SUBCMD"),F.isDebugEnabled()&&F.debug("SUBCMD "+t+" "+e+" "+n+" "+a+" "+h),this.state.inPushing()&&(this.isFreshData()?(this.doSUBCMD(t,e,n,a,h),this.state.inStreaming()&&this.evtRestartKeepalive()):(this.onStaleData(),this.state.inStreaming()&&this.evtRestartKeepalive()))},evtUNSUB:function(t){this.traceEvent("UNSUB"),F.isDebugEnabled()&&F.debug("UNSUB "+t),this.state.inPushing()&&(this.isFreshData()?(this.doUNSUB(t),this.state.inStreaming()&&this.evtRestartKeepalive()):(this.onStaleData(),this.state.inStreaming()&&this.evtRestartKeepalive()))},evtEOS:function(t,e){this.traceEvent("EOS"),F.isDebugEnabled()&&F.debug("EOS "+t+" "+e),this.state.inPushing()&&(this.isFreshData()?(this.doEOS(t,e),this.state.inStreaming()&&this.evtRestartKeepalive()):(this.onStaleData(),this.state.inStreaming()&&this.evtRestartKeepalive()))},evtCS:function(t,e){this.traceEvent("CS"),F.isDebugEnabled()&&F.debug("CS "+t+" "+e),this.state.inPushing()&&(this.isFreshData()?(this.doCS(t,e),this.state.inStreaming()&&this.evtRestartKeepalive()):(this.onStaleData(),this.state.inStreaming()&&this.evtRestartKeepalive()))},evtOV:function(t,e,n){this.traceEvent("OV"),F.isDebugEnabled()&&F.debug("OV "+t+" "+e+" "+n),this.state.inPushing()&&(this.isFreshData()?(this.doOV(t,e,n),this.state.inStreaming()&&this.evtRestartKeepalive()):(this.onStaleData(),this.state.inStreaming()&&this.evtRestartKeepalive()))},evtCONF:function(t,e){this.traceEvent("CONF"),F.isDebugEnabled()&&F.debug("CONF "+t+" "+f.string(e)),this.state.inPushing()&&(this.isFreshData()?(this.doCONF(t,e),this.state.inStreaming()&&this.evtRestartKeepalive()):(this.onStaleData(),this.state.inStreaming()&&this.evtRestartKeepalive()))},evtCheckAvg:function(t){if(this.traceEvent("check.avg"),this.state.s_slw==332)switch(t._hx_index){case 0:this.state.s_slw=331,this.state.traceState();break;case 1:this.state.s_slw=333,this.state.traceState();break;case 2:this.disableStreaming(),this.cause="slow",this.state.s_slw=334,this.state.traceState(),this.evtForcePolling();break}},evtSendPendingControls:function(){this.traceEvent("send.pending.controls");var t=this.getPendingControls(),e=this.state.s_w;if((e!=null?e.s:null)==340&&!p.empty(t))this.sendPengingControlsWS(t),this.state.s_w.s=340,this.state.traceState(),this.evtRestartHeartbeat();else{var e=this.state.s_ws;if((e!=null?e.s:null)==550&&!p.empty(t))this.sendPengingControlsWS(t),this.state.s_ws.s=550,this.state.traceState(),this.evtRestartHeartbeat();else{var e=this.state.s_wp;(e!=null?e.s:null)==630&&!p.empty(t)&&(this.sendPengingControlsWS(t),this.state.s_wp.s=630,this.state.traceState())}}},evtSendPendingMessages:function(){this.traceEvent("send.pending.messages");var t=this.state.s_w;if((t!=null?t.s:null)==340&&p.exists(this.messageManagers,function(e){return e.isPending()}))this.sendPendingMessagesWS(),this.state.s_w.s=340,this.state.traceState(),this.genAckMessagesWS(),this.evtRestartHeartbeat();else{var t=this.state.s_ws;if((t!=null?t.s:null)==550&&p.exists(this.messageManagers,function(n){return n.isPending()}))this.sendPendingMessagesWS(),this.state.s_ws.s=550,this.state.traceState(),this.genAckMessagesWS(),this.evtRestartHeartbeat();else{var t=this.state.s_wp;(t!=null?t.s:null)==630&&p.exists(this.messageManagers,function(a){return a.isPending()})&&(this.sendPendingMessagesWS(),this.state.s_wp.s=630,this.state.traceState(),this.genAckMessagesWS())}}},evtSelectRhb:function(){this.traceEvent("select.rhb"),this.state.s_rhb==320&&(this.rhb_grantedInterval==0?this.options.reverseHeartbeatInterval==0?(this.state.s_rhb=321,this.state.traceState()):(this.rhb_currentInterval=this.options.reverseHeartbeatInterval,this.state.s_rhb=322,this.state.traceState(),this.schedule_evtRhbTimeout(this.rhb_currentInterval)):this.options.reverseHeartbeatInterval>0&&this.options.reverseHeartbeatInterval<M.sure(this.rhb_grantedInterval)?(this.rhb_currentInterval=this.options.reverseHeartbeatInterval,this.state.s_rhb=323,this.state.traceState(),this.schedule_evtRhbTimeout(this.rhb_currentInterval)):(this.rhb_currentInterval=this.rhb_grantedInterval,this.state.s_rhb=323,this.state.traceState(),this.schedule_evtRhbTimeout(M.sure(this.rhb_currentInterval))))},evtExtSetReverseHeartbeatInterval:function(){if(this.traceEvent("setReverseHeartbeatInterval"),this.state.s_rhb!=null){var t=this.state.s_rhb;if(t!=null)switch(t){case 321:this.options.reverseHeartbeatInterval!=0&&(this.rhb_currentInterval=this.options.reverseHeartbeatInterval,this.state.s_rhb=322,this.state.traceState(),this.schedule_evtRhbTimeout(this.rhb_currentInterval));break;case 322:this.options.reverseHeartbeatInterval==0?(this.state.s_rhb=321,this.state.traceState(),this.cancel_evtRhbTimeout()):(this.rhb_currentInterval=this.options.reverseHeartbeatInterval,this.state.s_rhb=322,this.state.traceState());break;case 323:this.options.reverseHeartbeatInterval>0&&this.options.reverseHeartbeatInterval<M.sure(this.rhb_grantedInterval)?(this.rhb_currentInterval=this.options.reverseHeartbeatInterval,this.state.s_rhb=323,this.state.traceState()):(this.rhb_currentInterval=this.rhb_grantedInterval,this.state.s_rhb=323,this.state.traceState());break}}},evtRestartHeartbeat:function(){if(this.traceEvent("restart.heartbeat"),this.state.s_rhb!=null){var t=this.state.s_rhb;if(t!=null)switch(t){case 322:this.state.s_rhb=322,this.state.traceState(),this.cancel_evtRhbTimeout(),this.schedule_evtRhbTimeout(M.sure(this.rhb_currentInterval));break;case 323:this.state.s_rhb=323,this.state.traceState(),this.cancel_evtRhbTimeout(),this.schedule_evtRhbTimeout(M.sure(this.rhb_currentInterval));break;case 324:this.rhb_grantedInterval==0?this.options.reverseHeartbeatInterval!=0?(this.rhb_currentInterval=this.options.reverseHeartbeatInterval,this.state.s_rhb=322,this.state.traceState(),this.schedule_evtRhbTimeout(this.rhb_currentInterval)):(this.state.s_rhb=321,this.state.traceState()):this.options.reverseHeartbeatInterval>0&&this.options.reverseHeartbeatInterval<M.sure(this.rhb_grantedInterval)?(this.rhb_currentInterval=this.options.reverseHeartbeatInterval,this.state.s_rhb=323,this.state.traceState(),this.schedule_evtRhbTimeout(this.rhb_currentInterval)):(this.rhb_currentInterval=this.rhb_grantedInterval,this.state.s_rhb=323,this.state.traceState(),this.schedule_evtRhbTimeout(M.sure(this.rhb_currentInterval)));break}}},evtRhbTimeout:function(){this.traceEvent("rhb.timeout"),this.state.s_rhb==322?(this.state.s_rhb=324,this.state.traceState(),this.cancel_evtRhbTimeout(),this.evtSendHeartbeat()):this.state.s_rhb==323&&(this.state.s_rhb=324,this.state.traceState(),this.cancel_evtRhbTimeout(),this.evtSendHeartbeat())},evtDisposeCtrl:function(){this.traceEvent("du:dispose.ctrl"),this.disposeCtrl()},evtStartRecovery:function(){this.traceEvent("start.recovery"),this.state.s_rec==1e3&&(this.recoverTs=u.now()/1e3,this.state.s_rec=1e3,this.state.traceState())},evtRecoveryTimeout:function(){this.traceEvent("recovery.timeout"),this.state.s_rec==1e3&&(this.sendRecovery(),this.state.s_rec=1001,this.state.traceState(),this.cancel_evtRecoveryTimeout(),this.schedule_evtTransportTimeout(this.options.retryDelay))},evtCheckRecoveryTimeout:function(t){if(this.traceEvent("check.recovery.timeout"),this.state.s_rec==1002){var e=this.options.retryDelay;if(Te.plus(this.connectTs,e)<Te.plus(this.recoverTs,this.options.sessionRecoveryTimeout)){this.cause="recovery.error";var n=Te.minus(u.now()/1e3,this.connectTs),a=e>mi.toMillis(n)?dt.minus(e,mi.toMillis(n)):dt.ZERO;this.state.s_rec=1003,this.state.traceState(),$.isErrorEnabled()&&(a>0?$.isErrorEnabled()&&$.error("Retrying recovery in "+a+"ms. Cause: "+f.string(t)):$.isErrorEnabled()&&$.error("Retrying recovery. Cause: "+f.string(t))),this.schedule_evtRetryTimeout(a)}else this.notifyStatus("DISCONNECTED:WILL-RETRY"),this.cause="recovery.timeout",this.state.goto_m_from_rec(113),this.exit_rec_to_m(),this.entry_m113(L.recovery_timeout)}},evtCreate:function(){this.traceEvent("du:create"),this.state.s_du==20?(this.state.s_du=21,this.state.traceState()):this.state.s_du==23&&(this.state.s_du=21,this.state.traceState())},evtCheckTransport:function(){if(this.traceEvent("check.transport"),this.state.s_swt==1300)if(this.state.s_tr==220||this.state.s_tr==230||this.state.s_tr==260)this.state.s_swt=1301,this.state.traceState();else{var t=this.getBestForBinding();t==Q.BFB_ws_streaming&&(this.state.s_tr==210||this.state.s_tr==240)||t==Q.BFB_http_streaming&&this.state.s_tr==270&&this.state.s_h==710||t==Q.BFB_ws_polling&&this.state.s_tr==250||t==Q.BFB_http_polling&&this.state.s_tr==270&&this.state.s_h==720?(this.state.s_swt=1301,this.state.traceState()):(this.state.s_swt=1302,this.state.traceState(),this.evtSendControl(M.sure(this.switchRequest)))}},evtCheckBW:function(){this.traceEvent("check.bw"),this.state.s_bw==1200&&(this.bw_requestedMaxBandwidth!=this.options.requestedMaxBandwidth&&this.options.realMaxBandwidth!=ss.BWUnmanaged?(this.bw_requestedMaxBandwidth=this.options.requestedMaxBandwidth,this.state.s_bw=1202,this.state.traceState(),this.evtSendControl(M.sure(this.constrainRequest))):(this.state.s_bw=1201,this.state.traceState()))},evtCheckCtrlRequests:function(){if(this.traceEvent("check.ctrl.requests"),this.state.s_ctrl==1100){var t=this.getPendingControls();p.empty(t)?p.exists(this.messageManagers,function(e){return e.isPending()})?(this.sendPendingMessagesHTTP(),this.state.s_ctrl=1102,this.state.traceState(),this.evtRestartHeartbeat(),this.schedule_evtCtrlTimeout(this.options.retryDelay)):this.state.s_rhb==324?(this.sendHeartbeatHTTP(),this.state.s_ctrl=1102,this.state.traceState(),this.evtRestartHeartbeat(),this.schedule_evtCtrlTimeout(this.options.retryDelay)):(this.state.s_ctrl=1101,this.state.traceState()):(this.sendPendingControlsHTTP(t),this.state.s_ctrl=1102,this.state.traceState(),this.evtRestartHeartbeat(),this.schedule_evtCtrlTimeout(this.options.retryDelay))}},evtCtrlDone:function(){this.traceEvent("ctrl.done"),this.state.s_ctrl==1102&&(this.closeCtrl(),this.state.s_ctrl=1100,this.state.traceState(),this.cancel_evtCtrlTimeout(),this.evtCheckCtrlRequests())},evtCtrlError:function(){if(this.traceEvent("ctrl.error"),this.state.s_ctrl==1102){this.disposeCtrl();var t=this.waitingInterval(this.options.retryDelay,this.ctrl_connectTs);this.state.s_ctrl=1103,this.state.traceState(),this.cancel_evtCtrlTimeout(),this.schedule_evtCtrlTimeout(t)}},evtCtrlTimeout:function(){if(this.traceEvent("ctrl.timeout"),this.state.s_ctrl!=null)if(this.state.s_ctrl==1102){this.disposeCtrl();var t=this.waitingInterval(this.options.retryDelay,this.ctrl_connectTs);this.state.s_ctrl=1103,this.state.traceState(),this.cancel_evtCtrlTimeout(),this.schedule_evtCtrlTimeout(t)}else this.state.s_ctrl==1103&&(this.state.s_ctrl=1100,this.state.traceState(),this.cancel_evtCtrlTimeout(),this.evtCheckCtrlRequests())},evtSendControl:function(t){this.traceEvent("send.control");var e=this.state.s_w;if((e!=null?e.s:null)==340)this.sendControlWS(t),this.state.s_w.s=340,this.state.traceState(),this.evtRestartHeartbeat();else{var e=this.state.s_ws;if((e!=null?e.s:null)==550)this.sendControlWS(t),this.state.s_ws.s=550,this.state.traceState(),this.evtRestartHeartbeat();else{var e=this.state.s_wp;(e!=null?e.s:null)==630?(this.sendControlWS(t),this.state.s_wp.s=630,this.state.traceState()):this.state.s_ctrl==1101&&(this.state.s_ctrl=1100,this.state.traceState(),this.evtCheckCtrlRequests())}}},evtSendHeartbeat:function(){this.traceEvent("send.heartbeat");var t=this.state.s_w;if((t!=null?t.s:null)==340)this.sendHeartbeatWS(),this.state.s_w.s=340,this.state.traceState(),this.evtRestartHeartbeat();else{var t=this.state.s_ws;(t!=null?t.s:null)==550?(this.sendHeartbeatWS(),this.state.s_ws.s=550,this.state.traceState(),this.evtRestartHeartbeat()):this.state.s_ctrl==1101&&(this.state.s_ctrl=1100,this.state.traceState(),this.evtCheckCtrlRequests())}},evtStartSession:function(){this.traceEvent("du:start.session"),$.isInfoEnabled()&&$.info("Starting new session: "+this.sessionId),this.state.s_du==21&&(this.state.s_du=22,this.state.traceState())},evtEndSession:function(){$.isInfoEnabled()&&$.info("Destroying session: "+this.sessionId)},evtRetry:function(t,e){this.traceEvent("du:retry"),$.isErrorEnabled()&&(e!=null&&e>0?$.isErrorEnabled()&&$.error("Retrying connection in "+e+"ms. Cause: "+Qs(t)):$.isErrorEnabled()&&$.error("Retrying connection. Cause: "+Qs(t)));var n=!0;switch(this.state.s_du){case 21:this.resetSequenceMap(),this.state.s_du=23,this.state.traceState(),n=this.evtRetry_NextRegion(),this.genAbortMessages();break;case 22:this.disposeSession(),this.state.s_du=23,this.state.traceState(),n=this.evtRetry_NextRegion(),this.genAbortSubscriptions(),this.genAbortMessages();break}n&&this.evtRetry_NextRegion()},evtRetry_NextRegion:function(){return!1},evtTerminate:function(t){if(this.traceEvent("du:terminate"),$.isInfoEnabled()&&t._hx_index==2&&$.isInfoEnabled()&&$.info("Disconnected. Cause: Requested by user"),$.isErrorEnabled())switch(t._hx_index){case 0:$.isErrorEnabled()&&$.error("Disconnected. Cause: "+t.code+" - "+t.msg);break;case 1:$.isErrorEnabled()&&$.error("Disconnected. Cause: "+t.error);break}var e=!0;switch(this.state.s_du){case 20:this.disposeClient(),this.doUnistallPageLifecycle(),this.state.s_du=20,this.state.traceState(),e=this.evtTerminate_NextRegion(),this.genAbortMessages();break;case 21:this.disposeClient(),this.doUnistallPageLifecycle(),this.state.s_du=20,this.state.traceState(),e=this.evtTerminate_NextRegion(),this.genAbortMessages();break;case 22:this.disposeSession(),this.disposeClient(),this.doUnistallPageLifecycle(),this.state.s_du=20,this.state.traceState(),e=this.evtTerminate_NextRegion(),this.genAbortSubscriptions(),this.genAbortMessages();break;case 23:this.disposeClient(),this.doUnistallPageLifecycle(),this.state.s_du=20,this.state.traceState(),e=this.evtTerminate_NextRegion(),this.genAbortMessages();break}e&&this.evtTerminate_NextRegion()},evtTerminate_NextRegion:function(){return this.evtTerminate_NetworkReachabilityRegion()},evtTerminate_NetworkReachabilityRegion:function(){switch(this.state.s_nr){case 1410:case 1411:case 1412:var t=this.nr_reachabilityManager;this.nr_reachabilityManager=null,this.state.s_nr=1400,this.state.traceState(),t!=null&&t.stopListening();break}return!1},evtRetryTimeout:function(){switch(this.traceEvent("retry.timeout"),this.state.s_m){case 110:this.notifyStatus("CONNECTING"),this.sendCreateTTL(),this.state.s_m=140,this.state.traceState(),this.evtCreate(),this.schedule_evtTransportTimeout(6e4);break;case 111:this.notifyStatus("CONNECTING"),this.delayCounter.increase(),this.sendCreateTTL(),this.state.s_m=140,this.state.traceState(),this.cancel_evtRetryTimeout(),this.evtCreate(),this.schedule_evtTransportTimeout(6e4);break;case 112:this.delayCounter.increase(),this.state.s_m=116,this.state.traceState(),this.cancel_evtRetryTimeout(),this.evtSelectCreate();break;case 113:this.state.s_m=116,this.state.traceState(),this.cancel_evtRetryTimeout(),this.evtSelectCreate();break;case 115:this.state.s_m=116,this.state.traceState(),this.evtSelectCreate();break;case 150:this.state.s_rec==1003&&(this.sendRecovery(),this.state.s_rec=1001,this.state.traceState(),this.cancel_evtRetryTimeout(),this.schedule_evtTransportTimeout(this.options.retryDelay));break}},evtExtSetForcedTransport:function(){this.traceEvent("setForcedTransport"),this.state.s_swt==1301&&(this.state.s_swt=1300,this.state.traceState(),this.evtCheckTransport())},evtExtSetRequestedMaxBandwidth:function(){this.traceEvent("setRequestedMaxBandwidth"),this.state.s_bw==1201&&(this.state.s_bw=1200,this.state.traceState(),this.evtCheckBW())},evtForceSlowing:function(){this.traceEvent("force.slowing"),this.state.s_swt==1301&&(this.state.s_swt=1300,this.state.traceState(),this.evtCheckTransport())},evtForcePolling:function(){this.traceEvent("force.polling"),this.state.s_swt==1301&&(this.state.s_swt=1300,this.state.traceState(),this.evtCheckTransport())},evtSendMessage:function(t){this.traceEvent("send.message");var e=this.state.s_w;if((e!=null?e.s:null)==340)this.sendMsgWS(t),this.state.s_w.s=340,this.state.traceState(),t.evtWSSent(),this.evtRestartHeartbeat();else{var e=this.state.s_ws;if((e!=null?e.s:null)==550)this.sendMsgWS(t),this.state.s_ws.s=550,this.state.traceState(),t.evtWSSent(),this.evtRestartHeartbeat();else{var e=this.state.s_wp;(e!=null?e.s:null)==630?(this.sendMsgWS(t),this.state.s_wp.s=630,this.state.traceState(),t.evtWSSent()):this.state.s_ctrl==1101&&(this.state.s_ctrl=1100,this.state.traceState(),this.evtCheckCtrlRequests())}}},evtSwitchTransport:function(){this.traceEvent("switch.transport");var t=!0;(this.state.s_swt==1302||this.state.s_swt==1303)&&(this.state.s_swt=1300,this.state.traceState(),t=this.evtSwitchTransport_forwardToTransportRegion(),this.evtCheckTransport()),t&&this.evtSwitchTransport_forwardToTransportRegion()},evtSwitchTransport_forwardToTransportRegion:function(){var t=Ut.TC_otherError("Selected transport "+this.options.forcedTransport+" is not available");if(this.state.s_tr==200)switch(this.getBestForBinding()._hx_index){case 0:this.notifyStatus("DISCONNECTED"),this.state.goto_m_from_session(100),this.evtEndSession(),this.evtTerminate(t);break;case 1:this.openWS_Bind(),this.state.s_tr=240,this.state.s_ws=new he(500),this.state.traceState(),this.schedule_evtTransportTimeout(this.options.retryDelay);break;case 2:this.openWS_Bind(),this.state.s_tr=250,this.state.s_wp=new ps(600),this.state.traceState(),this.schedule_evtTransportTimeout(this.options.retryDelay);break;case 3:this.sendBindHTTP_Streaming(),this.state.s_tr=270,this.state.s_h=710,this.state.s_hs=new m(800),this.state.s_ctrl=1100,this.state.traceState(),this.evtCheckCtrlRequests(),this.schedule_evtTransportTimeout(this.options.retryDelay);break;case 4:this.sendBindHTTP_Polling(),this.state.s_tr=270,this.state.s_h=720,this.state.s_hp=new g(900),this.state.s_rhb=320,this.state.s_ctrl=1100,this.state.traceState(),this.evtCheckCtrlRequests(),this.schedule_evtIdleTimeout(dt.plus(M.sure(this.idleTimeout),this.options.retryDelay)),this.evtSelectRhb();break}else{var e=this.state.s_hs;if((e!=null?e.p:null)==811)switch(this.getBestForBinding()._hx_index){case 0:this.notifyStatus("DISCONNECTED"),this.state.goto_m_from_hs(100),this.exit_hs_to_m(),this.evtTerminate(t);break;case 1:this.openWS_Bind(),this.state.clear_hs(),this.state.s_h=null,this.state.s_ctrl=null,this.state.s_tr=240,this.state.s_ws=new he(500),this.state.traceState(),this.exit_hs(),this.exit_ctrl(),this.schedule_evtTransportTimeout(this.options.retryDelay);break;case 2:this.openWS_Bind(),this.state.clear_hs(),this.state.s_h=null,this.state.s_ctrl=null,this.state.s_tr=250,this.state.s_wp=new ps(600),this.state.traceState(),this.exit_hs(),this.exit_ctrl(),this.schedule_evtTransportTimeout(this.options.retryDelay);break;case 3:this.sendBindHTTP_Streaming(),this.state.s_hs=new m(800),this.state.traceState(),this.exit_hs(),this.schedule_evtTransportTimeout(this.options.retryDelay);break;case 4:this.sendBindHTTP_Polling(),this.state.clear_hs(),this.state.s_h=720,this.state.s_hp=new g(900),this.state.s_rhb=320,this.state.traceState(),this.exit_hs(),this.schedule_evtIdleTimeout(dt.plus(M.sure(this.idleTimeout),this.options.retryDelay)),this.evtSelectRhb();break}else{var e=this.state.s_hp;if((e!=null?e.m:null)==904)switch(this.getBestForBinding()._hx_index){case 0:this.notifyStatus("DISCONNECTED"),this.state.goto_m_from_hp(100),this.exit_hp_to_m(),this.evtTerminate(t);break;case 1:this.openWS_Bind(),this.state.clear_hp(),this.state.s_h=null,this.state.s_ctrl=null,this.state.s_tr=240,this.state.s_ws=new he(500),this.state.traceState(),this.exit_hp(),this.exit_ctrl(),this.schedule_evtTransportTimeout(this.options.retryDelay);break;case 2:this.openWS_Bind(),this.state.clear_hp(),this.state.s_h=null,this.state.s_ctrl=null,this.state.s_tr=250,this.state.s_wp=new ps(600),this.state.traceState(),this.exit_hp(),this.exit_ctrl(),this.schedule_evtTransportTimeout(this.options.retryDelay);break;case 3:this.sendBindHTTP_Streaming(),this.state.clear_hp(),this.state.s_h=710,this.state.s_hs=new m(800),this.state.traceState(),this.exit_hp(),this.schedule_evtTransportTimeout(this.options.retryDelay);break;case 4:this.sendBindHTTP_Polling(),this.state.s_hp=new g(900),this.state.s_rhb=320,this.state.traceState(),this.exit_hp(),this.schedule_evtIdleTimeout(dt.plus(M.sure(this.idleTimeout),this.options.retryDelay)),this.evtSelectRhb();break}}}return!1},onFreshData:function(){if(this.rec_serverProg!=this.rec_clientProg)throw new Y("Assertion failure: rec_serverProg == rec_clientProg");this.rec_serverProg+=1,this.rec_clientProg+=1},onStaleData:function(){if(this.rec_serverProg>=this.rec_clientProg)throw new Y("Assertion failure: rec_serverProg < rec_clientProg");this.rec_serverProg+=1},isFreshData:function(){return this.rec_serverProg==this.rec_clientProg},openWS:function(t,e){var n=this,a=function(v){Le(function(){n.lock.synchronized(function(){v.isDisposed()||n.evtWSOpen()})})},h=function(v,T){Le(function(){n.lock.synchronized(function(){if(!v.isDisposed())try{n.evtMessage(T)}catch(Z){var W=C.caught(Z);$.isErrorEnabled()&&$.error(""+W.get_message()+`
`+W.details()),n.evtExtDisconnect(Ut.TC_standardError(61,W.get_message()))}})})},_=function(v,T){Le(function(){n.lock.synchronized(function(){v.isDisposed()||n.evtTransportError()})})};return this.wsFactory(t,e,a,h,_)},openWS_Create:function(){this.connectTs=u.now()/1e3,this.serverInstanceAddress=this.getServerAddress(),this.ws=this.openWS(qt.build(this.serverInstanceAddress,"lightstreamer"),this.options.httpExtraHeaders)},openWS_Bind:function(){this.connectTs=u.now()/1e3,this.ws=this.openWS(qt.build(M.sure(this.serverInstanceAddress),"lightstreamer"),this.getHeadersForRequestOtherThanCreate())},sendCreateWS:function(){var t=new Pt;this.options.keepaliveInterval>0&&t.LS_keepalive_millis(this.options.keepaliveInterval),this.rhb_grantedInterval=this.options.reverseHeartbeatInterval,this.rhb_grantedInterval>0&&t.LS_inactivity_millis(this.rhb_grantedInterval),this.bw_requestedMaxBandwidth=this.options.requestedMaxBandwidth;var e=this.bw_requestedMaxBandwidth;e!=null&&e._hx_index==0&&t.LS_requested_max_bandwidth_Float(e.bw),this.details.adapterSet!=null&&t.LS_adapter_set(this.details.adapterSet),this.details.user!=null&&t.LS_user(this.details.user),t.LS_cid(In),this.sessionId!=null&&t.LS_old_session(this.sessionId),this.options.slowingEnabled||t.LS_send_sync(!1),this.cause!=null&&(t.LS_cause(this.cause),this.cause=null),F.isInfoEnabled()&&F.info("Sending session create: "+f.string(t)),this.details.password!=null&&t.LS_password(this.details.password),M.sure(this.ws).send("wsok"),M.sure(this.ws).send(`create_session\r
`+t.getEncodedString())},sendBindWS_Streaming:function(){var t=new Pt;t.LS_session(M.sure(this.sessionId)),this.options.keepaliveInterval>0&&t.LS_keepalive_millis(this.options.keepaliveInterval),this.rhb_grantedInterval=this.options.reverseHeartbeatInterval,this.rhb_grantedInterval>0&&t.LS_inactivity_millis(this.rhb_grantedInterval),this.options.slowingEnabled||t.LS_send_sync(!1),this.cause!=null&&(t.LS_cause(this.cause),this.cause=null),F.isInfoEnabled()&&F.info("Sending session bind: "+f.string(t)),M.sure(this.ws).send("wsok"),M.sure(this.ws).send(`bind_session\r
`+t.getEncodedString())},sendBindWS_FirstPolling:function(){var t=new Pt;t.LS_session(M.sure(this.sessionId)),t.LS_polling(!0),t.LS_polling_millis(this.options.pollingInterval),this.idleTimeout=this.options.idleTimeout,t.LS_idle_millis(this.idleTimeout),this.cause!=null&&(t.LS_cause(this.cause),this.cause=null),F.isInfoEnabled()&&F.info("Sending session bind: "+f.string(t)),M.sure(this.ws).send(`bind_session\r
`+t.getEncodedString())},sendBindWS_Polling:function(){var t=new Pt;t.LS_polling(!0),t.LS_polling_millis(this.options.pollingInterval),this.idleTimeout=this.options.idleTimeout,t.LS_idle_millis(this.idleTimeout),this.cause!=null&&(t.LS_cause(this.cause),this.cause=null),F.isInfoEnabled()&&F.info("Sending session bind: "+f.string(t)),M.sure(this.ws).send(`bind_session\r
`+t.getEncodedString())},sendDestroyWS:function(t){t==null&&(t="api");var e=new Pt;e.LS_reqId(this.generateFreshReqId()),e.LS_op("destroy"),e.LS_close_socket(!0),e.LS_cause(t),F.isInfoEnabled()&&F.info("Sending session destroy: "+f.string(e)),M.sure(this.ws).send(`control\r
`+e.getEncodedString())},sendHttpRequest:function(t,e,n){var a=this,h=function(v,T){Le(function(){a.lock.synchronized(function(){if(!v.isDisposed())try{a.evtMessage(T)}catch(Z){var W=C.caught(Z);$.isErrorEnabled()&&$.error(""+W.get_message()+`
`+W.details()),a.evtExtDisconnect(Ut.TC_standardError(61,W.get_message()))}})})},_=function(v,T){Le(function(){a.lock.synchronized(function(){v.isDisposed()||a.evtTransportError()})})};return this.httpFactory(t,e.getEncodedString(),n,h,_,function(v){})},sendCreateHTTP:function(){var t=new Pt;t.LS_polling(!0),t.LS_polling_millis(0),t.LS_idle_millis(0),this.bw_requestedMaxBandwidth=this.options.requestedMaxBandwidth;var e=this.bw_requestedMaxBandwidth;e!=null&&e._hx_index==0&&t.LS_requested_max_bandwidth_Float(e.bw),this.details.adapterSet!=null&&t.LS_adapter_set(this.details.adapterSet),this.details.user!=null&&t.LS_user(this.details.user),t.LS_cid(In),this.sessionId!=null&&t.LS_old_session(this.sessionId),this.cause!=null&&(t.LS_cause(this.cause),this.cause=null),F.isInfoEnabled()&&F.info("Sending session create: "+f.string(t)),this.details.password!=null&&t.LS_password(this.details.password),this.connectTs=u.now()/1e3,this.serverInstanceAddress=this.getServerAddress(),this.http=this.sendHttpRequest(qt.build(this.serverInstanceAddress,"/lightstreamer"+xr+"/create_session.txt?LS_protocol="+ws),t,this.options.httpExtraHeaders)},sendBindHTTP_Streaming:function(){var t=new Pt;t.LS_session(M.sure(this.sessionId)),t.LS_content_length(this.options.contentLength),this.options.keepaliveInterval>0&&t.LS_keepalive_millis(this.options.keepaliveInterval),this.rhb_grantedInterval=this.options.reverseHeartbeatInterval,this.rhb_grantedInterval>0&&t.LS_inactivity_millis(this.rhb_grantedInterval),this.options.slowingEnabled||t.LS_send_sync(!1),this.cause!=null&&(t.LS_cause(this.cause),this.cause=null),F.isInfoEnabled()&&F.info("Sending session bind: "+f.string(t)),this.connectTs=u.now()/1e3,this.http=this.sendHttpRequest(qt.build(M.sure(this.serverInstanceAddress),"/lightstreamer/bind_session.txt?LS_protocol="+ws),t,this.getHeadersForRequestOtherThanCreate())},sendBindHTTP_Polling:function(){var t=new Pt;t.LS_session(M.sure(this.sessionId)),t.LS_polling(!0),t.LS_polling_millis(this.options.pollingInterval),this.idleTimeout=this.options.idleTimeout,t.LS_idle_millis(this.idleTimeout),this.cause!=null&&(t.LS_cause(this.cause),this.cause=null),this.rhb_grantedInterval=0,F.isInfoEnabled()&&F.info("Sending session bind: "+f.string(t)),this.connectTs=u.now()/1e3,this.http=this.sendHttpRequest(qt.build(M.sure(this.serverInstanceAddress),"/lightstreamer/bind_session.txt?LS_protocol="+ws),t,this.getHeadersForRequestOtherThanCreate())},sendCreateTTL:function(){var t=new Pt;t.LS_ttl_millis("unlimited"),t.LS_polling(!0),t.LS_polling_millis(0),t.LS_idle_millis(0),this.bw_requestedMaxBandwidth=this.options.requestedMaxBandwidth;var e=this.bw_requestedMaxBandwidth;e!=null&&e._hx_index==0&&t.LS_requested_max_bandwidth_Float(e.bw),this.details.adapterSet!=null&&t.LS_adapter_set(this.details.adapterSet),this.details.user!=null&&t.LS_user(this.details.user),t.LS_cid(In),this.sessionId!=null&&t.LS_old_session(this.sessionId),this.cause!=null&&(t.LS_cause(this.cause),this.cause=null),F.isInfoEnabled()&&F.info("Sending session create: "+f.string(t)),this.details.password!=null&&t.LS_password(this.details.password),this.connectTs=u.now()/1e3,this.serverInstanceAddress=this.getServerAddress(),this.http=this.sendHttpRequest(qt.build(this.serverInstanceAddress,"/lightstreamer"+xr+"/create_session.txt?LS_protocol="+ws),t,this.options.httpExtraHeaders)},sendRecovery:function(){var t=new Pt;t.LS_session(M.sure(this.sessionId)),t.LS_recovery_from(this.rec_clientProg),t.LS_polling(!0),t.LS_polling_millis(0),t.LS_idle_millis(0),this.cause!=null&&(t.LS_cause(this.cause),this.cause=null),F.isInfoEnabled()&&F.info("Sending session recovery: "+f.string(t)),this.connectTs=u.now()/1e3,this.http=this.sendHttpRequest(qt.build(M.sure(this.serverInstanceAddress),"/lightstreamer/bind_session.txt?LS_protocol="+ws),t,this.getHeadersForRequestOtherThanCreate())},disposeWS:function(){this.ws!=null&&(this.ws.dispose(),this.ws=null)},closeWS:function(){this.ws!=null&&(this.ws.dispose(),this.ws=null)},suspendWS_Streaming:function(){$.isWarnEnabled()&&$.warn("Websocket suspended"),this.suspendedTransports.insert("WS-STREAMING")},disableWS:function(){$.isWarnEnabled()&&$.warn("Websocket disabled"),this.disabledTransports=this.disabledTransports.union(["WS-STREAMING","WS-POLLING"])},disableHTTP_Streaming:function(){$.isWarnEnabled()&&$.warn("HTTP streaming disabled"),this.disabledTransports=this.disabledTransports.union(["HTTP-STREAMING"])},disableStreaming:function(){$.isWarnEnabled()&&$.warn("Streaming disabled"),this.disabledTransports=this.disabledTransports.union(["WS-STREAMING","HTTP-STREAMING"])},enableAllTransports:function(){$.isInfoEnabled()&&(this.disabledTransports.count()>0||this.suspendedTransports.count()>0)&&$.isInfoEnabled()&&$.info("Transports enabled again."),this.disabledTransports=new Ct,this.suspendedTransports=new Ct},disposeHTTP:function(){this.http!=null&&(this.http.dispose(),this.http=null)},closeHTTP:function(){this.http!=null&&(this.http.dispose(),this.http=null)},disposeCtrl:function(){this.ctrl_http!=null&&(this.ctrl_http.dispose(),this.ctrl_http=null)},closeCtrl:function(){this.ctrl_http!=null&&(this.ctrl_http.dispose(),this.ctrl_http=null)},notifyStatus:function(t){var e=this.m_status;this.m_status=t,e!=t&&($.isInfoEnabled()&&$.info("Status: "+t),this.clientEventDispatcher.onStatusChange(t))},getBestForCreating:function(){if(this.getBestForBinding()._hx_index==0)return Ot.BFC_none;var t=this.options.forcedTransport,e=this.suspendedTransports.union(this.disabledTransports.toArray()),n=this.options.httpExtraHeaders,a=n==null||p.empty(n);if(t==null)return a?e.contains("WS-STREAMING")?Ot.BFC_http:Ot.BFC_ws:Ot.BFC_http;switch(t){case"WS":case"WS-STREAMING":return a?e.contains("WS-STREAMING")?Ot.BFC_http:Ot.BFC_ws:Ot.BFC_http;default:return Ot.BFC_http}},getBestForBinding:function(){var t=this.options.forcedTransport,e=this.disabledTransports,n=this.options.httpExtraHeaders,a=n==null||p.empty(n),h=this.options.httpExtraHeadersOnSessionCreationOnly;if(t==null)return a||h?e.contains("WS-STREAMING")?e.contains("HTTP-STREAMING")?e.contains("WS-POLLING")?Q.BFB_http_polling:Q.BFB_ws_polling:Q.BFB_http_streaming:Q.BFB_ws_streaming:e.contains("HTTP-STREAMING")?Q.BFB_http_polling:Q.BFB_http_streaming;switch(t){case"HTTP":return e.contains("HTTP-STREAMING")?Q.BFB_http_polling:Q.BFB_http_streaming;case"HTTP-POLLING":return Q.BFB_http_polling;case"HTTP-STREAMING":return e.contains("HTTP-STREAMING")?Q.BFB_none:Q.BFB_http_streaming;case"WS":return a||h?e.contains("WS-STREAMING")?e.contains("WS-POLLING")?Q.BFB_none:Q.BFB_ws_polling:Q.BFB_ws_streaming:Q.BFB_none;case"WS-POLLING":return a||h?e.contains("WS-POLLING")?Q.BFB_none:Q.BFB_ws_polling:Q.BFB_none;case"WS-STREAMING":return a||h?e.contains("WS-STREAMING")?Q.BFB_none:Q.BFB_ws_streaming:Q.BFB_none}},resetCurrentRetryDelay:function(){this.delayCounter.reset(this.options.retryDelay)},notifyServerErrorIfCauseIsError:function(t){switch(t._hx_index){case 0:this.clientEventDispatcher.onServerError(t.code,t.msg);break;case 1:this.clientEventDispatcher.onServerError(61,t.error);break}},notifyServerError_CONERR:function(t,e){this.clientEventDispatcher.onServerError(t,e)},notifyServerError_END:function(t,e){0<t&&t<30||t>39?this.clientEventDispatcher.onServerError(39,e):this.clientEventDispatcher.onServerError(t,e)},notifyServerError_ERROR:function(t,e){this.clientEventDispatcher.onServerError(t,e)},notifyServerError_REQERR:function(t,e){t==11?this.clientEventDispatcher.onServerError(21,e):this.clientEventDispatcher.onServerError(t,e)},doCONOK:function(t,e,n,a,h){this.sessionId=t,this.details.setSessionId(t),this.requestLimit=e,n!=null?(this.keepaliveInterval=n,this.options.setKeepaliveInterval(n)):a!=null&&(this.idleTimeout=a,this.options.setIdleTimeout(a)),h!="*"&&!this.options.serverInstanceAddressIgnored&&(h=qt.completeControlLink(h,this.getServerAddress()),this.serverInstanceAddress=h,this.details.setServerInstanceAddress(h))},doCONOK_CreateWS:function(t,e,n,a){this.doCONOK(t,e,n,null,a)},doCONOK_BindWS_Streaming:function(t,e,n,a){this.doCONOK(t,e,n,null,a)},doCONOK_BindWS_Polling:function(t,e,n,a){this.doCONOK(t,e,null,n,a)},doCONOK_CreateHTTP:function(t,e,n,a){this.doCONOK(t,e,null,null,a)},doCONOK_BindHTTP_Streaming:function(t,e,n,a){this.doCONOK(t,e,n,null,a)},doCONOK_BindHTTP_Polling:function(t,e,n,a){this.doCONOK(t,e,null,n,a)},doSERVNAME:function(t){this.details.setServerSocketName(t)},doCLIENTIP:function(t){this.details.setClientIp(t);var e=this.lastKnownClientIp;e!=null&&e!=t&&($.isInfoEnabled()&&$.info("Client IP changed: "+e+" -> "+t),this.enableAllTransports()),this.lastKnownClientIp=t},doCONS:function(t){this.options.setRealMaxBandwidth(t)},doLOOP:function(t){this.options.setPollingInterval(t)},doPROG:function(t){if(t>this.rec_clientProg)throw new Y("Assertion failure: prog <= rec_clientProg");this.rec_serverProg=t},doMSGDONE:function(t,e,n){this.onFreshData();var a=this.messageManagers.filter(function(_){return _.sequence==t?_.prog==e:!1});if(a.values.length-a.nRemoved>1)throw new Y("Assertion failure: messages.length <= 1");for(var h=new Mt(a);h.hasNext();)h.next().evtMSGDONE(n)},doMSGFAIL:function(t,e,n,a){if(this.onFreshData(),n==39){var h=f.parseInt(a);if(h==null)throw new Y("Assertion failure: count != null");for(var _=e-h+1,v=e+1;_<v;){var T=this.messageManagers.filter(function(Z){return function(X){return X.sequence==t?X.prog==Z[0]:!1}}([_++]));if(T.values.length-T.nRemoved>1)throw new Y("Assertion failure: messages.length <= 1");for(var W=new Mt(T);W.hasNext();)W.next().evtMSGFAIL(n,a)}}else{var T=this.messageManagers.filter(function(nt){return nt.sequence==t?nt.prog==e:!1});if(T.values.length-T.nRemoved>1)throw new Y("Assertion failure: messages.length <= 1");for(var W=new Mt(T);W.hasNext();)W.next().evtMSGFAIL(n,a)}},doU:function(t,e,n){this.onFreshData();var a=this.subscriptionManagers._innerMap.h[t];a!=null?a.evtU(e,n):new pe(t,this).evtU(e,n)},doSUBOK:function(t,e,n){this.onFreshData();var a=this.subscriptionManagers._innerMap.h[t];a!=null?a.evtSUBOK(e,n):new pe(t,this).evtSUBOK(e,n)},doSUBCMD:function(t,e,n,a,h){this.onFreshData();var _=this.subscriptionManagers._innerMap.h[t];_!=null?_.evtSUBCMD(e,n,a,h):new pe(t,this).evtSUBCMD(e,n,a,h)},doUNSUB:function(t){this.onFreshData();var e=this.subscriptionManagers._innerMap.h[t];e!=null&&e.evtUNSUB()},doEOS:function(t,e){this.onFreshData();var n=this.subscriptionManagers._innerMap.h[t];n!=null?n.evtEOS(e):new pe(t,this).evtEOS(e)},doCS:function(t,e){this.onFreshData();var n=this.subscriptionManagers._innerMap.h[t];n!=null?n.evtCS(e):new pe(t,this).evtCS(e)},doOV:function(t,e,n){this.onFreshData();var a=this.subscriptionManagers._innerMap.h[t];a!=null?a.evtOV(e,n):new pe(t,this).evtOV(e,n)},doCONF:function(t,e){this.onFreshData();var n=this.subscriptionManagers._innerMap.h[t];n!=null?n.evtCONF(e):new pe(t,this).evtCONF(e)},doREQOK:function(t){for(var e=this.subscriptionManagers,n=e.keys();n.hasNext();)e.get(n.next()).evtREQOK(t);this.subscriptionManagers._orderedKeys.compact();for(var a=new Mt(this.messageManagers);a.hasNext();)a.next().evtREQOK(t);this.messageManagers.compact()},doREQERR:function(t,e,n){for(var a=this.subscriptionManagers,h=a.keys();h.hasNext();)a.get(h.next()).evtREQERR(t,e,n);this.subscriptionManagers._orderedKeys.compact();for(var _=new Mt(this.messageManagers);_.hasNext();)_.next().evtREQERR(t,e,n);this.messageManagers.compact()},doSYNC:function(t){this.slw_refTime=u.now()/1e3,this.slw_avgDelayMs=-t},doSYNC_G:function(t){var e=this.diffTimeSync(t);return e>this.slw_hugeDelayMs&&e>this.slw_avgDelayMs*2?this.slw_avgDelayMs>this.slw_maxAvgDelayMs&&this.options.slowingEnabled?Dt.SCR_bad:Dt.SCR_not_good:(this.slw_avgDelayMs=this.slowAvg(e),this.slw_avgDelayMs>this.slw_maxAvgDelayMs&&this.options.slowingEnabled?Dt.SCR_bad:(this.slw_avgDelayMs<60&&(this.slw_avgDelayMs=0),Dt.SCR_good))},doSYNC_NG:function(t){var e=this.diffTimeSync(t);return e>this.slw_hugeDelayMs&&e>this.slw_avgDelayMs*2?(this.slw_avgDelayMs=this.slowAvg(e),this.slw_avgDelayMs>this.slw_maxAvgDelayMs&&this.options.slowingEnabled?Dt.SCR_bad:(this.slw_avgDelayMs<60&&(this.slw_avgDelayMs=0),Dt.SCR_good)):(this.slw_avgDelayMs=this.slowAvg(e),this.slw_avgDelayMs>this.slw_maxAvgDelayMs&&this.options.slowingEnabled?Dt.SCR_bad:(this.slw_avgDelayMs<60&&(this.slw_avgDelayMs=0),Dt.SCR_not_good))},diffTimeSync:function(t){return Te.minus(u.now()/1e3,this.slw_refTime)-t},slowAvg:function(t){return this.slw_avgDelayMs*this.slw_m+t*(1-this.slw_m)},schedule_evtTransportTimeout:function(t){this.transportTimer=this.createTimer("transport.timeout",t,Lt(this,this.evtTransportTimeout))},schedule_evtRetryTimeout:function(t){this.retryTimer=this.createTimer("retry.timeout",t,Lt(this,this.evtRetryTimeout))},schedule_evtRecoveryTimeout:function(t){this.recoveryTimer=this.createTimer("recovery.timeout",t,Lt(this,this.evtRecoveryTimeout))},schedule_evtIdleTimeout:function(t){this.idleTimer=this.createTimer("idle.timeout",t,Lt(this,this.evtIdleTimeout))},schedule_evtPollingTimeout:function(t){this.pollingTimer=this.createTimer("polling.timeout",t,Lt(this,this.evtPollingTimeout))},schedule_evtCtrlTimeout:function(t){this.ctrlTimer=this.createTimer("ctrl.timeout",t,Lt(this,this.evtCtrlTimeout))},schedule_evtKeepaliveTimeout:function(t){this.keepaliveTimer=this.createTimer("keepalive.timeout",t,Lt(this,this.evtKeepaliveTimeout))},schedule_evtStalledTimeout:function(t){this.stalledTimer=this.createTimer("stalled.timeout",t,Lt(this,this.evtStalledTimeout))},schedule_evtReconnectTimeout:function(t){this.reconnectTimer=this.createTimer("reconnect.timeout",t,Lt(this,this.evtReconnectTimeout))},schedule_evtRhbTimeout:function(t){this.rhbTimer=this.createTimer("rhb.timeout",t,Lt(this,this.evtRhbTimeout))},createTimer:function(t,e,n){var a=this;return this.timerFactory(t,e,function(h){a.lock.synchronized(function(){h.isCanceled()||n()})})},cancel_evtTransportTimeout:function(){this.transportTimer!=null&&(this.transportTimer.cancel(),this.transportTimer=null)},cancel_evtRetryTimeout:function(){this.retryTimer!=null&&(this.retryTimer.cancel(),this.retryTimer=null)},cancel_evtKeepaliveTimeout:function(){this.keepaliveTimer!=null&&(this.keepaliveTimer.cancel(),this.keepaliveTimer=null)},cancel_evtStalledTimeout:function(){this.stalledTimer!=null&&(this.stalledTimer.cancel(),this.stalledTimer=null)},cancel_evtReconnectTimeout:function(){this.reconnectTimer!=null&&(this.reconnectTimer.cancel(),this.reconnectTimer=null)},cancel_evtRhbTimeout:function(){this.rhbTimer!=null&&(this.rhbTimer.cancel(),this.rhbTimer=null)},cancel_evtIdleTimeout:function(){this.idleTimer!=null&&(this.idleTimer.cancel(),this.idleTimer=null)},cancel_evtPollingTimeout:function(){this.pollingTimer!=null&&(this.pollingTimer.cancel(),this.pollingTimer=null)},cancel_evtCtrlTimeout:function(){this.ctrlTimer!=null&&(this.ctrlTimer.cancel(),this.ctrlTimer=null)},cancel_evtRecoveryTimeout:function(){this.recoveryTimer!=null&&(this.recoveryTimer.cancel(),this.recoveryTimer=null)},waitingInterval:function(t,e){var n=Te.minus(u.now()/1e3,e),a=t;return n<a?a-n:0},exit_tr:function(){this.evtEndSession()},entry_m111:function(t,e){this.evtRetry(t,e),this.schedule_evtRetryTimeout(e)},entry_m112:function(t){var e=this.waitingInterval(this.delayCounter.get_currentRetryDelay(),this.connectTs);this.evtRetry(t,e),this.schedule_evtRetryTimeout(e)},entry_m113:function(t){var e=this.randomPause(this.options.firstRetryMaxDelay);this.evtRetry(t,e),this.schedule_evtRetryTimeout(e)},entry_m115:function(t){this.evtRetry(t),this.evtRetryTimeout()},entry_rec:function(t,e){$.isErrorEnabled()&&$.error("Recovering connection in "+t+" ms. Cause: "+Qs(e)),this.evtStartRecovery(),this.schedule_evtRecoveryTimeout(t)},exit_w:function(){this.cancel_evtKeepaliveTimeout(),this.cancel_evtStalledTimeout(),this.cancel_evtReconnectTimeout(),this.cancel_evtRhbTimeout()},exit_ws:function(){this.cancel_evtTransportTimeout(),this.cancel_evtKeepaliveTimeout(),this.cancel_evtStalledTimeout(),this.cancel_evtReconnectTimeout(),this.cancel_evtRhbTimeout()},exit_wp:function(){this.cancel_evtTransportTimeout(),this.cancel_evtIdleTimeout(),this.cancel_evtPollingTimeout()},exit_hs:function(){this.cancel_evtTransportTimeout(),this.cancel_evtKeepaliveTimeout(),this.cancel_evtStalledTimeout(),this.cancel_evtReconnectTimeout(),this.cancel_evtRhbTimeout()},exit_hp:function(){this.cancel_evtIdleTimeout(),this.cancel_evtPollingTimeout(),this.cancel_evtRhbTimeout()},exit_ctrl:function(){this.cancel_evtCtrlTimeout(),this.evtDisposeCtrl()},exit_rec:function(){this.cancel_evtRecoveryTimeout(),this.cancel_evtTransportTimeout(),this.cancel_evtRetryTimeout()},exit_keepalive_unit:function(){this.cancel_evtKeepaliveTimeout(),this.cancel_evtStalledTimeout(),this.cancel_evtReconnectTimeout()},exit_w_to_m:function(){this.exit_w(),this.exit_tr()},exit_ws_to_m:function(){this.exit_ws(),this.exit_tr()},exit_wp_to_m:function(){this.exit_wp(),this.exit_tr()},exit_hs_to_m:function(){this.exit_ctrl(),this.exit_hs(),this.exit_tr()},exit_hs_to_rec:function(){this.exit_ctrl(),this.exit_hs()},exit_hp_to_m:function(){this.exit_ctrl(),this.exit_hp(),this.exit_tr()},exit_hp_to_rec:function(){this.exit_ctrl(),this.exit_hp()},exit_ctrl_to_m:function(){this.exit_ctrl(),this.exit_hs(),this.exit_hp(),this.exit_tr()},exit_rec_to_m:function(){this.exit_rec(),this.exit_tr()},randomPause:function(t){return this.randomGenerator(t)},generateFreshReqId:function(){return this.m_nextReqId+=1,this.m_nextReqId},generateFreshSubId:function(){return this.m_nextSubId+=1,this.m_nextSubId},genAbortSubscriptions:function(){for(var t=this.subscriptionManagers,e=t.keys();e.hasNext();)t.get(e.next()).evtExtAbort();this.subscriptionManagers._orderedKeys.compact()},genAckMessagesWS:function(){for(var t=new Mt(this.messageManagers.filter(function(e){return e.isPending()}));t.hasNext();)t.next().evtWSSent()},genAbortMessages:function(){for(var t=new Mt(this.messageManagers);t.hasNext();)t.next().evtAbort();this.messageManagers.compact()},resetSequenceMap:function(){this.sequenceMap.h=Object.create(null)},isSwitching:function(){return this.state.s_m==150?this.state.s_swt!=1302?this.state.s_swt==1303:!0:!1},encodeSwitch:function(t){var e=new Pt;return this.swt_lastReqId=this.generateFreshReqId(),e.LS_reqId(this.swt_lastReqId),e.LS_op("force_rebind"),t&&e.LS_close_socket(!0),this.cause!=null&&(e.LS_cause(this.cause),this.cause=null),F.isInfoEnabled()&&F.info("Sending transport switch: "+f.string(e)),e.getEncodedString()},encodeConstrain:function(){var t=new Pt;this.bw_lastReqId=this.generateFreshReqId(),t.LS_reqId(this.bw_lastReqId),t.LS_op("constrain");var e=M.sure(this.bw_requestedMaxBandwidth);switch(e._hx_index){case 0:t.LS_requested_max_bandwidth_Float(e.bw);break;case 1:t.LS_requested_max_bandwidth("unlimited");break}return F.isInfoEnabled()&&F.info("Sending bandwidth constrain: "+f.string(t)),t.getEncodedString()},getPendingControls:function(){var t=[];M.sure(this.switchRequest).isPending()&&t.push(M.sure(this.switchRequest)),M.sure(this.constrainRequest).isPending()&&t.push(M.sure(this.constrainRequest));for(var e=this.subscriptionManagers,n=e.keys();n.hasNext();){var a=e.get(n.next());a.isPending()&&t.push(a)}return t},sendControlWS:function(t){M.sure(this.ws).send(t.encodeWS())},sendMsgWS:function(t){M.sure(this.ws).send(t.encodeWS())},sendPengingControlsWS:function(t){this.sendBatchWS(this.prepareBatchWS("control",t,M.sure(this.requestLimit)))},sendPendingMessagesWS:function(){for(var t=[],e=new Mt(this.messageManagers);e.hasNext();){var n=e.next();n.isPending()&&t.push(n)}this.sendBatchWS(this.prepareBatchWS("msg",t,M.sure(this.requestLimit)))},sendBatchWS:function(t){for(var e=0;e<t.length;){var n=t[e++];M.sure(this.ws).send(n)}},sendHeartbeatWS:function(){F.isInfoEnabled()&&F.info("Heartbeat request"),M.sure(this.ws).send(`heartbeat\r
\r
`)},sendPendingControlsHTTP:function(t){this.sendBatchHTTP(this.prepareBatchHTTP(t,M.sure(this.requestLimit)),"control")},sendPendingMessagesHTTP:function(){for(var t=[],e=new Mt(this.messageManagers);e.hasNext();){var n=e.next();n.isPending()&&t.push(n)}this.sendBatchHTTP(this.prepareBatchHTTP(t,M.sure(this.requestLimit)),"msg")},sendHeartbeatHTTP:function(){F.isInfoEnabled()&&F.info("Heartbeat request"),this.sendBatchHTTP(`\r
`,"heartbeat")},sendBatchHTTP:function(t,e){var n=this;this.ctrl_connectTs=u.now()/1e3;var a=qt.build(M.sure(this.serverInstanceAddress),"/lightstreamer/"+e+".txt?LS_protocol="+ws+"&LS_session="+this.sessionId),h=this.getHeadersForRequestOtherThanCreate(),_=function(W,Z){Le(function(){n.lock.synchronized(function(){W.isDisposed()||n.evtCtrlMessage(Z)})})},v=function(W,Z){Le(function(){n.lock.synchronized(function(){W.isDisposed()||n.evtCtrlError()})})},T=function(W){Le(function(){n.lock.synchronized(function(){W.isDisposed()||n.evtCtrlDone()})})};this.ctrl_http=this.ctrlFactory(a,t,h,_,v,T)},prepareBatchWS:function(t,e,n){if(e.length<=0)throw new Y("Assertion failure: pendings.length > 0");for(var a=[],h=0,_=e[0].encode(!0);h<e.length;){var v=new wt;for(v.addSubRequest(t),v.addSubRequest(_),++h;h<e.length&&(_=e[h].encode(!0),v.addSubRequestOnlyIfBodyIsLessThan(_,n));)++h;a.push(v.getBody())}return a},prepareBatchHTTP:function(t,e){if(t.length<=0)throw new Y("Assertion failure: pendings.length > 0");var n=new wt,a=0,h=t[0].encode(!1);for(n.addSubRequest(h),a=1;a<t.length&&(h=t[a].encode(!1),n.addSubRequestOnlyIfBodyIsLessThan(h,e));)++a;return n.getBody()},getHeadersForRequestOtherThanCreate:function(){return this.options.httpExtraHeadersOnSessionCreationOnly?null:this.options.httpExtraHeaders},getServerAddress:function(){var t=this.details.serverAddress;return t??M.sure(this.defaultServerAddress)},relateSubManager:function(t){if(this.subscriptionManagers._innerMap.h[t.subId]!=null)throw new Y("Assertion failure: subscriptionManagers[subManager.subId] == null");this.subscriptionManagers.set(t.subId,t)},unrelateSubManager:function(t){this.subscriptionManagers.remove(t.subId)},isRelatedWithSubManager:function(t){return p.has(this.subscriptionManagers,t)},relateMsgManager:function(t){this.messageManagers.values.push(new Ue(t))},unrelateMsgManager:function(t){this.messageManagers.remove(t)},getAndSetNextMsgProg:function(t){var e=this.sequenceMap.h[t];return e==null&&(e=1),this.sequenceMap.h[t]=e+1,e},onPropertyChange:function(t){this.clientEventDispatcher.onPropertyChange(t)},traceEvent:function(t){et.isTraceEnabled()&&et.trace("event: "+t+" "+this.state.toString())},connect:function(){var t=this.details.getServerAddress();if(t==null)throw new Y("Configure the server address before trying to connect");K.isInfoEnabled()&&K.info("Connection requested: details: "+f.string(this.details)+" options: "+f.string(this.options)+" env: "+f.string(Be.instance)),this.defaultServerAddress=t,this.evtExtConnect()},disconnect:function(){K.isInfoEnabled()&&K.info("Disconnection requested"),this.evtExtDisconnect(Ut.TC_api)},getStatus:function(){return this.m_status},sendMessage:function(t,e,n,a,h){if(!h&&(this.state.inDisconnected()||this.state.inRetryUnit())){if(K.isInfoEnabled()){var _=new It;_.h.text=t,_.h.sequence=e??"UNORDERED_MESSAGES",_.h.timeout=n==null?"null":""+n,_.h.enqueueWhileDisconnected=h==null?"null":""+h,K.isInfoEnabled()&&K.info("Message sending requested: "+(_==null?"null":It.stringify(_.h)))}if(Ht.isWarnEnabled()&&Ht.warn("Message "+(e??"UNORDERED_MESSAGES")+" "+t+" aborted"),a!=null){var v=new D;v.addListener(a),v.onAbort(t,!1)}return}if(e!=null){if(!new c("^[a-zA-Z0-9_]*$","").match(e))throw new P("The given sequence name is not valid. Use only alphanumeric characters plus underscore or null");var T=new R(t,e,n,a,h,this);K.isInfoEnabled()&&K.info("Message sending requested: "+f.string(T)),T.evtExtSendMessage()}else{var T=new R(t,"UNORDERED_MESSAGES",n,a,h,this);K.isInfoEnabled()&&K.info("Message sending requested: "+f.string(T)),T.evtExtSendMessage()}},subscribeExt:function(t,e){if(e==null&&(e=!1),t.isActive())throw new Y("Cannot subscribe to an active Subscription");if(t.fetchItems()==null&&t.getItemGroup()==null)throw new P("Specify property 'items' or 'itemGroup'");if(t.fetchFields()==null&&t.getFieldSchema()==null)throw new P("Specify property 'fields' or 'fieldSchema'");var n=new me(t,this);K.isInfoEnabled()&&K.info((e?"Internal subscription":"Subscription")+" requested: subId: "+n.subId+" "+f.string(t)),n.evtExtSubscribe()},unsubscribe:function(t){var e=t.fetch_subManager();if(e!=null){if(!this.isRelatedWithSubManager(e))throw new P("The Subscription is not subscribed to this Client");K.isInfoEnabled()&&K.info("Unsubscription requested: subId: "+e.subId+" "+f.string(t)),e.evtExtUnsubscribe()}},getSubscriptions:function(){for(var t=[],e=this.subscriptionManagers,n=e.keys();n.hasNext();){var a=e.get(n.next()),h=a instanceof me?a:null;if(h!=null){var _=h.m_subscription;_.isActive()&&!_.isInternal()&&t.push(_)}}return t},__class__:ot};var Ot=r["com.lightstreamer.client.internal._ClientMachine.BestForCreatingEnum"]={__ename__:!0,__constructs__:null,BFC_ws:{_hx_name:"BFC_ws",_hx_index:0,__enum__:"com.lightstreamer.client.internal._ClientMachine.BestForCreatingEnum",toString:i},BFC_http:{_hx_name:"BFC_http",_hx_index:1,__enum__:"com.lightstreamer.client.internal._ClientMachine.BestForCreatingEnum",toString:i},BFC_none:{_hx_name:"BFC_none",_hx_index:2,__enum__:"com.lightstreamer.client.internal._ClientMachine.BestForCreatingEnum",toString:i}};Ot.__constructs__=[Ot.BFC_ws,Ot.BFC_http,Ot.BFC_none];var Q=r["com.lightstreamer.client.internal._ClientMachine.BestForBindingEnum"]={__ename__:!0,__constructs__:null,BFB_none:{_hx_name:"BFB_none",_hx_index:0,__enum__:"com.lightstreamer.client.internal._ClientMachine.BestForBindingEnum",toString:i},BFB_ws_streaming:{_hx_name:"BFB_ws_streaming",_hx_index:1,__enum__:"com.lightstreamer.client.internal._ClientMachine.BestForBindingEnum",toString:i},BFB_ws_polling:{_hx_name:"BFB_ws_polling",_hx_index:2,__enum__:"com.lightstreamer.client.internal._ClientMachine.BestForBindingEnum",toString:i},BFB_http_streaming:{_hx_name:"BFB_http_streaming",_hx_index:3,__enum__:"com.lightstreamer.client.internal._ClientMachine.BestForBindingEnum",toString:i},BFB_http_polling:{_hx_name:"BFB_http_polling",_hx_index:4,__enum__:"com.lightstreamer.client.internal._ClientMachine.BestForBindingEnum",toString:i}};Q.__constructs__=[Q.BFB_none,Q.BFB_ws_streaming,Q.BFB_ws_polling,Q.BFB_http_streaming,Q.BFB_http_polling];var Dt=r["com.lightstreamer.client.internal._ClientMachine.SyncCheckResult"]={__ename__:!0,__constructs__:null,SCR_good:{_hx_name:"SCR_good",_hx_index:0,__enum__:"com.lightstreamer.client.internal._ClientMachine.SyncCheckResult",toString:i},SCR_not_good:{_hx_name:"SCR_not_good",_hx_index:1,__enum__:"com.lightstreamer.client.internal._ClientMachine.SyncCheckResult",toString:i},SCR_bad:{_hx_name:"SCR_bad",_hx_index:2,__enum__:"com.lightstreamer.client.internal._ClientMachine.SyncCheckResult",toString:i}};Dt.__constructs__=[Dt.SCR_good,Dt.SCR_not_good,Dt.SCR_bad];var L=r["com.lightstreamer.client.internal._ClientMachine.RetryCause"]={__ename__:!0,__constructs__:null,standardError:(o=function(t,e){return{_hx_index:0,code:t,msg:e,__enum__:"com.lightstreamer.client.internal._ClientMachine.RetryCause",toString:i}},o._hx_name="standardError",o.__params__=["code","msg"],o),ws_unavailable:{_hx_name:"ws_unavailable",_hx_index:1,__enum__:"com.lightstreamer.client.internal._ClientMachine.RetryCause",toString:i},ws_error:{_hx_name:"ws_error",_hx_index:2,__enum__:"com.lightstreamer.client.internal._ClientMachine.RetryCause",toString:i},http_error:{_hx_name:"http_error",_hx_index:3,__enum__:"com.lightstreamer.client.internal._ClientMachine.RetryCause",toString:i},idle_timeout:{_hx_name:"idle_timeout",_hx_index:4,__enum__:"com.lightstreamer.client.internal._ClientMachine.RetryCause",toString:i},stalled_timeout:{_hx_name:"stalled_timeout",_hx_index:5,__enum__:"com.lightstreamer.client.internal._ClientMachine.RetryCause",toString:i},ws_timeout:{_hx_name:"ws_timeout",_hx_index:6,__enum__:"com.lightstreamer.client.internal._ClientMachine.RetryCause",toString:i},http_timeout:{_hx_name:"http_timeout",_hx_index:7,__enum__:"com.lightstreamer.client.internal._ClientMachine.RetryCause",toString:i},recovery_timeout:{_hx_name:"recovery_timeout",_hx_index:8,__enum__:"com.lightstreamer.client.internal._ClientMachine.RetryCause",toString:i},prog_mismatch:(o=function(t,e){return{_hx_index:9,expected:t,actual:e,__enum__:"com.lightstreamer.client.internal._ClientMachine.RetryCause",toString:i}},o._hx_name="prog_mismatch",o.__params__=["expected","actual"],o),page_frozen:{_hx_name:"page_frozen",_hx_index:10,__enum__:"com.lightstreamer.client.internal._ClientMachine.RetryCause",toString:i}};L.__constructs__=[L.standardError,L.ws_unavailable,L.ws_error,L.http_error,L.idle_timeout,L.stalled_timeout,L.ws_timeout,L.http_timeout,L.recovery_timeout,L.prog_mismatch,L.page_frozen];var Ut=r["com.lightstreamer.client.internal._ClientMachine.TerminationCause"]={__ename__:!0,__constructs__:null,TC_standardError:(o=function(t,e){return{_hx_index:0,code:t,msg:e,__enum__:"com.lightstreamer.client.internal._ClientMachine.TerminationCause",toString:i}},o._hx_name="TC_standardError",o.__params__=["code","msg"],o),TC_otherError:(o=function(t){return{_hx_index:1,error:t,__enum__:"com.lightstreamer.client.internal._ClientMachine.TerminationCause",toString:i}},o._hx_name="TC_otherError",o.__params__=["error"],o),TC_api:{_hx_name:"TC_api",_hx_index:2,__enum__:"com.lightstreamer.client.internal._ClientMachine.TerminationCause",toString:i}};Ut.__constructs__=[Ut.TC_standardError,Ut.TC_otherError,Ut.TC_api];var ds=r["com.lightstreamer.client.internal._ClientMachine.RecoveryRetryCause"]={__ename__:!0,__constructs__:null,RRC_transport_timeout:{_hx_name:"RRC_transport_timeout",_hx_index:0,__enum__:"com.lightstreamer.client.internal._ClientMachine.RecoveryRetryCause",toString:i},RRC_transport_error:{_hx_name:"RRC_transport_error",_hx_index:1,__enum__:"com.lightstreamer.client.internal._ClientMachine.RecoveryRetryCause",toString:i}};ds.__constructs__=[ds.RRC_transport_timeout,ds.RRC_transport_error];function Qs(t){switch(t._hx_index){case 0:return""+t.code+" - "+t.msg;case 1:return"Websocket transport not available";case 2:return"Websocket error";case 3:return"HTTP error";case 4:return"idleTimeout expired";case 5:return"stalledTimeout expired";case 6:return"Websocket connect timeout expired";case 7:return"HTTP connect timeout expired";case 8:return"sessionRecoveryTimeout expired";case 9:return"Recovery counter mismatch: expected "+t.expected+" but found "+t.actual;case 10:return"page frozen"}}var ie=function(){};ie.__name__=!0,ie.__isInterface__=!0,ie.prototype={__class__:ie};var we=function(t){this.client=t};we.__name__=!0,we.__interfaces__=[ie],we.prototype={isPending:function(){return this.client.state.s_m==150?this.client.state.s_swt==1302:!1},encode:function(t){return this.client.encodeSwitch(t)},encodeWS:function(){return`control\r
`+this.encode(!0)},__class__:we};var Ae=function(t){this.client=t};Ae.__name__=!0,Ae.__interfaces__=[ie],Ae.prototype={isPending:function(){return this.client.state.s_bw==1202},encode:function(t){return this.client.encodeConstrain()},encodeWS:function(){return`control\r
`+this.encode(!0)},__class__:Ae};var ms=function(t,e,n){this.p=t,this.k=e,this.s=n};ms.__name__=!0,ms.prototype={toString:function(){return"<w_p="+this.p+" w_k="+this.k+" w_s="+this.s+">"},__class__:ms};var he=function(t){this.m=t};he.__name__=!0,he.prototype={toString:function(){var t="<ws_m="+this.m;return this.p!=null&&(t+=" ws_p="+this.p),this.k!=null&&(t+=" ws_k="+this.k),this.s!=null&&(t+=" ws_s="+this.s),t+=">",t},__class__:he};var ps=function(t){this.m=t};ps.__name__=!0,ps.prototype={toString:function(){var t="<wp_m="+this.m;return this.p!=null&&(t+=" wp_p="+this.p),this.c!=null&&(t+=" wp_c="+this.c),this.s!=null&&(t+=" wp_s="+this.s),t+=">",t},__class__:ps};var m=function(t){this.m=t};m.__name__=!0,m.prototype={toString:function(){var t="<hs_m="+this.m;return this.p!=null&&(t+=" hs_p="+this.p),this.k!=null&&(t+=" hs_k="+this.k),t+=">",t},__class__:m};var g=function(t){this.m=t};g.__name__=!0,g.prototype={toString:function(){return"<hp_m="+this.m+">"},__class__:g};var w=function(){this.s_m=100,this.s_du=20,this.s_nr=1400};w.__name__=!0,w.prototype={goto_m_from_w:function(t){this.clear_w(),this.goto_m_from_session(t)},goto_m_from_ws:function(t){this.clear_ws(),this.goto_m_from_session(t)},goto_rec_from_w:function(){this.clear_w(),this.goto_rec()},goto_rec_from_ws:function(){this.clear_ws(),this.goto_rec()},goto_m_from_wp:function(t){this.clear_wp(),this.goto_m_from_session(t)},goto_rec_from_wp:function(){this.clear_wp(),this.goto_rec()},goto_m_from_hs:function(t){this.clear_hs(),this.s_ctrl=null,this.s_h=null,this.goto_m_from_session(t)},goto_m_from_rec:function(t){this.s_tr=null,this.goto_m_from_session(t)},goto_rec_from_hs:function(){this.clear_hs(),this.s_ctrl=null,this.s_h=null,this.goto_rec()},goto_m_from_hp:function(t){this.clear_hp(),this.s_ctrl=null,this.s_h=null,this.goto_m_from_session(t)},goto_rec_from_hp:function(){this.clear_hp(),this.s_ctrl=null,this.s_h=null,this.goto_rec()},goto_rec:function(){this.s_tr=260,this.s_rec=1e3,this.traceState()},goto_m_from_session:function(t){this.s_tr=null,this.s_swt=null,this.s_bw=null,this.s_m=t,this.traceState()},goto_m_from_ctrl:function(t){this.clear_hs(),this.clear_hp(),this.s_ctrl=null,this.s_h=null,this.goto_m_from_session(t)},goto_200_from_rec:function(){this.s_rec=null,this.s_tr=200,this.traceState()},clear_w:function(){this.s_w=null,this.s_rhb=null,this.s_slw=null},clear_ws:function(){this.s_ws=null,this.s_rhb=null,this.s_slw=null},clear_wp:function(){this.s_wp=null},clear_hs:function(){this.s_hs=null,this.s_rhb=null,this.s_slw=null},clear_hp:function(){this.s_hp=null,this.s_rhb=null},isSwitching:function(){return this.s_m==150?this.s_swt!=1302?this.s_swt==1303:!0:!1},inPushing:function(){return this.inStreaming()?!0:this.inPolling()},inStreaming:function(){var t,e=this.s_w;if((e!=null?e.p:null)!=300){var e=this.s_ws;t=(e!=null?e.p:null)==510}else t=!0;if(t)return!0;var t=this.s_hs;return(t!=null?t.p:null)==810},inPolling:function(){var t,e;if(this.s_tr==220||this.s_tr==230)e=!0;else{var n=this.s_wp;e=(n!=null?n.p:null)==611}if(e)t=!0;else{var e=this.s_hp;t=(e!=null?e.m:null)==901}return t?!0:this.s_rec==1001},inRetryUnit:function(){switch(this.s_m){case 110:case 111:case 112:case 113:case 114:case 115:case 116:return!0;default:return!1}},inDisconnected:function(){return this.s_m==100},toString:function(){var t="<m="+this.s_m;return t+=" du="+this.s_du,this.s_tr!=null&&(t+=" tr="+this.s_tr),this.s_w!=null&&(t+=" "+f.string(this.s_w)),this.s_ws!=null&&(t+=" "+f.string(this.s_ws)),this.s_wp!=null&&(t+=" "+f.string(this.s_wp)),this.s_hs!=null&&(t+=" "+f.string(this.s_hs)),this.s_hp!=null&&(t+=" "+f.string(this.s_hp)),this.s_rec!=null&&(t+=" rec="+this.s_rec),this.s_h!=null&&(t+=" h="+this.s_h),this.s_ctrl!=null&&(t+=" ctrl="+this.s_ctrl),this.s_swt!=null&&(t+=" swt="+this.s_swt),this.s_bw!=null&&(t+=" bw="+this.s_bw),this.s_rhb!=null&&(t+=" rhb="+this.s_rhb),this.s_slw!=null&&(t+=" slw="+this.s_slw),t+=" nr="+this.s_nr,t+=">",t},traceState:function(){et.isTraceEnabled()&&et.trace("goto: "+this.toString())},__class__:w};var D=function(){H.call(this)};D.__name__=!0,D.__super__=H,D.prototype=l(H.prototype,{onAbort:function(t,e){this.dispatchToAll(function(n){n.onAbort!=null&&n.onAbort(t,e)})},onDeny:function(t,e,n){this.dispatchToAll(function(a){a.onDeny!=null&&a.onDeny(t,e,n)})},onDiscarded:function(t){this.dispatchToAll(function(e){e.onDiscarded!=null&&e.onDiscarded(t)})},onError:function(t){this.dispatchToAll(function(e){e.onError!=null&&e.onError(t)})},onProcessed:function(t,e){this.dispatchToAll(function(n){n.onProcessed!=null&&n.onProcessed(t,e)})},__class__:D});var R=function(t,e,n,a,h,_){this.eventDispatcher=new D,this.txt=t,this.sequence=e,e!="UNORDERED_MESSAGES"||a!=null?this.prog=_.getAndSetNextMsgProg(e):this.prog=-1,this.maxWait=n,this.delegate=a,a!=null&&this.eventDispatcher.addListener(a),this.enqueueWhileDisconnected=h,this.client=_,a!=null?this.s_m=10:e!="UNORDERED_MESSAGES"?this.s_m=20:this.s_m=30,_.relateMsgManager(this)};R.__name__=!0,R.__interfaces__=[ie],R.prototype={finalize:function(){this.client.unrelateMsgManager(this)},evtExtSendMessage:function(){switch(this.traceEvent("sendMessage"),this.s_m){case 10:this.goto(11),this.client.evtSendMessage(this);break;case 20:this.goto(21),this.client.evtSendMessage(this);break;case 30:this.goto(31),this.client.evtSendMessage(this);break}},evtMSGFAIL:function(t,e){switch(this.traceEvent("MSGFAIL"),this.s_m){case 10:this.finalize(),this.goto(13);break;case 11:this.doMSGFAIL(t,e),this.finalize(),this.goto(14);break;case 12:this.doMSGFAIL(t,e),this.finalize(),this.goto(14);break}},evtMSGDONE:function(t){switch(this.traceEvent("MSGDONE"),this.s_m){case 10:this.finalize(),this.goto(13);break;case 11:this.doMSGDONE(t),this.finalize(),this.goto(13);break;case 12:this.doMSGDONE(t),this.finalize(),this.goto(13);break}},evtREQOK:function(t){switch(this.traceEvent("REQOK"),this.s_m){case 11:t==this.lastReqId&&this.goto(12);break;case 21:t==this.lastReqId&&(this.finalize(),this.goto(22));break;case 31:t==this.lastReqId&&(this.finalize(),this.goto(33));break}},evtREQERR:function(t,e,n){switch(this.traceEvent("REQERR"),this.s_m){case 11:t==this.lastReqId&&(this.doREQERR(e,n),this.finalize(),this.goto(14));break;case 21:t==this.lastReqId&&(this.finalize(),this.goto(23));break;case 31:t==this.lastReqId&&(this.finalize(),this.goto(34));break}},evtAbort:function(){switch(this.traceEvent("abort"),this.s_m){case 11:this.doAbort(),this.finalize(),this.goto(15);break;case 12:this.doAbort(),this.finalize(),this.goto(15);break;case 21:Ht.isWarnEnabled()&&Ht.warn("Message "+this.sequence+":"+this.prog+" aborted"),this.finalize(),this.goto(24);break;case 31:Ht.isWarnEnabled()&&Ht.warn("Message "+this.sequence+":"+this.prog+" aborted"),this.finalize(),this.goto(35);break}},evtWSSent:function(){this.traceEvent("ws.sent"),this.s_m==31&&(this.finalize(),this.goto(32))},isPending:function(){return this.s_m==11||this.s_m==21?!0:this.s_m==31},encode:function(t){return this.encodeMsg(t)},encodeWS:function(){return`msg\r
`+this.encode(!0)},doMSGDONE:function(t){this.fireOnProcessed(t)},doMSGFAIL:function(t,e){t==38||t==39?this.fireOnDiscarded():t<=0?this.fireOnDeny(t,e):t!=32&&t!=33&&this.fireOnError()},doREQERR:function(t,e){t!=32&&t!=33&&this.fireOnError()},doAbort:function(){this.fireOnAbort()},encodeMsg:function(t){var e=this.sequence!="UNORDERED_MESSAGES",n=this.delegate!=null,a=new Pt;return this.lastReqId=this.client.generateFreshReqId(),a.LS_reqId(this.lastReqId),a.LS_message(this.txt),e&&n?(a.LS_sequence(this.sequence),a.LS_msg_prog(this.prog),this.maxWait>=0&&a.LS_max_wait(this.maxWait)):!e&&n?a.LS_msg_prog(this.prog):e&&!n?(a.LS_outcome(!1),a.LS_sequence(this.sequence),a.LS_msg_prog(this.prog),this.maxWait>=0&&a.LS_max_wait(this.maxWait)):!e&&!n&&(a.LS_outcome(!1),t&&a.LS_ack(!1)),F.isInfoEnabled()&&F.info("Sending message: "+f.string(a)),a.getEncodedString()},fireOnProcessed:function(t){Ht.isInfoEnabled()&&Ht.info("Message "+this.sequence+":"+this.prog+" processed"),this.eventDispatcher.onProcessed(this.txt,t)},fireOnDiscarded:function(){Ht.isWarnEnabled()&&Ht.warn("Message "+this.sequence+":"+this.prog+" discarded"),this.eventDispatcher.onDiscarded(this.txt)},fireOnDeny:function(t,e){Ht.isWarnEnabled()&&Ht.warn("Message "+this.sequence+":"+this.prog+" denied: "+t+" - "+e),this.eventDispatcher.onDeny(this.txt,t,e)},fireOnError:function(){Ht.isWarnEnabled()&&Ht.warn("Message "+this.sequence+":"+this.prog+" failed"),this.eventDispatcher.onError(this.txt)},fireOnAbort:function(){Ht.isWarnEnabled()&&Ht.warn("Message "+this.sequence+":"+this.prog+" aborted"),this.eventDispatcher.onAbort(this.txt,!1)},traceEvent:function(t){et.isTraceEnabled()&&et.trace("msg#"+t+"("+this.sequence+":"+this.prog+") in "+this.s_m)},goto:function(t){this.s_m=t,et.isTraceEnabled()&&et.trace("msg#goto("+this.sequence+":"+this.prog+") "+this.s_m)},toString:function(){var t=J._new();return J.set(t,"text",this.txt),J.set(t,"sequence",this.sequence),J.set(t,"prog",this.prog),J.set(t,"timeout",this.maxWait),J.set(t,"enqueueWhileDisconnected",this.enqueueWhileDisconnected),It.stringify(t.h)},__class__:R};var x=function(t,e,n){this.items=new ht,this.s_m=1,this.lock=e.lock,this.client=e,this.subscription=t,this.m_subId=n};x.__name__=!0,x.prototype={finalize:function(){},evtAbort:function(){this.traceEvent("abort"),this.s_m==1?(this.doAbort(),this.goto(1)):this.s_m==2&&(this.doAbort(),this.goto(1),this.genDisposeItems())},evtOnSUB:function(t,e,n,a,h){this.traceEvent("onSUB"),this.s_m==1&&(this.doSUB(t,e),this.goto(2))},evtOnCONF:function(t){this.traceEvent("onCONF"),this.s_m==2&&(this.doCONF(t),this.goto(2))},evtOnCS:function(t){this.traceEvent("onCS"),this.s_m==2&&(this.doCS(t),this.goto(2))},evtOnEOS:function(t){this.traceEvent("onEOS"),this.s_m==2&&(this.doEOS(t),this.goto(2))},evtUpdate:function(t,e){this.traceEvent("update"),this.s_m==2&&(this.doUpdate(t,e),this.goto(2))},evtUnsubscribe:function(){this.traceEvent("unsubscribe"),this.s_m==1?(this.finalize(),this.goto(3)):this.s_m==2&&(this.finalize(),this.goto(3),this.genDisposeItems())},evtOnUNSUB:function(){this.traceEvent("onUNSUB"),this.s_m==2&&(this.finalize(),this.goto(3),this.genDisposeItems())},evtDispose:function(){this.traceEvent("dispose"),(this.s_m==1||this.s_m==2)&&(this.finalize(),this.goto(3),this.genDisposeItems())},evtSetRequestedMaxFrequency:function(t){},getValue:function(t,e){var n=this.items.h[t];return n!=null?n.getValue(e):null},getCommandValue:function(t,e,n){throw new Y("Unsupported operation")},createItem:function(t){throw new Y("Abstract method")},doSUB:function(t,e){var n=this.subscription.fetchItems(),a=this.subscription.fetchFields();if(!(n==null||t==n.length))throw new Y("Assertion failure: items != null ? nItems == items.length : true");if(!(a==null||e==a.length))throw new Y("Assertion failure: fields != null ? nFields == fields.length : true")},doUpdate:function(t,e){this.selectItem(t).evtUpdate(e)},doEOS:function(t){this.selectItem(t).evtOnEOS()},doCS:function(t){this.selectItem(t).evtOnCS()},doCONF:function(t){this.realMaxFrequency=t,this.subscription.fireOnRealMaxFrequency(t,this.m_subId)},doAbort:function(){this.realMaxFrequency=null},genDisposeItems:function(){for(var t=this.items.copy(),e=t.keys();e.hasNext();)t.get(e.next()).evtDispose(this)},selectItem:function(t){var e=this.items.h[t];return e==null&&(e=this.createItem(t),this.items.h[t]=e),e},unrelate:function(t){this.items.remove(t)},traceEvent:function(t){et.isTraceEnabled()&&et.trace("sub#mod#"+t+"("+this.m_subId+") in "+this.s_m)},goto:function(t){this.s_m=t,et.isTraceEnabled()&&et.trace("sub#mod#goto("+this.m_subId+") "+this.s_m)},__class__:x};var A=function(t,e,n){x.call(this,t,e,n)};A.__name__=!0,A.__super__=x,A.prototype=l(x.prototype,{evtOnSUB:function(t,e,n,a,h){this.traceEvent("onSUB"),this.s_m==1&&(this.doSUBCMD(t,e,n,a),this.goto(2))},getCommandValue:function(t,e,n){var a=this.items.h[t];return a!=null?a.getCommandValue(e,n):null},doSUBCMD:function(t,e,n,a){var h=this.subscription.fetchItems(),_=this.subscription.fetchFields();if(!(h==null||t==h.length))throw new Y("Assertion failure: items != null ? nItems == items.length : true");if(!(_==null||e==_.length))throw new Y("Assertion failure: fields != null ? nFields == fields.length : true");if(!(_==null||n-1==_.indexOf("command")))throw new Y('Assertion failure: fields != null ? cmdIdx - 1 == fields.indexOf("command") : true');if(!(_==null||a-1==_.indexOf("key")))throw new Y('Assertion failure: fields != null ? keyIdx - 1 == fields.indexOf("key") : true')},__class__:A});var q=function(t,e,n){A.call(this,t,e,n)};q.__name__=!0,q.__super__=A,q.prototype=l(A.prototype,{createItem:function(t){return new Js(t,this.subscription,this.client,this.m_subId)},__class__:q});var k=function(t,e,n){A.call(this,t,e,n)};k.__name__=!0,k.__super__=A,k.prototype=l(A.prototype,{evtOnSUB:function(t,e,n,a,h){this.traceEvent("onSUB"),this.s_m==1&&(this.doSUBCMD2Level(t,e,n,a,h),this.goto(2))},evtSetRequestedMaxFrequency:function(t){switch(this.traceEvent("setRequestedMaxFrequency"),this.s_m){case 1:case 2:this.doSetRequestedMaxFrequency(t),this.goto(this.s_m),this.genSetRequestedMaxFrequency();break}},evtOnRealMaxFrequency2LevelAdded:function(t){this.traceEvent("onRealMaxFrequency2LevelAdded"),this.s_m==2&&(this.doAggregateFrequenciesWhenFreqIsAdded(t),this.goto(2))},evtOnRealMaxFrequency2LevelRemoved:function(){this.traceEvent("onRealMaxFrequency2LevelRemoved"),this.s_m==2&&(this.doAggregateFrequenciesWhenFreqIsRemoved(),this.goto(2))},evtOnCONF:function(t){this.traceEvent("onCONF"),this.s_m==2&&(this.doCONF2Level(t),this.doAggregateFrequenciesWhenFreqIsAdded(t),this.goto(2))},createItem:function(t){return new vs(t,this.subscription,this,this.client,this.m_subId)},doSUBCMD2Level:function(t,e,n,a,h){var _=this.subscription.fetchItems(),v=this.subscription.fetchFields();if(!(_==null||t==_.length))throw new Y("Assertion failure: items != null ? nItems == items.length : true");if(!(v==null||e==v.length))throw new Y("Assertion failure: fields != null ? nFields == fields.length : true");if(!(v==null||n-1==v.indexOf("command")))throw new Y('Assertion failure: fields != null ? cmdIdx - 1 == fields.indexOf("command") : true');if(!(v==null||a-1==v.indexOf("key")))throw new Y('Assertion failure: fields != null ? keyIdx - 1 == fields.indexOf("key") : true');this.requestedMaxFrequency=h},doSetRequestedMaxFrequency:function(t){this.requestedMaxFrequency=t},genSetRequestedMaxFrequency:function(){for(var t=this.items,e=t.keys();e.hasNext();)j.__cast(t.get(e.next()),vs).evtSetRequestedMaxFrequency()},doCONF2Level:function(t){this.realMaxFrequency=t},maxFreq:function(t,e){var n;if(t==null)n=e;else switch(t._hx_index){case 0:var a=t.freq;if(e==null)n=t;else switch(e._hx_index){case 0:n=Ce.RFreqLimited(Math.max(a,e.freq));break;case 1:n=e;break}break;case 1:n=t;break}return n},doAggregateFrequenciesWhenFreqIsAdded:function(t){var e=this.maxFreq(this.aggregateRealMaxFrequency,t),n=this.aggregateRealMaxFrequency;this.aggregateRealMaxFrequency=e,Tr(n,e)||this.subscription.fireOnRealMaxFrequency(e,this.m_subId)},doAggregateFrequenciesWhenFreqIsRemoved:function(){for(var t=this.realMaxFrequency,e=!1,n=this.items,a=n.keys();a.hasNext();){for(var h=j.__cast(n.get(a.next()),vs).keys.h,_=Object.keys(h),v=_.length,T=0;T<v;)if(t=this.maxFreq(t,j.__cast(h[_[T++]],Os).realMaxFrequency),t==Ce.RFreqUnlimited){e=!0;break}if(e)break}var W=this.aggregateRealMaxFrequency;this.aggregateRealMaxFrequency=t,Tr(W,t)||this.subscription.fireOnRealMaxFrequency(t,this.m_subId)},__class__:k});var N=function(t,e,n){x.call(this,t,e,n)};N.__name__=!0,N.__super__=x,N.prototype=l(x.prototype,{createItem:function(t){return new Zs(t,this.subscription,this.client,this.m_subId)},__class__:N});var z=function(t,e,n){x.call(this,t,e,n)};z.__name__=!0,z.__super__=x,z.prototype=l(x.prototype,{createItem:function(t){return new Xs(t,this.subscription,this.client,this.m_subId)},__class__:z});var U=function(t,e,n){x.call(this,t,e,n)};U.__name__=!0,U.__super__=x,U.prototype=l(x.prototype,{createItem:function(t){return new ti(t,this.subscription,this.client,this.m_subId)},__class__:U});var G=function(t,e,n){this.subId=t,this.itemIdx=e,this.values=n};G.__name__=!0,G.prototype={__class__:G};function B(t){return M.sure(f.parseInt(t))}function rt(t){return M.sure(parseFloat(t))}function ft(t){for(var e=lt(t,",")+1,n=lt(t,",",e)+1,a=lt(t,",",n)+1,h=B(t.substring(e,n-1)),_=B(t.substring(n,a-1)),v=new ht,T=a-1,W=1;T<t.length;){var Z=t.indexOf("|",T+1);Z==-1&&(Z=t.length);var X=t.substring(T+1,Z);if(X=="")v.h[W]=_e.unchanged,++W;else if(X=="#")v.h[W]=_e.changed(null),++W;else if(X=="$")v.h[W]=_e.changed(""),++W;else if(X.charAt(0)=="^")if(X.charAt(1)=="P"){var nt=vt(X.substring(2));try{var Kt=ze._new(nt);v.h[W]=_e.jsonPatch(Kt),++W}catch(Us){var St=C.caught(Us);throw $.isErrorEnabled()&&$.error("Invalid JSON patch "+nt+": "+St.get_message()+`
`+St.details()),new Y("The JSON Patch for the field "+W+" is not well-formed")}}else if(X.charAt(1)=="T"){var de=vt(X.substring(2));v.h[W]=_e.diffPatch(de),++W}else for(var Ye=B(X.substring(1)),ge=0;ge<Ye;)++ge,v.h[W]=_e.unchanged,++W;else{var re=_e.changed(vt(X));v.h[W]=re,++W}T=Z}return new G(h,_,v)}function lt(t,e,n){var a=t.indexOf(e,n);if(a==-1)throw new Y("string not found");return a}function vt(t){for(var e=Ft.ofString(t,kt.UTF8),n=0,a=0;n<e.length;)e.b[n]==37?(e.b[a++]=(Wt(e.b[n+1])<<4)+Wt(e.b[n+2]),n+=3):e.b[a++]=e.b[n++];return e.getString(0,a,kt.UTF8)}function Wt(t){var e=0;return e=t-97+10,e<=9&&(e=t-65+10,e<=9&&(e=t-48)),e}var Ft=function(t){this.length=t.byteLength,this.b=new Uint8Array(t),this.b.bufferValue=t,t.hxBytes=this,t.bytes=this.b};Ft.__name__=!0,Ft.ofString=function(t,e){if(e==kt.RawNative){for(var n=new Uint8Array(t.length<<1),a=0,h=t.length;a<h;){var T=a++,_=t.charCodeAt(T);n[T<<1]=_&255,n[T<<1|1]=_>>8}return new Ft(n.buffer)}for(var v=[],T=0;T<t.length;){var _=t.charCodeAt(T++);55296<=_&&_<=56319&&(_=_-55232<<10|t.charCodeAt(T++)&1023),_<=127?v.push(_):_<=2047?(v.push(192|_>>6),v.push(128|_&63)):_<=65535?(v.push(224|_>>12),v.push(128|_>>6&63),v.push(128|_&63)):(v.push(240|_>>18),v.push(128|_>>12&63),v.push(128|_>>6&63),v.push(128|_&63))}return new Ft(new Uint8Array(v).buffer)},Ft.prototype={getString:function(t,e,n){if(t<0||e<0||t+e>this.length)throw C.thrown(qs.OutsideBounds);n==null&&(n=kt.UTF8);var a="",h=this.b,_=t,v=t+e;switch(n._hx_index){case 0:for(;_<v;){var T=h[_++];if(T<128){if(T==0)break;a+=String.fromCodePoint(T)}else if(T<224){var W=(T&63)<<6|h[_++]&127;a+=String.fromCodePoint(W)}else if(T<240){var Z=(T&31)<<12|(h[_++]&127)<<6|h[_++]&127;a+=String.fromCodePoint(Z)}else{var X=(T&15)<<18|(h[_++]&127)<<12|(h[_++]&127)<<6|h[_++]&127;a+=String.fromCodePoint(X)}}break;case 1:for(;_<v;){var T=h[_++]|h[_++]<<8;a+=String.fromCodePoint(T)}break}return a},__class__:Ft};var kt=r["haxe.io.Encoding"]={__ename__:!0,__constructs__:null,UTF8:{_hx_name:"UTF8",_hx_index:0,__enum__:"haxe.io.Encoding",toString:i},RawNative:{_hx_name:"RawNative",_hx_index:1,__enum__:"haxe.io.Encoding",toString:i}};kt.__constructs__=[kt.UTF8,kt.RawNative];var wt=function(){this.body=""};wt.__name__=!0,wt.isEmpty=function(t){return t.length==0},wt.lengthOfBytes=function(t){return Ft.ofString(t,kt.UTF8).length},wt.prototype={getByteSize:function(){return wt.lengthOfBytes(this.body)},getBody:function(){return this.body},addSubRequest:function(t){wt.isEmpty(this.body)?this.body=t:this.body+=`\r
`+t},addSubRequestOnlyIfBodyIsLessThan:function(t,e){return wt.isEmpty(this.body)&&wt.lengthOfBytes(t)<=e?(this.body=t,!0):wt.lengthOfBytes(this.body)+wt.EOL_LEN+wt.lengthOfBytes(t)<=e?(this.body+=`\r
`+t,!0):!1},__class__:wt};var gs=function(){this.attempt=1,this._currentRetryDelay=0};gs.__name__=!0,gs.prototype={get_currentRetryDelay:function(){return this._currentRetryDelay},increase:function(){this.attempt>10?this._currentRetryDelay<6e4&&(this._currentRetryDelay*2<6e4?this._currentRetryDelay*=2:this._currentRetryDelay=6e4):this.attempt+=1},reset:function(t){this.attempt=1,this._currentRetryDelay=t},__class__:gs};var Rt=function(){};Rt.__name__=!0,Rt.__isInterface__=!0,Rt.__interfaces__=[ie],Rt.prototype={__class__:Rt};var Yt=function(t){this.subId=t,this.s_m=1};Yt.__name__=!0,Yt.prototype={toString:function(){var t="<m="+this.s_m;return this.s_s!=null&&(t+=" s="+this.s_s),this.s_c!=null&&(t+=" c="+this.s_c),t+=">",t},traceState:function(){et.isTraceEnabled()&&et.trace("sub#goto("+this.subId+") "+this.toString())},__class__:Yt};var me=function(t,e){this.lock=e.lock,this.subId=e.generateFreshSubId();var n;switch(t.fetch_mode()){case"COMMAND":n=me.is2LevelCommand(t)?new k(t,e,this.subId):new q(t,e,this.subId);break;case"DISTINCT":n=new N(t,e,this.subId);break;case"MERGE":n=new z(t,e,this.subId);break;case"RAW":n=new U(t,e,this.subId);break}this.m_strategy=n,this.state=new Yt(this.subId),this.m_client=e,this.m_subscription=t,this.m_client.relateSubManager(this),this.m_subscription.relate(this)};me.__name__=!0,me.__interfaces__=[Rt],me.is2LevelCommand=function(t){return t.fetch_mode()=="COMMAND"?t.getCommandSecondLevelFields()==null?t.getCommandSecondLevelFieldSchema()!=null:!0:!1},me.prototype={finalize:function(){this.m_strategy.evtDispose(),this.m_client.unrelateSubManager(this),this.m_subscription.unrelate(this)},evtExtSubscribe:function(){this.traceEvent("subscribe"),this.state.s_m==1&&(this.doSetActive(),this.doSubscribe(),this.state.s_m=2,this.state.traceState(),this.genSendControl())},evtExtUnsubscribe:function(){this.traceEvent("unsubscribe"),this.state.s_m==2?(this.doSetInactive(),this.finalize(),this.state.s_m=30,this.state.traceState()):this.state.s_m==3?(this.doUnsubscribe(),this.doSetInactive(),this.state.s_m=5,this.state.traceState(),this.genSendControl()):this.state.s_s==10&&(this.doUnsubscribe(),this.m_subscription.setInactive(),this.notifyOnUnsubscription(),this.state.s_m=5,this.state.s_s=null,this.state.s_c=null,this.state.traceState(),this.genSendControl())},evtExtAbort:function(){this.traceEvent("abort"),this.state.s_m==2?(this.state.s_m=2,this.state.traceState()):this.state.s_m==3?(this.doAbort(),this.doSetActive(),this.state.s_m=2,this.state.traceState()):this.state.s_s==10?(this.doAbort(),this.doSetActive(),this.notifyOnUnsubscription(),this.state.s_s=null,this.state.s_c=null,this.state.s_m=2,this.state.traceState()):this.state.s_m==5&&(this.finalize(),this.state.s_m=32,this.state.traceState())},evtREQERR:function(t,e,n){this.traceEvent("REQERR"),this.state.s_m==2&&t==this.m_lastAddReqId?(this.doSetInactive(),this.notifyOnSubscriptionError(e,n),this.finalize(),this.state.s_m=30,this.state.traceState()):this.state.s_m==5&&t==this.m_lastDeleteReqId?(this.finalize(),this.state.s_m=32,this.state.traceState()):this.state.s_c==22&&t==this.m_lastReconfReqId&&(Re.extEquals(this.m_reqMaxFrequency,this.m_subscription.fetch_requestedMaxFrequency())?(this.state.s_c=21,this.state.traceState()):(this.state.s_c=20,this.state.traceState(),this.evtCheckFrequency()))},evtREQOK:function(t){this.traceEvent("REQOK"),this.state.s_m==2&&t==this.m_lastAddReqId?(this.state.s_m=3,this.state.traceState()):this.state.s_m==5&&t==this.m_lastDeleteReqId?(this.finalize(),this.state.s_m=32,this.state.traceState()):this.state.s_c==22&&t==this.m_lastReconfReqId&&(this.doREQOKConfigure(),this.state.s_c=20,this.state.traceState(),this.evtCheckFrequency())},checkItems:function(t,e){return t!=null?t==e:!0},checkFields:function(t,e){return t!=null?t==e:!0},checkItemsAndFields:function(t,e,n,a){return this.checkItems(t,n)?this.checkFields(e,a):!1},evtSUBOK:function(t,e){if(this.traceEvent("SUBOK"),this.state.s_m==2||this.state.s_m==3){var a=this.m_subscription.fetch_items(),n=a!=null?a.length:null,a=this.m_subscription.fetch_fields(),h=a!=null?a.length:null;this.checkItemsAndFields(n,h,t,e)?(this.doSUBOK(t,e),this.notifyOnSubscription(),this.state.s_m=4,this.state.s_s=10,this.state.s_c=20,this.state.traceState(),this.evtCheckFrequency()):(this.doUnsubscribe(),this.doSetInactive(),this.notifyOnSubscriptionError_CountMismatch(n,h,t,e),this.state.s_m=5,this.state.traceState(),this.genSendControl())}},evtSUBCMD:function(t,e,n,a){if(this.traceEvent("SUBCMD"),this.state.s_m==2||this.state.s_m==3){var _=this.m_subscription.fetch_items(),h=_!=null?_.length:null,_=this.m_subscription.fetch_fields(),v=_!=null?_.length:null;this.checkItemsAndFields(h,v,t,e)?(this.doSUBCMD(t,e,a,n),this.notifyOnSubscription(),this.state.s_m=4,this.state.s_s=10,this.state.s_c=20,this.state.traceState(),this.evtCheckFrequency()):(this.doUnsubscribe(),this.doSetInactive(),this.notifyOnSubscriptionError_CountMismatch(h,v,t,e),this.state.s_m=5,this.state.traceState(),this.genSendControl())}},evtUNSUB:function(){this.traceEvent("UNSUB"),this.state.s_s==10?(this.doUNSUB(),this.doSetInactive(),this.notifyOnUnsubscription(),this.finalize(),this.state.s_m=31,this.state.s_s=null,this.state.s_c=null,this.state.traceState()):this.state.s_m==5&&(this.finalize(),this.state.s_m=32,this.state.traceState())},evtU:function(t,e){this.traceEvent("U"),this.state.s_s==10&&(this.doU(t,e),this.state.s_s=10,this.state.traceState())},evtEOS:function(t){this.traceEvent("EOS"),this.state.s_s==10&&(this.doEOS(t),this.state.s_s=10,this.state.traceState())},evtCS:function(t){this.traceEvent("CS"),this.state.s_s==10&&(this.doCS(t),this.state.s_s=10,this.state.traceState())},evtOV:function(t,e){this.traceEvent("OV"),this.state.s_s==10&&(this.doOV(t,e),this.state.s_s=10,this.state.traceState())},evtCONF:function(t){this.traceEvent("CONF"),this.state.s_s==10&&(this.doCONF(t),this.state.s_s=10,this.state.traceState())},evtCheckFrequency:function(){this.traceEvent("check.frequency"),this.state.s_c==20&&(Re.extEquals(this.m_subscription.fetch_requestedMaxFrequency(),this.m_currentMaxFrequency)?(this.state.s_c=21,this.state.traceState()):(this.doConfigure(),this.state.s_c=22,this.state.traceState(),this.genSendControl()))},evtExtConfigure:function(){this.traceEvent("configure"),this.state.s_c==21&&(this.state.s_c=20,this.state.traceState(),this.evtCheckFrequency())},isPending:function(){return this.state.s_m==2||this.state.s_m==5?!0:this.state.s_c==22},encode:function(t){if(this.state.s_m==2)return this.encodeAdd(t);if(this.state.s_m==5)return this.encodeDelete(t);if(this.state.s_c==22)return this.encodeReconf(t);throw new Y("Can't encode request")},encodeWS:function(){return`control\r
`+this.encode(!0)},getValue:function(t,e){return this.m_strategy.getValue(t,e)},getCommandValue:function(t,e,n){return this.m_strategy.getCommandValue(t,e,n)},encodeAdd:function(t){var e=new Pt;this.m_lastAddReqId=this.m_client.generateFreshReqId(),e.LS_reqId(this.m_lastAddReqId),e.LS_op("add"),e.LS_subId(this.subId),e.LS_mode(this.m_subscription.fetch_mode());var n=this.m_subscription.getItemGroup(),a=this.m_subscription.fetchItems();n!=null?e.LS_group(n):a!=null&&e.LS_group(a.join(" "));var h=this.m_subscription.getFieldSchema(),_=this.m_subscription.fetchFields();h!=null?e.LS_schema(h):_!=null&&e.LS_schema(_.join(" "));var v=this.m_subscription.getDataAdapter();v!=null&&e.LS_data_adapter(v);var T=this.m_subscription.getSelector();T!=null&&e.LS_selector(T);var W=this.m_subscription.fetch_requestedSnapshot();if(W!=null)switch(W._hx_index){case 0:e.LS_snapshot(!0);break;case 1:e.LS_snapshot(!1);break;case 2:e.LS_snapshot_Int(W.len);break}var Z=this.m_currentMaxFrequency;if(Z!=null)switch(Z._hx_index){case 0:e.LS_requested_max_frequency_Float(Z.max);break;case 1:e.LS_requested_max_frequency("unlimited");break;case 2:e.LS_requested_max_frequency("unfiltered");break}var X=this.m_subscription.fetch_requestedBufferSize();if(X!=null)switch(X._hx_index){case 0:e.LS_requested_buffer_size_Int(X.size);break;case 1:e.LS_requested_buffer_size("unlimited");break}return t&&e.LS_ack(!1),F.isInfoEnabled()&&F.info("Sending Subscription add: "+f.string(e)),e.getEncodedString()},encodeDelete:function(t){var e=new Pt;return this.m_lastDeleteReqId=this.m_client.generateFreshReqId(),e.LS_reqId(this.m_lastDeleteReqId),e.LS_subId(this.subId),e.LS_op("delete"),t&&e.LS_ack(!1),F.isInfoEnabled()&&F.info("Sending Subscription delete: "+f.string(e)),e.getEncodedString()},encodeReconf:function(t){var e=new Pt;this.m_lastReconfReqId=this.m_client.generateFreshReqId(),e.LS_reqId(this.m_lastReconfReqId),e.LS_subId(this.subId),e.LS_op("reconf");var n=this.m_reqMaxFrequency;if(n!=null)switch(n._hx_index){case 0:e.LS_requested_max_frequency_Float(n.max);break;case 1:e.LS_requested_max_frequency("unlimited");break;case 2:e.LS_requested_max_frequency("unfiltered");break}return F.isInfoEnabled()&&F.info("Sending Subscription configuration: "+f.string(e)),e.getEncodedString()},doSetActive:function(){this.m_subscription.setActive()},doSetInactive:function(){this.m_subscription.setInactive()},doSubscribe:function(){this.m_currentMaxFrequency=this.m_subscription.fetch_requestedMaxFrequency()},doUnsubscribe:function(){this.m_strategy.evtUnsubscribe(),this.m_subscription.unrelate(this)},doAbort:function(){this.m_lastAddReqId=null,this.m_lastDeleteReqId=null,this.m_lastReconfReqId=null,this.m_reqMaxFrequency=null,this.m_currentMaxFrequency=this.m_subscription.fetch_requestedMaxFrequency(),this.m_strategy.evtAbort()},genSendControl:function(){this.m_client.evtSendControl(this)},notifyOnSubscription:function(){this.m_subscription.fireOnSubscription(this.subId)},notifyOnUnsubscription:function(){this.m_subscription.fireOnUnsubscription(this.subId)},notifyOnSubscriptionError:function(t,e){this.m_subscription.fireOnSubscriptionError(this.subId,t,e)},notifyOnSubscriptionError_CountMismatch:function(t,e,n,a){this.checkItems(t,n)?this.m_subscription.fireOnSubscriptionError(this.subId,61,"Expected "+e+" fields but got "+a):this.m_subscription.fireOnSubscriptionError(this.subId,61,"Expected "+t+" items but got "+n)},doConfigure:function(){this.m_reqMaxFrequency=this.m_subscription.fetch_requestedMaxFrequency(),this.m_strategy.evtSetRequestedMaxFrequency(this.m_reqMaxFrequency)},doREQOKConfigure:function(){this.m_currentMaxFrequency=this.m_reqMaxFrequency},doSUBOK:function(t,e){this.m_subscription.setSubscribed(this.subId,t,e),this.m_strategy.evtOnSUB(t,e,null,null,null)},doSUBCMD:function(t,e,n,a){this.m_subscription.setSubscribedCMD(this.subId,t,e,n,a),this.m_strategy.evtOnSUB(t,e,n,a,this.m_currentMaxFrequency)},doUNSUB:function(){this.m_strategy.evtOnUNSUB()},doU:function(t,e){if(t>M.sure(this.m_subscription.fetch_nItems()))throw new Y("Assertion failure: itemIdx <= m_subscription.fetch_nItems().sure()");this.m_strategy.evtUpdate(t,e)},doEOS:function(t){this.m_strategy.evtOnEOS(t),this.m_subscription.fireOnEndOfSnapshot(t,this.subId)},doCS:function(t){this.m_strategy.evtOnCS(t),this.m_subscription.fireOnClearSnapshot(t,this.subId)},doOV:function(t,e){this.m_subscription.fireOnLostUpdates(t,e,this.subId)},doCONF:function(t){this.m_strategy.evtOnCONF(t)},traceEvent:function(t){et.isTraceEnabled()&&et.trace("sub#"+t+"("+this.subId+") in "+f.string(this.state))},__class__:me};var pe=function(t,e){this.s_m=1,this.subId=t,this.lock=e.lock,this.m_client=e,e.relateSubManager(this)};pe.__name__=!0,pe.__interfaces__=[Rt],pe.prototype={finalize:function(){this.m_client.unrelateSubManager(this)},evtExtAbort:function(){this.traceEvent("abort"),this.s_m==2&&(this.finalize(),this.goto(3))},evtREQERR:function(t,e,n){this.traceEvent("REQERR"),this.s_m==2&&t==this.m_lastDeleteReqId&&(this.finalize(),this.goto(3))},evtREQOK:function(t){this.traceEvent("REQOK"),this.s_m==2&&t==this.m_lastDeleteReqId&&(this.finalize(),this.goto(3))},evtSUBOK:function(t,e){this.traceEvent("SUBOK"),this.s_m==1&&(this.goto(2),this.genSendControl())},evtSUBCMD:function(t,e,n,a){this.traceEvent("SUBCMD"),this.s_m==1&&(this.goto(2),this.genSendControl())},evtUNSUB:function(){this.traceEvent("UNSUB"),this.s_m==2&&(this.finalize(),this.goto(3))},evtU:function(t,e){this.traceEvent("U"),this.s_m==1&&(this.goto(2),this.genSendControl())},evtEOS:function(t){this.traceEvent("EOS"),this.s_m==1&&(this.goto(2),this.genSendControl())},evtCS:function(t){this.traceEvent("CS"),this.s_m==1&&(this.goto(2),this.genSendControl())},evtOV:function(t,e){this.traceEvent("OV"),this.s_m==1&&(this.goto(2),this.genSendControl())},evtCONF:function(t){this.traceEvent("CONF"),this.s_m==1&&(this.goto(2),this.genSendControl())},isPending:function(){return this.s_m==2},encode:function(t){if(this.isPending())return this.encodeDelete(t);throw new Y("Can't encode unsubscription request")},encodeWS:function(){return`control\r
`+this.encode(!0)},genSendControl:function(){this.m_client.evtSendControl(this)},encodeDelete:function(t){var e=new Pt;return this.m_lastDeleteReqId=this.m_client.generateFreshReqId(),e.LS_reqId(this.m_lastDeleteReqId),e.LS_subId(this.subId),e.LS_op("delete"),t&&e.LS_ack(!1),e.LS_cause("zombie"),F.isInfoEnabled()&&F.info("Sending Subscription delete: "+f.string(e)),e.getEncodedString()},traceEvent:function(t){et.isTraceEnabled()&&et.trace("zsub#"+t+"("+this.subId+") in "+this.s_m)},goto:function(t){this.s_m=t,et.isTraceEnabled()&&et.trace("zsub#goto("+this.subId+") "+this.s_m)},__class__:pe};var ts=function(){};ts.__name__=!0,ts.__interfaces__=[mo],ts.prototype={__class__:ts};var jt=function(t,e,n,a){this.m_subId=a,this.itemIdx=t,this.subscription=e,this.client=n,this.lock=n.lock};jt.__name__=!0,jt.prototype={finalize:function(){},evtUpdate:function(t){this.fatalError()},evtOnEOS:function(){this.fatalError()},evtOnCS:function(){this.fatalError()},evtDispose:function(t){this.fatalError()},getValue:function(t){return this.currValues!=null?Et.toString(this.currValues.h[t]):null},getCommandValue:function(t,e){throw new Y("Unsupported operation")},fatalError:function(){throw new Y("Unsupported operation")},doFirstUpdate:function(t){this.doUpdate(t,!1)},doUpdate0:function(t){this.doUpdate(t,!1)},doFirstSnapshot:function(t){this.doUpdate(t,!0)},doSnapshot:function(t){this.doUpdate(t,!0)},doUpdate:function(t,e){var n=this.currValues;this.currValues=wr(n,t);var a=Hi(n,this.currValues),h=yo(n,t),_=new qe(this.itemIdx,this.subscription,this.currValues,a,e,h);this.subscription.fireOnItemUpdate(_,this.m_subId)},__class__:jt};var Ee=function(t,e,n,a){this.keys=new It,jt.call(this,t,e,n,a),this.s_m=e.hasSnapshot()?3:1};Ee.__name__=!0,Ee.__super__=jt,Ee.prototype=l(jt.prototype,{finalize:function(){},unrelate:function(t){var e=this.keys;Object.prototype.hasOwnProperty.call(e.h,t)&&delete e.h[t]},evtUpdate:function(t){switch(this.traceEvent("update"),this.s_m){case 1:this.doFirstUpdate(t),this.goto(2);break;case 2:this.doUpdate0(t),this.goto(2);break;case 3:this.doFirstSnapshot(t),this.goto(4);break;case 4:this.doSnapshot(t),this.goto(4);break}},evtOnEOS:function(){switch(this.traceEvent("onEOS"),this.s_m){case 3:this.goto(1);break;case 4:this.goto(2);break}},evtOnCS:function(){throw new Y("Unsupported method")},evtDispose:function(t){switch(this.traceEvent("dispose"),this.s_m){case 1:case 2:case 3:case 4:this.finalize(),this.goto(5),this.genDisposeKeys(),t.unrelate(this.itemIdx);break}},getCommandValue:function(t,e){var n=this.keys.h[t];return n!=null?n.getCommandValue(e):null},createKey:function(t){throw new Y("Abstract method")},doUpdate:function(t,e){this.currValues=wr(this.currValues,t),this.selectKey().evtUpdate(this.currValues,e)},genDisposeKeys:function(){for(var t=It.createCopy(this.keys.h).h,e=Object.keys(t),n=e.length,a=0;a<n;)t[e[a++]].evtDispose()},selectKey:function(){var t=this.currValues,n=this.subscription.getKeyPosition(),e=Et.toString(t.h[n]),n=this.keys.h[e];return n==null&&(n=this.createKey(e),this.keys.h[e]=n),n},goto:function(t){this.s_m=t,et.isTraceEnabled()&&et.trace("sub#itm#goto("+this.m_subId+":"+this.itemIdx+") in "+this.s_m)},traceEvent:function(t){et.isTraceEnabled()&&et.trace("sub#itm#"+t+"("+this.m_subId+":"+this.itemIdx+") in "+this.s_m)},__class__:Ee});var Js=function(t,e,n,a){Ee.call(this,t,e,n,a)};Js.__name__=!0,Js.__super__=Ee,Js.prototype=l(Ee.prototype,{evtOnCS:function(){switch(this.traceEvent("onCS"),this.s_m){case 1:case 2:case 3:case 4:this.goto(this.s_m),this.genDisposeKeys();break}},createKey:function(t){return new ei(t,this)},__class__:Js});var vs=function(t,e,n,a,h){Ee.call(this,t,e,a,h),this.strategy=n};vs.__name__=!0,vs.__super__=Ee,vs.prototype=l(Ee.prototype,{evtOnCS:function(){switch(this.traceEvent("onCS"),this.s_m){case 1:case 2:case 3:case 4:this.goto(this.s_m),this.genDisposeKeys(),this.genOnRealMaxFrequency2LevelRemoved();break}},evtSetRequestedMaxFrequency:function(){switch(this.traceEvent("setRequestedMaxFrequency"),this.s_m){case 1:case 2:case 3:case 4:this.goto(this.s_m),this.genSetRequestedMaxFrequency();break}},createKey:function(t){return new Os(t,this)},genSetRequestedMaxFrequency:function(){for(var t=this.keys.h,e=Object.keys(t),n=e.length,a=0;a<n;)t[e[a++]].evtSetRequestedMaxFrequency()},genOnRealMaxFrequency2LevelRemoved:function(){this.strategy.evtOnRealMaxFrequency2LevelRemoved()},__class__:vs});var Zs=function(t,e,n,a){jt.call(this,t,e,n,a),this.s_m=e.hasSnapshot()?3:1};Zs.__name__=!0,Zs.__super__=jt,Zs.prototype=l(jt.prototype,{evtUpdate:function(t){switch(this.traceEvent("update"),this.s_m){case 1:this.doFirstUpdate(t),this.goto(2);break;case 2:this.doUpdate0(t),this.goto(2);break;case 3:this.doFirstSnapshot(t),this.goto(4);break;case 4:this.doSnapshot(t),this.goto(4);break}},evtOnEOS:function(){switch(this.traceEvent("onEOS"),this.s_m){case 3:this.goto(1);break;case 4:this.goto(2);break}},evtOnCS:function(){},evtDispose:function(t){switch(this.traceEvent("dispose"),this.s_m){case 1:case 2:case 3:case 4:this.finalize(),this.goto(5),t.unrelate(this.itemIdx);break}},goto:function(t){this.s_m=t,et.isTraceEnabled()&&et.trace("sub#itm#goto("+this.m_subId+":"+this.itemIdx+") "+this.s_m)},traceEvent:function(t){et.isTraceEnabled()&&et.trace("sub#itm#"+t+"("+this.m_subId+":"+this.itemIdx+") in "+this.s_m)},__class__:Zs});var Ls=function(){};Ls.__name__=!0,Ls.__isInterface__=!0,Ls.prototype={__class__:Ls};var Xs=function(t,e,n,a){this.s_m=1,jt.call(this,t,e,n,a)};Xs.__name__=!0,Xs.__super__=jt,Xs.prototype=l(jt.prototype,{evtUpdate:function(t){switch(this.traceEvent("update"),this.s_m){case 1:this.subscription.hasSnapshot()?(this.doSnapshot(t),this.goto(2)):(this.doFirstUpdate(t),this.goto(3));break;case 2:this.doUpdate0(t),this.goto(3);break;case 3:this.doUpdate0(t),this.goto(3);break}},evtDispose:function(t){switch(this.traceEvent("dispose"),this.s_m){case 1:case 2:case 3:this.finalize(),this.goto(4),t.unrelate(this.itemIdx);break}},goto:function(t){this.s_m=t,et.isTraceEnabled()&&et.trace("sub#itm#goto("+this.m_subId+":"+this.itemIdx+") "+this.s_m)},traceEvent:function(t){et.isTraceEnabled()&&et.trace("sub#itm#"+t+"("+this.m_subId+":"+this.itemIdx+") in "+this.s_m)},__class__:Xs});var ti=function(t,e,n,a){this.s_m=1,jt.call(this,t,e,n,a)};ti.__name__=!0,ti.__super__=jt,ti.prototype=l(jt.prototype,{evtUpdate:function(t){switch(this.traceEvent("update"),this.s_m){case 1:this.doFirstUpdate(t),this.goto(2);break;case 2:this.doUpdate0(t),this.goto(2);break}},evtDispose:function(t){switch(this.traceEvent("dispose"),this.s_m){case 1:case 2:this.finalize(),this.goto(3),t.unrelate(this.itemIdx);break}},goto:function(t){this.s_m=t,et.isTraceEnabled()&&et.trace("sub#itm#goto("+this.m_subId+":"+this.itemIdx+") "+this.s_m)},traceEvent:function(t){et.isTraceEnabled()&&et.trace("sub#itm#"+t+"("+this.m_subId+":"+this.itemIdx+") in "+this.s_m)},__class__:ti});var ce=function(t,e,n,a,h,_){var v=e.fetch_items(),T=e.fetch_fields(),W=e.fetch_fields2();this.m_itemIdx=t,this.m_items=ii(v),this.m_nFields=M.sure(e.fetch_nFields()),this.m_fields=ii(T),this.m_fields2=ii(W),this.m_newValues=n.copy(),this.m_changedFields=a.copy(),this.m_isSnapshot=h,this.m_jsonPatches=_};ce.__name__=!0,ce.__super__=ts,ce.prototype=l(ts.prototype,{getItemName:function(){return this.m_items!=null?this.m_items.h[this.m_itemIdx]:null},getItemPos:function(){return this.m_itemIdx},isSnapshot:function(){return this.m_isSnapshot},getValue:function(t){return typeof t=="number"&&(t|0)===t?this.getValuePos(t):this.getValueName(f.string(t))},isValueChanged:function(t){return typeof t=="number"&&(t|0)===t?this.isValueChangedPos(t):this.isValueChangedName(f.string(t))},_getValueAsJSONPatchIfAvailable:function(t){if(typeof t=="number"&&(t|0)===t)return this.m_jsonPatches.h[t];var e=this.getFieldIdxFromName(f.string(t));return e!=null?this.m_jsonPatches.h[e]:null},getValueAsJSONPatchIfAvailable:function(t){return this._getValueAsJSONPatchIfAvailable(t)},forEachChangedField:function(t){for(var e=this.m_changedFields.iterator();e.current<e.array.length;){var n=e.array[e.current++];try{t(this.getFieldNameFromIdx(n),n,Et.toString(this.m_newValues.h[n]))}catch(h){var a=C.caught(h);K.isErrorEnabled()&&K.error(`An exception was thrown while executing the Function passed to the forEachChangedField method
`+a.details())}}},forEachField:function(t){for(var e=this.m_newValues,n=e.keys();n.hasNext();){var a=n.next(),h=e.get(a);try{t(this.getFieldNameFromIdx(a),a,Et.toString(h))}catch(v){var _=C.caught(v);K.isErrorEnabled()&&K.error(`An exception was thrown while executing the Function passed to the forEachField method
`+_.details())}}},getValuePos:function(t){return Et.toString(this.m_newValues.h[t])},getValueName:function(t){if(this.m_fields==null&&this.m_fields2==null)throw new Y(Ln);var e=this.getFieldIdxFromName(t);if(e==null)throw new P(On);return Et.toString(this.m_newValues.h[e])},isValueChangedPos:function(t){return this.m_changedFields.contains(t)},isValueChangedName:function(t){if(this.m_fields==null&&this.m_fields2==null)throw new Y(Ln);var e=this.getFieldIdxFromName(t);if(e==null)throw new P(On);return this.m_changedFields.contains(e)},getFieldNameFromIdx:function(t){return t<=this.m_nFields?this.m_fields!=null?this.m_fields.h[t]:null:this.m_fields2!=null?this.m_fields2.h[t-this.m_nFields]:null},getFieldIdxFromName:function(t){var e,n,a,h=this.m_fields;if(h!=null?(n=xn(M.sure(h),t),a=n!=null):a=!1,a)return n;var a;return e=this.m_fields2,e!=null?(n=xn(M.sure(e),t),a=n!=null):a=!1,a?this.m_nFields+M.sure(n):null},toString:function(){var t="";t="[";for(var e=this.m_newValues,n=e.keys();n.hasNext();){var a=n.next(),h=e.get(a),_=this.getFieldNameFromIdx(a),v=_??(a==null?"null":""+a),T=f.string(h);a>1&&(t+=","),t+=v==null?"null":""+v,t+=":",t+=T==null?"null":""+T}return t+="]",t},__class__:ce});var qe=function(t,e,n,a,h,_){var v=e.fetch_items(),T=e.fetch_fields();this.m_itemIdx=t,this.m_items=ii(v),this.m_nFields=M.sure(e.fetch_nFields()),this.m_fields=ii(T),T!=null&&T.length!=this.m_nFields&&yt.isErrorEnabled()&&yt.error("Expected "+this.m_nFields+" field names but got "+T.length+": "+f.string(T)),this.m_newValues=n.copy(),this.m_changedFields=a.copy(),this.m_isSnapshot=h,this.m_jsonPatches=_};qe.__name__=!0,qe.__super__=ts,qe.prototype=l(ts.prototype,{getItemName:function(){return this.m_items!=null?this.m_items.h[this.m_itemIdx]:null},getItemPos:function(){return this.m_itemIdx},isSnapshot:function(){return this.m_isSnapshot},getValue:function(t){return typeof t=="number"&&(t|0)===t?this.getValuePos(t):this.getValueName(f.string(t))},isValueChanged:function(t){return typeof t=="number"&&(t|0)===t?this.isValueChangedPos(t):this.isValueChangedName(f.string(t))},_getValueAsJSONPatchIfAvailable:function(t){if(typeof t=="number"&&(t|0)===t)return this.m_jsonPatches.h[t];var e=this.getFieldIdxFromName(f.string(t));return this.m_jsonPatches.h[e]},getValueAsJSONPatchIfAvailable:function(t){return this._getValueAsJSONPatchIfAvailable(t)},forEachChangedField:function(t){for(var e=this.m_changedFields.iterator();e.current<e.array.length;){var n=e.array[e.current++];try{t(this.m_fields!=null?this.m_fields.h[n]:null,n,Et.toString(this.m_newValues.h[n]))}catch(h){var a=C.caught(h);K.isErrorEnabled()&&K.error(`An exception was thrown while executing the Function passed to the forEachChangedField method
`+a.details())}}},forEachField:function(t){for(var e=this.m_newValues,n=e.keys();n.hasNext();){var a=n.next(),h=e.get(a);try{t(this.m_fields!=null?this.m_fields.h[a]:null,a,Et.toString(h))}catch(v){var _=C.caught(v);K.isErrorEnabled()&&K.error(`An exception was thrown while executing the Function passed to the forEachField method
`+_.details())}}},getValuePos:function(t){if(!(1<=t&&t<=this.m_nFields))throw new P(Rr);return Et.toString(this.m_newValues.h[t])},getValueName:function(t){var e=this.getFieldIdxFromName(t);return Et.toString(this.m_newValues.h[e])},isValueChangedPos:function(t){if(!(1<=t&&t<=this.m_nFields))throw new P(Rr);return this.m_changedFields.contains(t)},isValueChangedName:function(t){var e=this.getFieldIdxFromName(t);return this.m_changedFields.contains(e)},getFieldNameOrNullFromIdx:function(t){return this.m_fields!=null?this.m_fields.h[t]:null},getFieldIdxFromName:function(t){if(this.m_fields==null)throw new Y(Ln);var e=xn(this.m_fields,t);if(e==null)throw new P(On);return e},toString:function(){var t="";t="[";for(var e=this.m_newValues,n=e.keys();n.hasNext();){var a=n.next(),h=e.get(a),_=this.getFieldNameOrNullFromIdx(a),v=_??(a==null?"null":""+a),T=f.string(h);a>1&&(t+=","),t+=v==null?"null":""+v,t+=":",t+=T==null?"null":""+T}return t+="]",t},__class__:qe});var ei=function(t,e){this.s_m=1,this.keyName=t,this.item=e,this.lock=e.lock};ei.__name__=!0,ei.__interfaces__=[Ls],ei.prototype={finalize:function(){this.currKeyValues=null,this.item.unrelate(this.keyName)},evtUpdate:function(t,e){switch(this.traceEvent("update"),this.s_m){case 1:this.isDelete(t)?(this.doLightDelete(t,e),this.finalize(),this.goto(3)):(this.doFirstUpdate(t,e),this.goto(2));break;case 2:this.isDelete(t)?(this.doDelete(t,e),this.finalize(),this.goto(3)):(this.doUpdate(t,e),this.goto(2));break}},evtDispose:function(){switch(this.traceEvent("dispose"),this.s_m){case 1:case 2:this.finalize(),this.goto(3);break}},evtSetRequestedMaxFrequency:function(){},getCommandValue:function(t){return this.currKeyValues!=null?Et.toString(this.currKeyValues.h[t]):null},doFirstUpdate:function(t,e){var n=M.sure(this.item.subscription.fetch_nFields()),a=this.item.subscription.getCommandPosition();this.currKeyValues=t,this.currKeyValues.h[a]=Nt.StringVal("ADD");var h=new Ct(new d(1,n+1));this.fireOnItemUpdate(new qe(this.item.itemIdx,this.item.subscription,this.currKeyValues,h,e,new ht))},doUpdate:function(t,e){var n=this.item.subscription.getCommandPosition(),a=this.currKeyValues;this.currKeyValues=t,this.currKeyValues.h[n]=Nt.StringVal("UPDATE");var h=Hi(a,this.currKeyValues);this.fireOnItemUpdate(new qe(this.item.itemIdx,this.item.subscription,this.currKeyValues,h,e,new ht))},doLightDelete:function(t,e){this.currKeyValues=null;var n=new Ct(t.keys()),a=new qe(this.item.itemIdx,this.item.subscription,this.nullify(t),n,e,new ht);this.item.unrelate(this.keyName),this.fireOnItemUpdate(a)},doDelete:function(t,e){this.currKeyValues=null;var n=new Ct(t.keys()).subtracting([this.item.subscription.getKeyPosition()]),a=new qe(this.item.itemIdx,this.item.subscription,this.nullify(t),n,e,new ht);this.item.unrelate(this.keyName),this.fireOnItemUpdate(a)},nullify:function(t){for(var e=new ht,n=t,a=n.keys();a.hasNext();){var h=a.next(),_=n.get(h),v=h==this.item.subscription.getCommandPosition()||h==this.item.subscription.getKeyPosition();e.h[h]=v?_:null}return e},isDelete:function(t){var e=this.item.subscription.getCommandPosition();return Et.toString(t.h[e])=="DELETE"},fireOnItemUpdate:function(t){this.item.subscription.fireOnItemUpdate(t,this.item.m_subId)},goto:function(t){this.s_m=t,this.traceEvent("goto")},traceEvent:function(t){if(et.isTraceEnabled()){var e=this.item.m_subId,n=this.item.itemIdx;et.isTraceEnabled()&&et.trace("sub#key#"+t+"("+e+":"+n+":"+this.keyName+") in "+this.s_m)}},__class__:ei};var Os=function(t,e){this.s_m=1,this.keyName=t,this.item=e,this.lock=e.lock};Os.__name__=!0,Os.__interfaces__=[Ls],Os.prototype={finalize:function(){this.currKeyValues=null,this.currKey2Values=null,this.item.unrelate(this.keyName)},evtUpdate:function(t,e){switch(this.traceEvent("update"),this.s_m){case 1:if(this.isDelete(t))this.doLightDelete(t,e),this.finalize(),this.goto(11),this.genOnRealMaxFrequency2LevelRemoved();else{var n=this.create2LevelSubscription();n!=null?(this.doFirstUpdate(t,e),this.subscription2Level=n,this.goto(4),this.item.strategy.client.subscribeExt(n,!0)):(this.doFirstUpdate(t,e),this.notify2LevelIllegalArgument(),this.goto(3))}break;case 3:this.isDelete(t)?(this.doDelete1LevelOnly(t,e),this.finalize(),this.goto(11),this.genOnRealMaxFrequency2LevelRemoved()):(this.doUpdate(t,e),this.goto(3));break;case 4:this.isDelete(t)?(this.doDelete(t,e),this.finalize(),this.goto(11),this.genOnRealMaxFrequency2LevelRemoved()):(this.doUpdate(t,e),this.goto(4));break;case 5:this.isDelete(t)?(this.doDeleteExt(t,e),this.finalize(),this.goto(11),this.genOnRealMaxFrequency2LevelRemoved()):(this.doUpdate1Level(t,e),this.goto(5));break}},evtDispose:function(){switch(this.traceEvent("dispose"),this.s_m){case 1:case 2:case 3:this.finalize(),this.goto(10);break;case 4:case 5:this.doUnsubscribe(),this.finalize(),this.goto(12);break}},evtOnSubscriptionError2Level:function(t,e){this.traceEvent("onSubscriptionError2Level"),this.s_m==4&&(this.notify2LevelSubscriptionError(t,e),this.goto(3))},evtUpdate2Level:function(t){switch(this.traceEvent("update2Level"),this.s_m){case 4:this.doUpdate2Level(t),this.goto(5);break;case 5:this.doUpdate2Level(t),this.goto(5);break}},evtOnUnsubscription2Level:function(){switch(this.traceEvent("onUnsubscription2Level"),this.s_m){case 4:case 5:this.doUnsetRealMaxFrequency(),this.goto(this.s_m),this.genOnRealMaxFrequency2LevelRemoved();break}},evtOnItemLostUpdates2Level:function(t){switch(this.traceEvent("onItemLostUpdates2Level"),this.s_m){case 4:case 5:this.goto(this.s_m),this.notify2LevelLostUpdates(t);break}},evtOnRealMaxFrequency2Level:function(t){switch(this.traceEvent("onRealMaxFrequency2Level"),this.s_m){case 4:case 5:this.doSetRealMaxFrequency(t),this.goto(this.s_m),this.genOnRealMaxFrequency2LevelAdded();break}},evtSetRequestedMaxFrequency:function(){switch(this.traceEvent("setRequestedMaxFrequency"),this.s_m){case 4:case 5:this.doChangeRequestedMaxFrequency(),this.goto(this.s_m);break}},getCommandValue:function(t){var e=this.currKeyValues;if(e!=null&&e.h[t]!=null)return Et.toString(e.h[t]);var e=this.currKey2Values,n=this.item.subscription.fetch_nFields();return e!=null&&n!=null?e.h[t-n]:null},doFirstUpdate:function(t,e){var n=this.item.subscription.getCommandPosition();this.currKeyValues=t,this.currKeyValues.h[n]=Nt.StringVal("ADD");var a=Hi(null,this.currKeyValues);this.fireOnItemUpdate(new ce(this.item.itemIdx,this.item.subscription,this.currKeyValues,a,e,new ht))},doUpdate:function(t,e){var n=this.item.subscription.getCommandPosition(),a=this.currKeyValues;this.currKeyValues=t,this.currKeyValues.h[n]=Nt.StringVal("UPDATE");var h=Hi(a,this.currKeyValues);this.fireOnItemUpdate(new ce(this.item.itemIdx,this.item.subscription,this.currKeyValues,h,e,new ht))},doUpdate2Level:function(t){var e=this.item.subscription.getCommandPosition(),n=M.sure(this.item.subscription.fetch_nFields()),a=M.sure(this.currKeyValues).copy();this.currKeyValues.h[e]=Nt.StringVal("UPDATE"),this.currKey2Values=bo(t);for(var h=M.sure(this.currKeyValues).copy(),X=this.currKey2Values,nt=X.keys();nt.hasNext();){var _=nt.next(),v=X.get(_);h.h[_+n]=v==null?null:Nt.StringVal(v)}var T=new Ct;Et.toString(a.h[e])!=Et.toString(this.currKeyValues.h[e])&&T.insert(e);for(var X=wo(t),nt=X.keys();nt.hasNext();){var _=nt.next();X.get(_),T.insert(_+n)}for(var W=t.isSnapshot(),Z=new ht,X=this.currKey2Values,nt=X.keys();nt.hasNext();){var _=nt.next();X.get(_);var Kt=t.getValueAsJSONPatchIfAvailable(_);Kt!=null&&(Z.h[_+n]=Kt)}this.fireOnItemUpdate(new ce(this.item.itemIdx,this.item.subscription,h,T,W,Z))},doUpdate1Level:function(t,e){var n=this.item.subscription.getCommandPosition(),a=M.sure(this.item.subscription.fetch_nFields()),h=M.sure(this.currKeyValues);this.currKeyValues=t,this.currKeyValues.h[n]=Nt.StringVal("UPDATE");for(var _=M.sure(this.currKeyValues).copy(),v=M.sure(this.currKey2Values),T=v.keys();T.hasNext();){var W=T.next(),Z=v.get(W);_.h[W+a]=Z==null?null:Nt.StringVal(Z)}for(var X=new Ct,nt=1,Kt=a+1;nt<Kt;){var St=nt++;Et.toString(h.h[St])!=Et.toString(_.h[St])&&X.insert(St)}this.fireOnItemUpdate(new ce(this.item.itemIdx,this.item.subscription,_,X,e,new ht))},doDelete:function(t,e){var n=M.sure(this.item.subscription.fetch_nFields()),a=this.item.subscription.getKeyPosition(),h=this.item.subscription.getCommandPosition();this.currKeyValues=null;for(var _=new Ct(new d(1,n+1)).subtracting([a]),v=new ht,T=1,W=n+1;T<W;)v.h[T++]=null;v.h[a]=Nt.StringVal(this.keyName),v.h[h]=Nt.StringVal("DELETE");var Z=new ce(this.item.itemIdx,this.item.subscription,v,_,e,new ht);this.item.unrelate(this.keyName);var X=M.sure(this.subscription2Level);X.removeListener(M.sure(this.listener2Level)),M.sure(this.listener2Level).disable(),this.subscription2Level=null,this.listener2Level=null,this.item.strategy.client.unsubscribe(X),this.fireOnItemUpdate(Z)},doDeleteExt:function(t,e){var n=M.sure(this.item.subscription.fetch_nFields()),a=this.item.subscription.getKeyPosition(),h=this.item.subscription.getCommandPosition(),_=n+p.count(M.sure(this.currKey2Values));this.currKeyValues=null,this.currKey2Values=null;for(var v=new Ct(new d(1,_+1)).subtracting([a]),T=new ht,W=1,Z=_+1;W<Z;)T.h[W++]=null;T.h[a]=Nt.StringVal(this.keyName),T.h[h]=Nt.StringVal("DELETE");var X=new ce(this.item.itemIdx,this.item.subscription,T,v,e,new ht);this.item.unrelate(this.keyName);var nt=M.sure(this.subscription2Level);nt.removeListener(M.sure(this.listener2Level)),M.sure(this.listener2Level).disable(),this.subscription2Level=null,this.listener2Level=null,this.item.strategy.client.unsubscribe(nt),this.fireOnItemUpdate(X)},doLightDelete:function(t,e){var n=M.sure(this.item.subscription.fetch_nFields()),a=this.item.subscription.getKeyPosition(),h=this.item.subscription.getCommandPosition();this.currKeyValues=null;for(var _=new Ct(new d(1,n+1)),v=new ht,T=1,W=n+1;T<W;)v.h[T++]=null;v.h[a]=t.h[a],v.h[h]=t.h[h],this.fireOnItemUpdate(new ce(this.item.itemIdx,this.item.subscription,v,_,e,new ht))},doDelete1LevelOnly:function(t,e){var n=M.sure(this.item.subscription.fetch_nFields()),a=this.item.subscription.getKeyPosition(),h=this.item.subscription.getCommandPosition();this.currKeyValues=null;for(var _=new Ct(new d(1,n+1)).subtracting([a]),v=new ht,T=1,W=n+1;T<W;)v.h[T++]=null;v.h[a]=t.h[a],v.h[h]=t.h[h],this.fireOnItemUpdate(new ce(this.item.itemIdx,this.item.subscription,v,_,e,new ht))},doChangeRequestedMaxFrequency:function(){M.sure(this.subscription2Level).setRequestedMaxFrequency(Re.toString(this.item.strategy.requestedMaxFrequency))},doSetRealMaxFrequency:function(t){this.realMaxFrequency=t},doUnsetRealMaxFrequency:function(){this.realMaxFrequency=null},genOnRealMaxFrequency2LevelAdded:function(){this.item.strategy.evtOnRealMaxFrequency2LevelAdded(this.realMaxFrequency)},genOnRealMaxFrequency2LevelRemoved:function(){this.item.strategy.evtOnRealMaxFrequency2LevelRemoved()},doUnsubscribe:function(){if(this.subscription2Level==null)throw new Y("Assertion failure: subscription2Level != null");if(this.listener2Level==null)throw new Y("Assertion failure: listener2Level != null");var t=this.subscription2Level;t.removeListener(this.listener2Level),this.listener2Level.disable(),this.subscription2Level=null,this.listener2Level=null,this.item.strategy.client.unsubscribe(t)},notify2LevelIllegalArgument:function(){this.listener2Level=null,this.subscription2Level=null,this.item.subscription.fireOnSubscriptionError2Level(this.keyName,14,"The received key value is not a valid name for an Item",this.item.m_subId,this.item.itemIdx)},notify2LevelSubscriptionError:function(t,e){this.listener2Level=null,this.subscription2Level=null,this.item.subscription.fireOnSubscriptionError2Level(this.keyName,t,e,this.item.m_subId,this.item.itemIdx)},notify2LevelLostUpdates:function(t){this.item.subscription.fireOnLostUpdates2Level(this.keyName,t,this.item.m_subId,this.item.itemIdx)},fireOnItemUpdate:function(t){this.item.subscription.fireOnItemUpdate(t,this.item.m_subId)},create2LevelSubscription:function(){this.listener2Level=new si(this);var t=this.item.subscription,e=new ke("MERGE",null,null),n=[this.keyName];if(!Ve.allValidNames(n))return null;e.setItems(n.slice());var a=t.getCommandSecondLevelFields();return a!=null?e.setFields(a):e.setFieldSchema(t.getCommandSecondLevelFieldSchema()),e.setDataAdapter(t.getCommandSecondLevelDataAdapter()),e.setRequestedSnapshot(Fs.toString(xe.SnpYes)),e.setRequestedMaxFrequency(Re.toString(this.item.strategy.requestedMaxFrequency)),e.addListener(M.sure(this.listener2Level)),e.setInternal(),e},isDelete:function(t){var e=this.item.subscription.getCommandPosition();return Et.toString(t.h[e])=="DELETE"},goto:function(t){this.s_m=t,this.traceEvent("goto")},traceEvent:function(t){if(et.isTraceEnabled()){var e=this.item.m_subId,n=this.item.itemIdx;et.isTraceEnabled()&&et.trace("sub#key#"+t+"("+e+":"+n+":"+this.keyName+") in "+this.s_m)}},__class__:Os};var si=function(t){this.m_disabled=!1,this.key=t};si.__name__=!0,si.__interfaces__=[po],si.prototype={disable:function(){var t=this;this.key.lock.synchronized(function(){return t.m_disabled=!0})},synchronized:function(t){var e=this;this.key.lock.synchronized(function(){e.m_disabled||t()})},onSubscriptionError:function(t,e){var n=this;this.synchronized(function(){n.key.evtOnSubscriptionError2Level(t,e)})},onItemUpdate:function(t){var e=this;this.synchronized(function(){e.key.evtUpdate2Level(t)})},onItemLostUpdates:function(t,e,n){var a=this;this.synchronized(function(){a.key.evtOnItemLostUpdates2Level(n)})},onRealMaxFrequency:function(t){var e=this;this.synchronized(function(){var n=e.key,a;if(t==null)a=null;else{var h;if(t==null){h=parseFloat(t);var _=h;a=isNaN(_)?null:Ce.RFreqLimited(_)}else if(t=="unlimited")a=Ce.RFreqUnlimited;else{h=parseFloat(t);var _=h;a=isNaN(_)?null:Ce.RFreqLimited(_)}}n.evtOnRealMaxFrequency2Level(a)})},onUnsubscription:function(){var t=this;this.synchronized(function(){t.key.evtOnUnsubscription2Level()})},onClearSnapshot:function(t,e){},onCommandSecondLevelItemLostUpdates:function(t,e){},onCommandSecondLevelSubscriptionError:function(t,e,n){},onEndOfSnapshot:function(t,e){},onListenEnd:function(t){},onListenStart:function(t){},onSubscription:function(){},__class__:si};var Nt=r["com.lightstreamer.client.internal.update.CurrFieldVal"]={__ename__:!0,__constructs__:null,StringVal:(o=function(t){return{_hx_index:0,string:t,__enum__:"com.lightstreamer.client.internal.update.CurrFieldVal",toString:i}},o._hx_name="StringVal",o.__params__=["string"],o),JsonVal:(o=function(t){return{_hx_index:1,json:t,__enum__:"com.lightstreamer.client.internal.update.CurrFieldVal",toString:i}},o._hx_name="JsonVal",o.__params__=["json"],o)};Nt.__constructs__=[Nt.StringVal,Nt.JsonVal];var Et=function(){};Et.__name__=!0,Et.toString=function(t){if(t==null)return null;switch(t._hx_index){case 0:return t.string;case 1:return ze.toString(t.json)}};function wr(t,e){if(t!=null){for(var n=new ht,a=e,h=a.keys();h.hasNext();){var _=h.next(),v=a.get(_);switch(v._hx_index){case 0:n.h[_]=t.h[_];break;case 1:var T=v.val;T==null?n.h[_]=null:n.h[_]=Nt.StringVal(T);break;case 2:var W=v.patch,Z=t.h[_];if(Z==null)throw new Y("Cannot apply the JSON patch to the field "+_+" because the field is null");switch(Z._hx_index){case 0:var X=Z.string,nt=null;try{nt=ze._new(X)}catch(wi){var Kt=C.caught(wi);throw $.isErrorEnabled()&&$.error(""+Kt.get_message()+`
`+Kt.details()),new Y("Cannot convert the field "+_+" to JSON")}try{var St=Nt.JsonVal(ze.apply(M.sure(nt),W));n.h[_]=St}catch(wi){var de=C.caught(wi);throw $.isErrorEnabled()&&$.error(""+de.get_message()+`
`+de.details()),new Y("Cannot apply the JSON Patch to the field "+_)}break;case 1:var Ye=Z.json;try{var ge=Nt.JsonVal(ze.apply(Ye,W));n.h[_]=ge}catch(wi){var re=C.caught(wi);throw $.isErrorEnabled()&&$.error(""+re.get_message()+`
`+re.details()),new Y("Cannot apply the JSON Patch to the field "+_)}break}break;case 3:var Us=v.patch,bi=t.h[_];if(bi==null)throw new Y("Cannot apply the TLCP-diff to the field "+_+" because the field is null");switch(bi._hx_index){case 0:var Ao=Nt.StringVal(new ys(bi.string,Us).decode());n.h[_]=Ao;break;case 1:throw new Y("Cannot apply the TLCP-diff to the field "+_+" because the field is JSON")}break}}return n}else{for(var n=new ht,a=e,h=a.keys();h.hasNext();){var _=h.next(),v=a.get(_);switch(v._hx_index){case 0:throw new Y("Cannot set the field "+_+" because the first update is UNCHANGED");case 1:var T=v.val;T==null?n.h[_]=null:n.h[_]=Nt.StringVal(T);break;case 2:throw new Y("Cannot set the field "+_+" because the first update is a JSONPatch");case 3:throw new Y("Cannot set the field "+_+" because the first update is a TLCP-diff")}}return n}}function Hi(t,e){if(t!=null){for(var n=new Ct,a=e,h=a.keys();h.hasNext();){var _=h.next();a.get(_),Et.toString(t.h[_])!=Et.toString(e.h[_])&&n.insert(_)}return n}else{for(var n=new Ct,a=e,h=a.keys();h.hasNext();){var _=h.next();a.get(_),n.insert(_)}return n}}function yo(t,e){if(t!=null){for(var n=new ht,a=e,h=a.keys();h.hasNext();){var _=h.next(),v=a.get(_);switch(v._hx_index){case 0:var T=t.h[_];if(T!=null&&(T!=null&&T._hx_index==1)){var W=ze._new("[]");n.h[_]=W}break;case 2:n.h[_]=v.patch;break}}return n}else return new ht}function ii(t){if(t!=null){for(var e=new ht,n=0;n<t.length;){var a=t[n++];e.h[n-1+1]=a}return e}return null}function xn(t,e){for(var n=1,a=p.count(t)+1;n<a;){var h=n++;if(t.h[h]==e)return h}return null}function bo(t){var e=new ht;return t.forEachField(function(n,a,h){e.h[a]=h}),e}function wo(t){var e=new ht;return t.forEachChangedField(function(n,a,h){e.h[a]=h}),e}var Rn=function(){};Rn.__name__=!0,Rn.prototype={submit:function(t){Le(t)},schedule:function(t,e){return new ni(Dn(t,e))},stop:function(){},__class__:Rn};var ni=function(t){this.handle=t};ni.__name__=!0,ni.prototype={isCanceled:function(){return this.handle==null},cancel:function(){this.handle!=null&&(ko(this.handle),this.handle=null)},__class__:ni};var Be=function(){this.hasMicroTasks=typeof s.queueMicrotask<"u",this.hasWorkers=typeof Worker<"u"};Be.__name__=!0,Be.prototype={toString:function(){return"{ hasWorkers: "+f.string(this.hasWorkers)+", hasMicroTasks: "+f.string(this.hasMicroTasks)+" }"},__class__:Be};var ri=function(){};ri.__name__=!0,ri.__isInterface__=!0,ri.prototype={__class__:ri};var ai=function(t,e,n,a,h,_,v){this.isCanceled=!1,this.reader=new Gi;var T=this;if(mt.isDebugEnabled()&&mt.debug("HTTP sending: "+t+" "+e+" headers("+(n==null?"null":It.stringify(n.h))+")"),this.xhr=new XMLHttpRequest,this.xhr.open("POST",t),this.xhr.withCredentials=a,n!=null)for(var W=n.h,Z=Object.keys(W),X=Z.length,nt=0;nt<X;){var Kt=Z[nt++];this.xhr.setRequestHeader(Kt,W[Kt])}this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.xhr.send(e),this.xhr.onreadystatechange=function(){if(!T.isCanceled){var St=T.xhr.readyState;if(St==2){var de=T.xhr.status;de==0||de>=200&&de<300||(mt.isDebugEnabled()&&mt.debug("HTTP event: error(HTTP code "+de+")"),_(T,"Unexpected HTTP code: "+de),T.xhr.abort())}else if(St>2){for(var Ye=St==3?T.reader.extractNewData(T.xhr.responseText,!1):T.reader.extractNewData(T.xhr.responseText,!0),ge=0;ge<Ye.length;){var re=Ye[ge];if(++ge,T.isCanceled)return;re!=""&&(mt.isDebugEnabled()&&mt.debug("HTTP event: text("+re+")"),h(T,re))}St==4&&(mt.isDebugEnabled()&&mt.debug("HTTP event: complete"),v(T))}}},this.xhr.onerror=function(){T.isCanceled||(mt.isDebugEnabled()&&mt.debug("HTTP event: error(Network error)"),_(T,"Network error"))}};ai.__name__=!0,ai.__interfaces__=[ri],ai.prototype={dispose:function(){mt.isDebugEnabled()&&mt.debug("HTTP disposing"),this.isCanceled=!0,this.xhr.abort()},isDisposed:function(){return this.isCanceled},__class__:ai};var J={};J._new=function(){return new It},J.set=function(t,e,n){n!=null&&(t.h[e]=n==null?"null":f.string(n))};var We=function(){this.values=[],this.nRemoved=0};We.__name__=!0,We.prototype={get_length:function(){return this.values.length-this.nRemoved},compact:function(){this.nRemoved>this.values.length/2&&(this.nRemoved=0,this.values=this.copy().values)},push:function(t){this.values.push(new Ue(t))},remove:function(t){for(var e=0,n=this.values.length;e<n;){var a=e++;if(this.values[a].item==t&&this.values[a].isValid){this.nRemoved++,this.values[a].isValid=!1;break}}},filter:function(t){for(var e=new We,n=new Mt(this);n.hasNext();){var a=n.next();t(a)&&e.values.push(new Ue(a))}return e},map:function(t){for(var e=new We,n=new Mt(this);n.hasNext();){var a=t(n.next());e.values.push(new Ue(a))}return e},exists:function(t){return p.exists(this,t)},find:function(t){return p.find(this,t)},contains:function(t){return p.has(this,t)},iterator:function(){return new Mt(this)},copy:function(){for(var t=new We,e=new Mt(this);e.hasNext();){var n=e.next();t.values.push(new Ue(n))}return t},toString:function(){for(var t=0,e=this.values.length-this.nRemoved,n="[",a=new Mt(this);a.hasNext();)n+=f.string(a.next())+(t!=e-1?", ":""),++t;return n+"]"},__class__:We};var Ue=function(t){this.isValid=!0,this.item=t};Ue.__name__=!0,Ue.prototype={__class__:Ue};var Mt=function(t){this.a=t,this.index=0};Mt.__name__=!0,Mt.prototype={hasNext:function(){for(var t=this.index,e=this.a.values.length;t<e;)if(this.a.values[t++].isValid)return!0;return!1},next:function(){for(var t=this.index,e=this.a.values.length;t<e;){var n=t++;if(this.a.values[n].isValid)return this.index=n+1,this.a.values[n].item}throw new C("No such element")},__class__:Mt};var Y=function(t,e,n){C.call(this,t,e,n),this.__skipStack++};Y.__name__=!0,Y.__super__=C,Y.prototype=l(C.prototype,{__class__:Y});var He={};He.fromHaxeMap=function(t){return He.fromMapToDynamicAccess(t)},He.toHaxeMap=function(t){return He.toHaxe(t)},He.fromMapToDynamicAccess=function(t){for(var e={},n=t.h,a=Object.keys(n),h=a.length,_=0;_<h;){var v=a[_++];e[v]=n[v]}return e},He.toHaxe=function(t){for(var e=new It,n=y.fields(t),a=0;a<n.length;){var h=n[a++];e.h[h]=t[h]}return e},He.toDynamicAccess=function(t){return y.copy(t)};var ue={};ue.fromHaxeArray=function(t){return t.slice()},ue.toHaxeArray=function(t){return ue.copy(t,t)},ue._new=function(t){return t.slice()},ue.toHaxe=function(t){return ue.copy(t,t)},ue.copy=function(t,e){for(var n=[],a=0,h=e.length;a<h;)n[a]=e[a],++a;return n};var M=function(){};M.__name__=!0,M.sure=function(t){if(t==null)throw C.thrown("null pointer in .sure() call");return t},M.or=function(t,e){return t??e};var Ss=function(){};Ss.__name__=!0,Ss.__isInterface__=!0,Ss.prototype={__class__:Ss};var Ds=function(){this._innerMap=new ht,this._orderedKeys=new We};Ds.__name__=!0,Ds.__interfaces__=[Ss],Ds.prototype={compact:function(){this._orderedKeys.compact()},set:function(t,e){this._innerMap.h.hasOwnProperty(t)||this._orderedKeys.values.push(new Ue(t)),this._innerMap.h[t]=e},get:function(t){return this._innerMap.h[t]},exists:function(t){return this._innerMap.h.hasOwnProperty(t)},remove:function(t){var e=this._innerMap.remove(t);return e&&this._orderedKeys.remove(t),e},keys:function(){return new Mt(this._orderedKeys)},iterator:function(){return new Ki(this)},keyValueIterator:function(){return new $i(this)},copy:function(){var t=new Ds;return t._orderedKeys=this._orderedKeys.copy(),t._innerMap=this._innerMap.copy(),t},get_length:function(){var t=this._orderedKeys;return t.values.length-t.nRemoved},keysCopy:function(){return this._orderedKeys.copy()},clear:function(){this._orderedKeys=new We,this._innerMap=new ht},toString:function(){for(var t=0,e=this._orderedKeys,n=e.values.length-e.nRemoved,a="[",h=new Mt(this._orderedKeys);h.hasNext();){var _=h.next();a+=_+" => "+f.string(this._innerMap.h[_])+(t!=n-1?", ":""),++t}return a+"]"},__class__:Ds};var Ki=function(t){this.map=t,this.it=new Mt(t._orderedKeys)};Ki.__name__=!0,Ki.prototype={hasNext:function(){return this.it.hasNext()},next:function(){var t=this.map,e=this.it.next();return t._innerMap.h[e]},__class__:Ki};var oi=function(){};oi.__name__=!0,oi.__isInterface__=!0,oi.prototype={__class__:oi};var li=function(){};li.__name__=!0,li.__isInterface__=!0,li.prototype={__class__:li};var hi=r["com.lightstreamer.internal.ReachabilityStatus"]={__ename__:!0,__constructs__:null,RSReachable:{_hx_name:"RSReachable",_hx_index:0,__enum__:"com.lightstreamer.internal.ReachabilityStatus",toString:i},RSNotReachable:{_hx_name:"RSNotReachable",_hx_index:1,__enum__:"com.lightstreamer.internal.ReachabilityStatus",toString:i}};hi.__constructs__=[hi.RSReachable,hi.RSNotReachable];var ci=function(){};ci.__name__=!0,ci.__isInterface__=!0,ci.prototype={__class__:ci};var ui=r["com.lightstreamer.internal.PageState"]={__ename__:!0,__constructs__:null,Frozen:{_hx_name:"Frozen",_hx_index:0,__enum__:"com.lightstreamer.internal.PageState",toString:i},Resumed:{_hx_name:"Resumed",_hx_index:1,__enum__:"com.lightstreamer.internal.PageState",toString:i}};ui.__constructs__=[ui.Frozen,ui.Resumed];var _i=function(){};_i.__name__=!0,_i.__isInterface__=!0,_i.prototype={__class__:_i};var fi=function(t){this.connectionOptions=t.connectionOptions};fi.__name__=!0,fi.__interfaces__=[_i],fi.prototype={createWsClient:function(t,e,n,a,h){return new Si(t,n,a,h)},createHttpClient:function(t,e,n,a,h,_){return new ai(t,e,n,this.connectionOptions.isCookieHandlingRequired(),a,h,_)},createCtrlClient:function(t,e,n,a,h,_){return this.createHttpClient(t,e,n,a,h,_)},createReachabilityManager:function(t){return new di},createTimer:function(t,e,n){return new pi(t,e,n)},randomMillis:function(t){return f.random(t)},createPageLifecycleFactory:function(t){return new se(t)},__class__:fi};var di=function(){};di.__name__=!0,di.__interfaces__=[ci],di.prototype={startListening:function(t){O.get_supported()&&(window.ononline=function(){t(hi.RSReachable)},window.onoffline=function(){t(hi.RSNotReachable)})},stopListening:function(){O.get_supported()&&(window.ononline=null,window.onoffline=null)},__class__:di};var Vi=function(t,e){this.key=t,this.val=e};Vi.__name__=!0,Vi.prototype={toEncodedPair:function(){var e=this.key,t=encodeURIComponent(e)+"=",e=this.val;return t+encodeURIComponent(e)},toString:function(){return this.key+"="+this.val},__class__:Vi};var Pt=function(){this.params=[]};Pt.__name__=!0,Pt.prototype={LS_reqId:function(t){this.addParamAny("LS_reqId",t)},LS_message:function(t){this.addParamString("LS_message",t)},LS_sequence:function(t){this.addParamString("LS_sequence",t)},LS_msg_prog:function(t){this.addParamAny("LS_msg_prog",t)},LS_max_wait:function(t){this.addParamAny("LS_max_wait",t)},LS_outcome:function(t){this.addParamBool("LS_outcome",t)},LS_ack:function(t){this.addParamBool("LS_ack",t)},LS_op:function(t){this.addParamString("LS_op",t)},LS_subId:function(t){this.addParamAny("LS_subId",t)},LS_mode:function(t){this.addParamString("LS_mode",t)},LS_group:function(t){this.addParamString("LS_group",t)},LS_schema:function(t){this.addParamString("LS_schema",t)},LS_data_adapter:function(t){this.addParamString("LS_data_adapter",t)},LS_requested_max_frequency:function(t){this.addParamString("LS_requested_max_frequency",t)},LS_requested_max_frequency_Float:function(t){this.addParamAny("LS_requested_max_frequency",t)},LS_requested_buffer_size:function(t){this.addParamString("LS_requested_buffer_size",t)},LS_requested_buffer_size_Int:function(t){this.addParamAny("LS_requested_buffer_size",t)},LS_cause:function(t){this.addParamString("LS_cause",t)},LS_keepalive_millis:function(t){this.addParamAny("LS_keepalive_millis",t)},LS_inactivity_millis:function(t){this.addParamAny("LS_inactivity_millis",t)},LS_requested_max_bandwidth:function(t){this.addParamString("LS_requested_max_bandwidth",t)},LS_requested_max_bandwidth_Float:function(t){this.addParamAny("LS_requested_max_bandwidth",t)},LS_adapter_set:function(t){this.addParamString("LS_adapter_set",t)},LS_user:function(t){this.addParamString("LS_user",t)},LS_password:function(t){this.addParamString("LS_password",t)},LS_cid:function(t){this.addParamString("LS_cid",t)},LS_old_session:function(t){this.addParamString("LS_old_session",t)},LS_session:function(t){this.addParamString("LS_session",t)},LS_send_sync:function(t){this.addParamBool("LS_send_sync",t)},LS_polling:function(t){this.addParamBool("LS_polling",t)},LS_polling_millis:function(t){this.addParamAny("LS_polling_millis",t)},LS_idle_millis:function(t){this.addParamAny("LS_idle_millis",t)},LS_content_length:function(t){this.addParamAny("LS_content_length",t)},LS_ttl_millis:function(t){this.addParamString("LS_ttl_millis",t)},LS_recovery_from:function(t){this.addParamAny("LS_recovery_from",t)},LS_close_socket:function(t){this.addParamBool("LS_close_socket",t)},LS_selector:function(t){this.addParamString("LS_selector",t)},LS_snapshot:function(t){this.addParamBool("LS_snapshot",t)},LS_snapshot_Int:function(t){this.addParamAny("LS_snapshot",t)},addParamString:function(t,e){this.params.push(new Vi(t,e))},addParamAny:function(t,e){this.addParamString(t,""+(e==null?"null":f.string(e)))},addParamBool:function(t,e){this.addParamString(t,e?"true":"false")},getEncodedString:function(){for(var t=this.params,e=new Array(t.length),n=0,a=t.length;n<a;){var h=n++;e[h]=t[h].toEncodedPair()}return e.join("&")},toString:function(){return this.params.join(" ")},__class__:Pt};var Ct=function(t){if(this.values=[],t!=null)for(;t.hasNext();)this.insert(t.next())};Ct.__name__=!0,Ct.prototype={count:function(){return this.values.length},insert:function(t){this.values.indexOf(t)==-1&&this.values.push(t)},contains:function(t){return this.values.indexOf(t)!=-1},remove:function(t){u.remove(this.values,t)},removeAll:function(){this.values.splice(0,this.values.length)},copy:function(){return new Ct(this.iterator())},union:function(t){for(var e=new Ct,a=0,n=this.values;a<n.length;)e.insert(n[a++]);for(var a=0;a<t.length;)e.insert(t[a++]);return e},subtracting:function(t){for(var e=new Ct,n=0,a=this.values;n<a.length;){var h=a[n];++n,t.indexOf(h)==-1&&e.insert(h)}return e},iterator:function(){return new Bs(this.values)},toArray:function(){return this.values},__class__:Ct};var Gi=function(){this.progress=0};Gi.__name__=!0,Gi.prototype={extractNewData:function(t,e){var n;if(e)n=t.length;else{if(n=t.lastIndexOf(`\r
`),n<0)return[];n+=2}if(n<=this.progress)return[];var a=t.substring(this.progress,n);return this.progress=n,a.split(`\r
`)},streamProgress:function(t){return this.extractNewData(t,!1)},streamComplete:function(t){return this.extractNewData(t,!0)},__class__:Gi};var mi={};mi._new=function(t){return t},mi.toMillis=function(t){return t},mi.toLong=function(t){return t};var Te={};Te._new=function(t){return t},Te.now=function(){return u.now()/1e3},Te.plus=function(t,e){return t*1e3+e},Te.minus=function(t,e){return(t-e)*1e3},Te.toFloat=function(t){return t};var pi=function(t,e,n){var a=this;this.task=new ni(Dn(function(){n(a)},e))};pi.__name__=!0,pi.__interfaces__=[li],pi.prototype={cancel:function(){this.task.cancel()},isCanceled:function(){return this.task.handle==null},__class__:pi};var Er=Ec;function Eo(){var t=Cr.shift();if(t==null){et.isErrorEnabled()&&et.error("Timer callback not found");return}try{t()}catch(n){var e=C.caught(n);et.isErrorEnabled()&&et.error(`Timer callback failed
`+e.details())}}var _e=r["com.lightstreamer.internal.FieldValue"]={__ename__:!0,__constructs__:null,unchanged:{_hx_name:"unchanged",_hx_index:0,__enum__:"com.lightstreamer.internal.FieldValue",toString:i},changed:(o=function(t){return{_hx_index:1,val:t,__enum__:"com.lightstreamer.internal.FieldValue",toString:i}},o._hx_name="changed",o.__params__=["val"],o),jsonPatch:(o=function(t){return{_hx_index:2,patch:t,__enum__:"com.lightstreamer.internal.FieldValue",toString:i}},o._hx_name="jsonPatch",o.__params__=["patch"],o),diffPatch:(o=function(t){return{_hx_index:3,patch:t,__enum__:"com.lightstreamer.internal.FieldValue",toString:i}},o._hx_name="diffPatch",o.__params__=["patch"],o)};_e.__constructs__=[_e.unchanged,_e.changed,_e.jsonPatch,_e.diffPatch];var dt={};dt._new=function(t){return t},dt.fromIntGt0=function(t){if(t<=0)throw new P("value must be greater than zero");return t},dt.fromIntGtEq0=function(t){if(t<0)throw new P("value must be greater than or equal to zero");return t},dt.gti=function(t,e){return t>e},dt.gt=function(t,e){return t>e},dt.lt=function(t,e){return t<e},dt.plus=function(t,e){return t+e},dt.minus=function(t,e){return t-e},dt.toInt=function(t){return t};var Cn={};Cn._new=function(t){return t},Cn.fromIntGt0=function(t){if(t<=0)throw new P("value must be greater than zero");return t};var es={};es.fromString=function(t){if(t==null)return null;switch(t){case"HTTP":return"HTTP";case"HTTP-POLLING":return"HTTP-POLLING";case"HTTP-STREAMING":return"HTTP-STREAMING";case"WS":return"WS";case"WS-POLLING":return"WS-POLLING";case"WS-STREAMING":return"WS-STREAMING";default:throw new P("The given value is not valid. Use one of: HTTP-STREAMING, HTTP-POLLING, WS-STREAMING, WS-POLLING, WS, HTTP or null")}};var Ns=r["com.lightstreamer.internal.RequestedMaxBandwidth"]={__ename__:!0,__constructs__:null,BWLimited:(o=function(t){return{_hx_index:0,bw:t,__enum__:"com.lightstreamer.internal.RequestedMaxBandwidth",toString:i}},o._hx_name="BWLimited",o.__params__=["bw"],o),BWUnlimited:{_hx_name:"BWUnlimited",_hx_index:1,__enum__:"com.lightstreamer.internal.RequestedMaxBandwidth",toString:i}};Ns.__constructs__=[Ns.BWLimited,Ns.BWUnlimited];var Ms=function(){};Ms.__name__=!0,Ms.fromString=function(t){var e;if(t.toLowerCase()=="unlimited")return Ns.BWUnlimited;if(e=parseFloat(t),!isNaN(e)&&e>0)return Ns.BWLimited(e);throw new P('The given value is a not valid value for RequestedMaxBandwidth. Use a positive number or the string "unlimited"')},Ms.toString=function(t){switch(t._hx_index){case 0:var e=t.bw;return e==null?"null":""+e;case 1:return"unlimited"}};var gi=r["com.lightstreamer.internal.RequestedBufferSize"]={__ename__:!0,__constructs__:null,BSLimited:(o=function(t){return{_hx_index:0,size:t,__enum__:"com.lightstreamer.internal.RequestedBufferSize",toString:i}},o._hx_name="BSLimited",o.__params__=["size"],o),BSUnlimited:{_hx_name:"BSUnlimited",_hx_index:1,__enum__:"com.lightstreamer.internal.RequestedBufferSize",toString:i}};gi.__constructs__=[gi.BSLimited,gi.BSUnlimited];var Ps=function(){};Ps.__name__=!0,Ps.fromString=function(t){if(t==null)return null;var e;if(t.toLowerCase()=="unlimited")return gi.BSUnlimited;if(e=f.parseInt(t),e!=null&&e>0)return gi.BSLimited(e);throw new P("The given value is not valid for this setting; use null, 'unlimited' or a positive integer instead")},Ps.toString=function(t){if(t==null)return null;switch(t._hx_index){case 0:var e=t.size;return e==null?"null":""+e;case 1:return"unlimited"}},Ps.extEquals=function(t,e){return t==null?e==null:e==null?!1:S.enumEq(t,e)};var xe=r["com.lightstreamer.internal.RequestedSnapshot"]={__ename__:!0,__constructs__:null,SnpYes:{_hx_name:"SnpYes",_hx_index:0,__enum__:"com.lightstreamer.internal.RequestedSnapshot",toString:i},SnpNo:{_hx_name:"SnpNo",_hx_index:1,__enum__:"com.lightstreamer.internal.RequestedSnapshot",toString:i},SnpLength:(o=function(t){return{_hx_index:2,len:t,__enum__:"com.lightstreamer.internal.RequestedSnapshot",toString:i}},o._hx_name="SnpLength",o.__params__=["len"],o)};xe.__constructs__=[xe.SnpYes,xe.SnpNo,xe.SnpLength];var Fs=function(){};Fs.__name__=!0,Fs.fromString=function(t){if(t==null)return null;var e;switch(t.toLowerCase()){case"no":return xe.SnpNo;case"yes":return xe.SnpYes;default:if(e=f.parseInt(t),e!=null&&e>0)return xe.SnpLength(e);throw new P("The given value is not valid for this setting; use null, 'yes', 'no' or a positive number instead")}},Fs.toString=function(t){if(t==null)return null;switch(t._hx_index){case 0:return"yes";case 1:return"no";case 2:var e=t.len;return e==null?"null":""+e}};var Ke=r["com.lightstreamer.internal.RequestedMaxFrequency"]={__ename__:!0,__constructs__:null,FreqLimited:(o=function(t){return{_hx_index:0,max:t,__enum__:"com.lightstreamer.internal.RequestedMaxFrequency",toString:i}},o._hx_name="FreqLimited",o.__params__=["max"],o),FreqUnlimited:{_hx_name:"FreqUnlimited",_hx_index:1,__enum__:"com.lightstreamer.internal.RequestedMaxFrequency",toString:i},FreqUnfiltered:{_hx_name:"FreqUnfiltered",_hx_index:2,__enum__:"com.lightstreamer.internal.RequestedMaxFrequency",toString:i}};Ke.__constructs__=[Ke.FreqLimited,Ke.FreqUnlimited,Ke.FreqUnfiltered];var Re=function(){};Re.__name__=!0,Re.fromString=function(t){if(t==null)return null;var e;switch(t.toLowerCase()){case"unfiltered":return Ke.FreqUnfiltered;case"unlimited":return Ke.FreqUnlimited;default:if(e=parseFloat(t),!isNaN(e)&&e>0)return Ke.FreqLimited(e);throw new P("The given value is not valid for this setting; use null, 'unlimited', 'unfiltered' or a positive number instead")}},Re.toString=function(t){if(t==null)return null;switch(t._hx_index){case 0:var e=t.max;return e==null?"null":""+e;case 1:return"unlimited";case 2:return"unfiltered"}},Re.extEquals=function(t,e){return t==null?e==null:e==null?!1:S.enumEq(t,e)};var Ce=r["com.lightstreamer.internal.RealMaxFrequency"]={__ename__:!0,__constructs__:null,RFreqLimited:(o=function(t){return{_hx_index:0,freq:t,__enum__:"com.lightstreamer.internal.RealMaxFrequency",toString:i}},o._hx_name="RFreqLimited",o.__params__=["freq"],o),RFreqUnlimited:{_hx_name:"RFreqUnlimited",_hx_index:1,__enum__:"com.lightstreamer.internal.RealMaxFrequency",toString:i}};Ce.__constructs__=[Ce.RFreqLimited,Ce.RFreqUnlimited];var ss=r["com.lightstreamer.internal.RealMaxBandwidth"]={__ename__:!0,__constructs__:null,BWLimited:(o=function(t){return{_hx_index:0,bw:t,__enum__:"com.lightstreamer.internal.RealMaxBandwidth",toString:i}},o._hx_name="BWLimited",o.__params__=["bw"],o),BWUnlimited:{_hx_name:"BWUnlimited",_hx_index:1,__enum__:"com.lightstreamer.internal.RealMaxBandwidth",toString:i},BWUnmanaged:{_hx_name:"BWUnmanaged",_hx_index:2,__enum__:"com.lightstreamer.internal.RealMaxBandwidth",toString:i}};ss.__constructs__=[ss.BWLimited,ss.BWUnlimited,ss.BWUnmanaged];var vi=function(){};vi.__name__=!0,vi.toString=function(t){if(t==null)return null;switch(t._hx_index){case 0:var e=t.bw;return e==null?"null":""+e;case 1:return"unlimited";case 2:return"unmanaged"}},vi.eq=function(t,e){return t==null?e==null:e==null?!1:S.enumEq(t,e)};var ks={};ks.fromString=function(t){switch(t){case"COMMAND":return"COMMAND";case"DISTINCT":return"DISTINCT";case"MERGE":return"MERGE";case"RAW":return"RAW";default:throw new P("The given value is not a valid subscription mode. Admitted values are MERGE, DISTINCT, RAW, COMMAND")}};var Ve={};Ve._new=function(t){return t},Ve.getPos=function(t,e){var n=t.indexOf(e);return n!=-1?n+1:-1},Ve.allValidNames=function(t){return!p.exists(t,function(e){return new c("^$| |^\\d+$","").match(e)})},Ve.fromArray=function(t){if(t==null)return null;if(t.length==0)throw new P("Item List is empty");if(Ve.allValidNames(t))return t;throw new P("Item List is invalid")};var Ge={};Ge._new=function(t){return t},Ge.getPos=function(t,e){var n=t.indexOf(e);return n!=-1?n+1:-1},Ge.hasKeyField=function(t){return t.indexOf("key")!=-1},Ge.hasCommandField=function(t){return t.indexOf("command")!=-1},Ge.fromArray=function(t){if(t==null)return null;if(t.length==0)throw new P("Field List is empty");if(p.exists(t,function(e){return new c("^$| ","").match(e)}))throw new P("Field List is invalid");return t};var is={};is._new=function(t){return t},is.fromString=function(t){if(t==null)return null;if(t=="")throw new P("The value is empty");return t};function To(t){if(t==null)return"null";switch(t._hx_index){case 0:return""+t.freq;case 1:return"unlimited"}}function Tr(t,e){return t==null?e==null:e==null?!1:S.enumEq(t,e)}var qt=function(t,e){var n=t.indexOf("://");n!=-1?(this._protocol=t.substring(0,n)+":",t=t.substring(n+3)):this._protocol="";var a=t.indexOf("/");a!=-1?(this._pathname=t.substring(a),t=t.substring(0,a)):this._pathname="/";var h=this.extractPortStart(t);h!=-1?(this._port=t.substring(h),this._hostname=t.substring(0,h-1)):(this._port="",this._hostname=t),e!=null&&this.set_pathname(e)};qt.__name__=!0,qt.build=function(t,e){if(e!=null){var n=b.endsWith(t,"/"),a=b.startsWith(e,"/");n?a?t+=e.substring(1):t+=e:a?t+=e:t+="/"+e}return t},qt.completeControlLink=function(t,e){var n=new qt(e),a=new qt(t);return a.get_protocol()==""&&a.set_protocol(n.get_protocol()),a.get_port()==""&&a.set_port(n.get_port()),a.get_href()},qt.prototype={get_protocol:function(){return this._protocol},set_protocol:function(t){return t!=""&&!b.endsWith(t,":")&&(t+=":"),this._protocol=t,this._protocol},get_hostname:function(){return this._hostname},set_hostname:function(t){return this._hostname=t,this._hostname},get_port:function(){return this._port},set_port:function(t){return this._port=t,this._port},get_pathname:function(){return this._pathname},set_pathname:function(t){return b.startsWith(t,"/")||(t="/"+t),this._pathname=t,this._pathname},get_href:function(){var t=this._hostname;return this._protocol!=""&&(t=this._protocol+"//"+t),this._port!=""&&(t+=":"+this._port),this.get_pathname()!=""&&(t+=this._pathname),t},toString:function(){return this.get_href()},extractPortStart:function(t){var e=t.indexOf(":");return e<=-1?-1:t.indexOf("]")>-1?(e=t.indexOf("]:"),e<=-1?-1:e+2):e!=t.lastIndexOf(":")?-1:e+1},__class__:qt};var Si=function(t,e,n,a){this.isCanceled=!1;var h=this;b.startsWith(t,"https://")?t=b.replace(t,"https://","wss://"):b.startsWith(t,"http://")&&(t=b.replace(t,"http://","ws://")),mt.isDebugEnabled()&&mt.debug("WS connecting: "+t),this.ws=new WebSocket(t,Mo),this.ws.onopen=function(){h.isCanceled||(mt.isDebugEnabled()&&mt.debug("WS event: open"),e(h))},this.ws.onmessage=function(_){if(!h.isCanceled)for(var v=0,T=_.data.split(`\r
`);v<T.length;){var W=T[v];if(++v,h.isCanceled)return;W!=""&&(mt.isDebugEnabled()&&mt.debug("WS event: text("+W+")"),n(h,W))}},this.ws.onerror=function(){h.isCanceled||(mt.isDebugEnabled()&&mt.debug("WS event: error(Network error)"),a(h,"Network error"),h.ws.close())},this.ws.onclose=function(_){if(!h.isCanceled){var v="unexpected disconnection: "+_.code+" - "+_.reason;mt.isDebugEnabled()&&mt.debug("WS event: error("+v+")"),a(h,v),h.ws.close()}}};Si.__name__=!0,Si.__interfaces__=[oi],Si.prototype={send:function(t){mt.isDebugEnabled()&&mt.debug("WS sending: "+t),this.ws.send(t)},dispose:function(){mt.isDebugEnabled()&&mt.debug("WS disposing"),this.isCanceled=!0,this.ws.close()},isDisposed:function(){return this.isCanceled},__class__:Si};var ys=function(t,e){this.buf=new E,this.basePos=0,this.diffPos=0,this.diff=e,this.base=t};ys.__name__=!0,ys.apply=function(t,e){return new ys(t,e).decode()},ys.prototype={decode:function(){try{for(;this.diffPos!=this.diff.length&&(this.applyCopy(),!(this.diffPos==this.diff.length||(this.applyAdd(),this.diffPos==this.diff.length)));)this.applyDel();return this.buf.b}catch(t){throw new C("Bad TLCP-diff",C.caught(t))}},applyCopy:function(){var t=this.decodeVarint();t>0&&(this.appendToBuf(this.base,this.basePos,t),this.basePos+=t)},applyAdd:function(){var t=this.decodeVarint();t>0&&(this.appendToBuf(this.diff,this.diffPos,t),this.diffPos+=t)},applyDel:function(){var t=this.decodeVarint();t>0&&(this.basePos+=t)},decodeVarint:function(){for(var t=0;;){var e=this.charAt(this.diff,this.diffPos);if(this.diffPos+=1,e>=97&&e<123)return t*26+(e-97);if(e>=65&&e<91)t=t*26+(e-65);else throw new C("The code point "+e+" is not in the range A-Z")}},appendToBuf:function(t,e,n){if(e+n<=t.length)this.buf.b+=n==null?u.substr(t,e,null):u.substr(t,e,n);else throw new C("Index out of range: startIndex="+e+" count="+n+" length="+t.length)},charAt:function(t,e){if(e<t.length)return u.cca(t.charAt(e),0);throw new C("Index out of range: pos="+e+" length="+t.length)},__class__:ys};var ze={};ze._new=function(t){return JSON.parse(t)},ze.apply=function(t,e){return xo.apply_patch(t,e)},ze.toString=function(t){return JSON.stringify(t)};var xo=Tc(),$t=Je.LSConsoleLogLevel=function(){};$t.__name__=!0,$t.prototype={__class__:$t};var zi=Je.LSConsoleLoggerProvider=function(t){this.level=t};zi.__name__=!0,zi.__interfaces__=[fo],zi.prototype={getLogger:function(t){return new yi(this.level,t)},__class__:zi};var yi=function(t,e){this.level=t,this.category=e,this.traceEnabled=t<=$t.TRACE,this.debugEnabled=t<=$t.DEBUG,this.infoEnabled=t<=$t.INFO,this.warnEnabled=t<=$t.WARN,this.errorEnabled=t<=$t.ERROR,this.fatalEnabled=t<=$t.FATAL};yi.__name__=!0,yi.__super__=zt,yi.prototype=l(zt.prototype,{printLog:function(t){s.console.log(t)},format:function(t,e){var n=u.dateStr(new Date);return""+n+"|"+t+"|"+this.category+"|"+e},logFatal:function(t){s.console.log(t)},logError:function(t){s.console.log(t)},logWarn:function(t){s.console.log(t)},logInfo:function(t){s.console.log(t)},logDebug:function(t){s.console.log(t)},logTrace:function(t){s.console.log(t)},fatal:function(t,e){if(this.fatalEnabled){var n=this.format("FATAL",t);if(s.console.log(n),e!=null){var n=C.caught(e).details();s.console.log(n)}}},error:function(t,e){if(this.errorEnabled){var n=this.format("ERROR",t);if(s.console.log(n),e!=null){var n=C.caught(e).details();s.console.log(n)}}},warn:function(t,e){if(this.warnEnabled){var n=this.format("WARN ",t);if(s.console.log(n),e!=null){var n=C.caught(e).details();s.console.log(n)}}},info:function(t,e){if(this.infoEnabled){var n=this.format("INFO ",t);if(s.console.log(n),e!=null){var n=C.caught(e).details();s.console.log(n)}}},debug:function(t,e){if(this.debugEnabled){var n=this.format("DEBUG",t);if(s.console.log(n),e!=null){var n=C.caught(e).details();s.console.log(n)}}},trace:function(t,e){if(this.traceEnabled){var n=this.format("TRACE",t);if(s.console.log(n),e!=null){var n=C.caught(e).details();s.console.log(n)}}},isFatalEnabled:function(){return this.fatalEnabled},isErrorEnabled:function(){return this.errorEnabled},isWarnEnabled:function(){return this.warnEnabled},isInfoEnabled:function(){return this.infoEnabled},isDebugEnabled:function(){return this.debugEnabled},isTraceEnabled:function(){return this.traceEnabled},__class__:yi});var Ie=r["haxe.StackItem"]={__ename__:!0,__constructs__:null,CFunction:{_hx_name:"CFunction",_hx_index:0,__enum__:"haxe.StackItem",toString:i},Module:(o=function(t){return{_hx_index:1,m:t,__enum__:"haxe.StackItem",toString:i}},o._hx_name="Module",o.__params__=["m"],o),FilePos:(o=function(t,e,n,a){return{_hx_index:2,s:t,file:e,line:n,column:a,__enum__:"haxe.StackItem",toString:i}},o._hx_name="FilePos",o.__params__=["s","file","line","column"],o),Method:(o=function(t,e){return{_hx_index:3,classname:t,method:e,__enum__:"haxe.StackItem",toString:i}},o._hx_name="Method",o.__params__=["classname","method"],o),LocalFunction:(o=function(t){return{_hx_index:4,v:t,__enum__:"haxe.StackItem",toString:i}},o._hx_name="LocalFunction",o.__params__=["v"],o)};Ie.__constructs__=[Ie.CFunction,Ie.Module,Ie.FilePos,Ie.Method,Ie.LocalFunction];var fe={};fe.toString=function(t){for(var e=new E,n=0,a=t;n<a.length;){var h=a[n++];e.b+=`
Called from `,fe.itemToString(e,h)}return e.b},fe.subtract=function(t,e){for(var n=-1,a=-1;++a<t.length;){for(var h=0,_=e.length;h<_;)if(fe.equalItems(t[a],e[h++])){if(n<0&&(n=a),++a,a>=t.length)break}else n=-1;if(n>=0)break}return n>=0?t.slice(0,n):t},fe.equalItems=function(t,e){if(t==null)return e==null;switch(t._hx_index){case 0:return e==null?!1:e._hx_index==0;case 1:return e==null?!1:e._hx_index==1?t.m==e.m:!1;case 2:return e==null?!1:e._hx_index==2&&t.file==e.file&&t.line==e.line&&t.column==e.column?fe.equalItems(t.s,e.s):!1;case 3:return e==null?!1:e._hx_index==3&&t.classname==e.classname?t.method==e.method:!1;case 4:return e==null?!1:e._hx_index==4?t.v==e.v:!1}},fe.itemToString=function(t,e){switch(e._hx_index){case 0:t.b+="a C function";break;case 1:var _=e.m;t.b=(t.b+="module ")+(_==null?"null":""+_);break;case 2:var _=e.s,h=e.file,n=e.line,a=e.column;_!=null&&(fe.itemToString(t,_),t.b+=" ("),t.b=(t.b+=h==null?"null":""+h)+" line ",t.b+=n==null?"null":""+n,a!=null&&(t.b=(t.b+=" column ")+(a==null?"null":""+a)),_!=null&&(t.b+=")");break;case 3:var _=e.classname,h=e.method;t.b=(t.b+=f.string(_??"<unknown>"))+".",t.b+=h==null?"null":""+h;break;case 4:var _=e.v;t.b=(t.b+="local function #")+(_==null?"null":""+_);break}};var bs=function(){};bs.__name__=!0,bs.toHaxe=function(t,e){if(e==null&&(e=0),t==null)return[];if(typeof t=="string"){var n=t.split(`
`);n[0]=="Error"&&n.shift();for(var a=[],h=0,_=n.length;h<_;){var v=h++;if(!(e>v)){var T=n[v],W=T.match(/^    at ([$A-Za-z0-9_. ]+) \(([^)]+):([0-9]+):([0-9]+)\)$/);if(W!=null){var Z=W[1].split(".");Z[0]=="$hxClasses"&&Z.shift();var X=Z.pop(),nt=W[2],Kt=f.parseInt(W[3]),St=f.parseInt(W[4]);a.push(Ie.FilePos(X=="Anonymous function"?Ie.LocalFunction():X=="Global code"?null:Ie.Method(Z.join("."),X),nt,Kt,St))}else a.push(Ie.Module(b.trim(T)))}}return a}else return e>0&&Array.isArray(t)?t.slice(e):t},bs.normalize=function(t,e){if(e==null&&(e=0),Array.isArray(t)&&e>0)return t.slice(e);if(typeof t=="string"){switch(t.substring(0,6)){case`Error
`:case"Error:":++e;break}return bs.skipLines(t,e)}else return t},bs.skipLines=function(t,e,n){for(n==null&&(n=0);;)if(e>0){if(n=t.indexOf(`
`,n),n<0)return"";e=--e,n+=1;continue}else return t.substring(n)};var As=function(t,e,n){C.call(this,String(t),e,n),this.value=t,this.__skipStack++};As.__name__=!0,As.__super__=C,As.prototype=l(C.prototype,{__class__:As});var ht=function(){this.h={}};ht.__name__=!0,ht.__interfaces__=[Ss],ht.prototype={get:function(t){return this.h[t]},remove:function(t){return this.h.hasOwnProperty(t)?(delete this.h[t],!0):!1},keys:function(){var t=[];for(var e in this.h)this.h.hasOwnProperty(e)&&t.push(+e);return new Bs(t)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var t=this.it.next();return this.ref[t]}}},copy:function(){for(var t=new ht,e=this.keys();e.hasNext();){var n=e.next();t.h[n]=this.h[n]}return t},__class__:ht};var It=function(){this.h=Object.create(null)};It.__name__=!0,It.__interfaces__=[Ss],It.createCopy=function(t){var e=new It;for(var n in t)e.h[n]=t[n];return e},It.stringify=function(t){var e="[",n=!0;for(var a in t)n?n=!1:e+=",",e+=a+" => "+f.string(t[a]);return e+"]"},It.prototype={get:function(t){return this.h[t]},keys:function(){return new Yi(this.h)},iterator:function(){return new ji(this.h)},__class__:It};var Yi=function(t){this.h=t,this.keys=Object.keys(t),this.length=this.keys.length,this.current=0};Yi.__name__=!0,Yi.prototype={hasNext:function(){return this.current<this.length},next:function(){return this.keys[this.current++]},__class__:Yi};var ji=function(t){this.h=t,this.keys=Object.keys(t),this.length=this.keys.length,this.current=0};ji.__name__=!0,ji.prototype={hasNext:function(){return this.current<this.length},next:function(){return this.h[this.keys[this.current++]]},__class__:ji};var qs=r["haxe.io.Error"]={__ename__:!0,__constructs__:null,Blocked:{_hx_name:"Blocked",_hx_index:0,__enum__:"haxe.io.Error",toString:i},Overflow:{_hx_name:"Overflow",_hx_index:1,__enum__:"haxe.io.Error",toString:i},OutsideBounds:{_hx_name:"OutsideBounds",_hx_index:2,__enum__:"haxe.io.Error",toString:i},Custom:(o=function(t){return{_hx_index:3,e:t,__enum__:"haxe.io.Error",toString:i}},o._hx_name="Custom",o.__params__=["e"],o)};qs.__constructs__=[qs.Blocked,qs.Overflow,qs.OutsideBounds,qs.Custom];var Bs=function(t){this.current=0,this.array=t};Bs.__name__=!0,Bs.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]},__class__:Bs};var $i=function(t){this.map=t,this.keys=t.keys()};$i.__name__=!0,$i.prototype={hasNext:function(){return this.keys.hasNext()},next:function(){var t=this.keys.next();return{value:this.map.get(t),key:t}},__class__:$i};var Qi=function(t,e,n){C.call(this,t,n),this.pos=e,this.__skipStack++};Qi.__name__=!0,Qi.__super__=C,Qi.prototype=l(C.prototype,{__class__:Qi});function Ws(t){return t instanceof Array?new Bs(t):t.iterator()}function Lt(t,e){if(e==null)return null;e.__id__==null&&(e.__id__=s.$haxeUID++);var n;return t.hx__closures__==null?t.hx__closures__={}:n=t.hx__closures__[e.__id__],n==null&&(n=e.bind(t),t.hx__closures__[e.__id__]=n),n}s.$haxeUID|=0,typeof performance<"u"&&typeof performance.now=="function"&&(u.now=performance.now.bind(performance)),String.fromCodePoint==null&&(String.fromCodePoint=function(t){return t<65536?String.fromCharCode(t):String.fromCharCode((t>>10)+55232)+String.fromCharCode((t&1023)+56320)}),Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__=!0,Array.__name__=!0,Date.prototype.__class__=Date,Date.__name__="Date";var Ro={},Co={},Io=Number,Lo=Boolean,Oo={},Do={};j.__toStr={}.toString;var No=function(t){var e,n;if(O.get_supported()){var a=s.location;if((a!=null?a.protocol:null)!="http:"){var a=s.location;n=(a!=null?a.protocol:null)!="https:"}else n=!1}else n=!0;return e=n?null:V.fromString(s.location.protocol+"//"+s.location.hostname+(s.location.port!=""?":"+s.location.port:"")+"/"),e}(),ws="TLCP-2.5.0",Mo=ws+".lightstreamer.com",Po="9.2.1 build 20241029",In="pcYgxn8m8 feOojyA1V681g3g2.pz482hA6BMDo",Fo="javascript_client",xr="";Bt.LIB_NAME=Fo,Bt.LIB_VERSION=Po,at.lock=new be,at.logInstances=new It,at.emptyLogger=new ye;var mt=at.getLogger("lightstreamer.stream"),F=at.getLogger("lightstreamer.protocol"),et=at.getLogger("lightstreamer.internal"),$=at.getLogger("lightstreamer.session"),K=at.getLogger("lightstreamer.actions"),Ji=at.getLogger("lightstreamer.reachability"),yt=at.getLogger("lightstreamer.subscriptions"),Ht=at.getLogger("lightstreamer.messages");at.getLogger("lightstreamer.cookies");var Zi=at.getLogger("lightstreamer.page");ot.frz_globalPageLifecycle=se.newLoggingInstance(),wt.EOL_LEN=wt.lengthOfBytes(`\r
`);var Ln="The Subscription was initiated using a Field Schema: the field names are not available",Rr="The field position is out of bounds",On="The field name is unknown";Be.instance=new Be;var Dn=Be.instance.hasWorkers?Er.setTimeout:s.setTimeout,ko=Be.instance.hasWorkers?Er.clearTimeout:s.clearTimeout,Le=Be.instance.hasMicroTasks?s.queueMicrotask:function(t){Cr.push(t),Dn(Eo,0)},Cr=[];dt.ZERO=0,es.WS="WS",es.WS_STREAMING="WS-STREAMING",es.WS_POLLING="WS-POLLING",es.HTTP="HTTP",es.HTTP_STREAMING="HTTP-STREAMING",es.HTTP_POLLING="HTTP-POLLING",ks.Merge="MERGE",ks.Distinct="DISTINCT",ks.Command="COMMAND",ks.Raw="RAW",ys.VARINT_RADIX=26,$t.TRACE=0,$t.DEBUG=10,$t.INFO=20,$t.WARN=30,$t.ERROR=40,$t.FATAL=50})(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:void 0);var Tn=Je.LSLightstreamerClient,xc=Je.LSSubscription,$s=Je.LSConsoleLogLevel,go=function(s){this.delegate=s};go.prototype={setContentLength:function(s){this.delegate.setContentLength(s)},getContentLength:function(){return this.delegate.getContentLength()},setIdleTimeout:function(s){this.delegate.setIdleTimeout(s)},getIdleTimeout:function(){return this.delegate.getIdleTimeout()},setKeepaliveInterval:function(s){this.delegate.setKeepaliveInterval(s)},getKeepaliveInterval:function(){return this.delegate.getKeepaliveInterval()},setRequestedMaxBandwidth:function(s){this.delegate.setRequestedMaxBandwidth(s)},getRequestedMaxBandwidth:function(){return this.delegate.getRequestedMaxBandwidth()},getRealMaxBandwidth:function(){return this.delegate.getRealMaxBandwidth()},setPollingInterval:function(s){this.delegate.setPollingInterval(s)},getPollingInterval:function(){return this.delegate.getPollingInterval()},setReconnectTimeout:function(s){this.delegate.setReconnectTimeout(s)},getReconnectTimeout:function(){return this.delegate.getReconnectTimeout()},setStalledTimeout:function(s){this.delegate.setStalledTimeout(s)},getStalledTimeout:function(){return this.delegate.getStalledTimeout()},setRetryDelay:function(s){this.delegate.setRetryDelay(s)},getRetryDelay:function(){return this.delegate.getRetryDelay()},setFirstRetryMaxDelay:function(s){this.delegate.setFirstRetryMaxDelay(s)},getFirstRetryMaxDelay:function(){return this.delegate.getFirstRetryMaxDelay()},setSlowingEnabled:function(s){this.delegate.setSlowingEnabled(s)},isSlowingEnabled:function(){return this.delegate.isSlowingEnabled()},setForcedTransport:function(s){this.delegate.setForcedTransport(s)},getForcedTransport:function(){return this.delegate.getForcedTransport()},setServerInstanceAddressIgnored:function(s){this.delegate.setServerInstanceAddressIgnored(s)},isServerInstanceAddressIgnored:function(){return this.delegate.isServerInstanceAddressIgnored()},setCookieHandlingRequired:function(s){this.delegate.setCookieHandlingRequired(s)},isCookieHandlingRequired:function(){return this.delegate.isCookieHandlingRequired()},setReverseHeartbeatInterval:function(s){this.delegate.setReverseHeartbeatInterval(s)},getReverseHeartbeatInterval:function(){return this.delegate.getReverseHeartbeatInterval()},setHttpExtraHeaders:function(s){this.delegate.setHttpExtraHeaders(s)},getHttpExtraHeaders:function(){return this.delegate.getHttpExtraHeaders()},setHttpExtraHeadersOnSessionCreationOnly:function(s){this.delegate.setHttpExtraHeadersOnSessionCreationOnly(s)},isHttpExtraHeadersOnSessionCreationOnly:function(){return this.delegate.isHttpExtraHeadersOnSessionCreationOnly()},setSessionRecoveryTimeout:function(s){this.delegate.setSessionRecoveryTimeout(s)},getSessionRecoveryTimeout:function(){return this.delegate.getSessionRecoveryTimeout()}};var vo=function(s){this.delegate=s};vo.prototype={setServerAddress:function(s){this.delegate.setServerAddress(s)},getServerAddress:function(){return this.delegate.getServerAddress()},setAdapterSet:function(s){this.delegate.setAdapterSet(s)},getAdapterSet:function(){return this.delegate.getAdapterSet()},setUser:function(s){this.delegate.setUser(s)},getUser:function(){return this.delegate.getUser()},setPassword:function(s){this.delegate.setPassword(s)},getServerInstanceAddress:function(){return this.delegate.getServerInstanceAddress()},getServerSocketName:function(){return this.delegate.getServerSocketName()},getSessionId:function(){return this.delegate.getSessionId()},getClientIp:function(){return this.delegate.getClientIp()}};var Ui=function(s,i){this.delegate=new Tn(s,i),this.connectionOptions=new go(this.delegate.connectionOptions),this.connectionDetails=new vo(this.delegate.connectionDetails)};Ui.setLoggerProvider=function(s){Tn.setLoggerProvider(s)};Ui.LIB_NAME=Tn.LIB_NAME;Ui.LIB_VERSION=Tn.LIB_VERSION;Ui.prototype={connect:function(){this.delegate.connect()},disconnect:function(){this.delegate.disconnect()},getStatus:function(){return this.delegate.getStatus()},sendMessage:function(s,i,r,o,l){this.delegate.sendMessage(s,i,r,o,l)},getSubscriptions:function(){return this.delegate.getSubscriptionWrappers()},subscribe:function(s){this.delegate.subscribe(s.delegate)},unsubscribe:function(s){this.delegate.unsubscribe(s.delegate)},addListener:function(s){this.delegate.addListener(s)},removeListener:function(s){this.delegate.removeListener(s)},getListeners:function(){return this.delegate.getListeners()}};var So=function(s,i,r){this.delegate=new xc(s,i,r,this)};So.prototype={isActive:function(){return this.delegate.isActive()},isSubscribed:function(){return this.delegate.isSubscribed()},setItems:function(s){this.delegate.setItems(s)},getItems:function(){return this.delegate.getItems()},setItemGroup:function(s){this.delegate.setItemGroup(s)},getItemGroup:function(){return this.delegate.getItemGroup()},setFields:function(s){this.delegate.setFields(s)},getFields:function(){return this.delegate.getFields()},setFieldSchema:function(s){this.delegate.setFieldSchema(s)},getFieldSchema:function(){return this.delegate.getFieldSchema()},getMode:function(){return this.delegate.getMode()},setDataAdapter:function(s){this.delegate.setDataAdapter(s)},getDataAdapter:function(){return this.delegate.getDataAdapter()},setSelector:function(s){this.delegate.setSelector(s)},getSelector:function(){return this.delegate.getSelector()},setRequestedMaxFrequency:function(s){this.delegate.setRequestedMaxFrequency(s)},getRequestedMaxFrequency:function(){return this.delegate.getRequestedMaxFrequency()},setRequestedBufferSize:function(s){this.delegate.setRequestedBufferSize(s)},getRequestedBufferSize:function(){return this.delegate.getRequestedBufferSize()},setRequestedSnapshot:function(s){this.delegate.setRequestedSnapshot(s)},getRequestedSnapshot:function(){return this.delegate.getRequestedSnapshot()},setCommandSecondLevelFields:function(s){this.delegate.setCommandSecondLevelFields(s)},getCommandSecondLevelFields:function(){return this.delegate.getCommandSecondLevelFields()},setCommandSecondLevelFieldSchema:function(s){this.delegate.setCommandSecondLevelFieldSchema(s)},getCommandSecondLevelFieldSchema:function(){return this.delegate.getCommandSecondLevelFieldSchema()},setCommandSecondLevelDataAdapter:function(s){this.delegate.setCommandSecondLevelDataAdapter(s)},getCommandSecondLevelDataAdapter:function(){return this.delegate.getCommandSecondLevelDataAdapter()},getValue:function(s,i){return this.delegate.getValue(s,i)},getCommandValue:function(s,i,r){return this.delegate.getCommandValue(s,i,r)},getKeyPosition:function(){return this.delegate.getKeyPosition()},getCommandPosition:function(){return this.delegate.getCommandPosition()},addListener:function(s){this.delegate.addListener(s)},removeListener:function(s){this.delegate.removeListener(s)},getListeners:function(){return this.delegate.getListeners()}};$s.TRACE;$s.DEBUG;$s.INFO;$s.WARN;$s.ERROR;$s.FATAL;const Rc=(s,i)=>{const r=s.__vccOpts||s;for(const[o,l]of i)r[o]=l;return r},Cc={class:"wrapper"},Ic={class:"text-container"},Lc={class:"percentage"},Oc={class:"date"},Dc={__name:"Lightstreamer",setup(s){var i=new Ui("https://push.lightstreamer.com/","ISSLIVE");i.connect();var r=new So("MERGE",["NODE3000005"],["TimeStamp","Value"]);i.subscribe(r);function o(p){const y=new Date().getFullYear(),f=new Date(Date.UTC(y,0,0)),E=p*60*60*1e3;return new Date(f.getTime()+E)}const l=Intl.DateTimeFormat().resolvedOptions().timeZone,c=new Intl.DateTimeFormat("en-US",{dateStyle:"long",timeStyle:"medium",timeZone:l});var u=Dr(),d=Dr();return r.addListener({onItemUpdate:function(p){let y=p.getValue("Value"),f=p.getValue("TimeStamp");d.value=y,u.value=c.format(o(f)),console.log(u),console.log(y)}}),(p,y)=>(io(),bh("div",Cc,[rs("div",Ic,[y[0]||(y[0]=rs("div",{class:"date"},"The urine tank on the International Space Station  is filled to:",-1)),rs("div",Lc,Gn(nn(d))+"%",1),y[1]||(y[1]=rs("div",{class:"date"},"It was last used:",-1)),rs("div",Oc,Gn(nn(u)),1)]),rs("div",{class:"fill-box",style:vn({"--fill-percentage":`${nn(d)}`})},null,4)]))}},Nc=Rc(Dc,[["__scopeId","data-v-e112a4c4"]]),Mc={__name:"App",setup(s){return(i,r)=>(io(),wh(Nc))}};rc(Mc).mount("#app");
